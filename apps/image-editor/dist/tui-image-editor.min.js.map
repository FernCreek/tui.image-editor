{"version":3,"sources":["webpack://tui.ImageEditor/webpack/universalModuleDefinition","webpack://tui.ImageEditor/webpack/bootstrap","webpack://tui.ImageEditor/./src/js/consts.js","webpack://tui.ImageEditor/./src/js/util.js","webpack://tui.ImageEditor/./src/js/codeSnippet.js","webpack://tui.ImageEditor/./src/js/factory/command.js","webpack://tui.ImageEditor/external {\"commonjs\":[\"fabric\",\"fabric\"],\"commonjs2\":[\"fabric\",\"fabric\"],\"amd\":\"fabric\",\"root\":\"fabric\"}","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/global.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/well-known-symbol.js","webpack://tui.ImageEditor/./src/js/interface/component.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/create-non-enumerable-property.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/fails.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/an-object.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/has.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/descriptors.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/is-object.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/export.js","webpack://tui.ImageEditor/./src/js/interface/drawingMode.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/a-function.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/get-built-in.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/iterators.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-define-property.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/is-pure.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/classof-raw.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/new-promise-capability.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/internal-state.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/create-property-descriptor.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/to-indexed-object.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/redefine.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/iterate.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/perform.js","webpack://tui.ImageEditor/./src/js/helper/selectionModifyHelper.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/to-integer.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/require-object-coercible.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/document-create-element.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/shared-key.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/hidden-keys.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/path.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/function-bind-context.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-get-prototype-of.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/set-to-string-tag.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/to-string-tag-support.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/classof.js","webpack://tui.ImageEditor/./src/js/customEvent.js","webpack://tui.ImageEditor/./src/js/factory/errorMessage.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/inspect-source.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/shared-store.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/ie8-dom-define.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/to-primitive.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/shared.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/uid.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/define-iterator.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-get-own-property-descriptor.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/is-forced.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/iterators-core.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/native-symbol.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-create.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/to-length.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/enum-bug-keys.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/html.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-set-prototype-of.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/native-promise-constructor.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/species-constructor.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/task.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/engine-is-ios.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/engine-user-agent.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/promise-resolve.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/es.promise.all-settled.js","webpack://tui.ImageEditor/./src/js/helper/shapeResizeHelper.js","webpack://tui.ImageEditor/./src/index.js","webpack://tui.ImageEditor/./src/js/polyfill.js","webpack://tui.ImageEditor/./src/js/imageEditor.js","webpack://tui.ImageEditor/./src/js/invoker.js","webpack://tui.ImageEditor/./src/js/interface/command.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/features/promise/index.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/es/promise/index.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/es.string.iterator.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/string-multibyte.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/native-weak-map.js","webpack://tui.ImageEditor/(webpack)/buildin/global.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/set-global.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-property-is-enumerable.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/indexed-object.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/create-iterator-constructor.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/to-object.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/correct-prototype-getter.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/use-symbol-as-uid.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-define-properties.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-keys.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-keys-internal.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/array-includes.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/to-absolute-index.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/object-to-string.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/a-possible-prototype.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/web.dom-collections.iterator.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/es.array.iterator.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/add-to-unscopables.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/dom-iterables.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/es.promise.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/redefine-all.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/set-species.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/an-instance.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/is-array-iterator-method.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/get-iterator-method.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/call-with-safe-iteration-closing.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/check-correctness-of-iteration.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/microtask.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/host-report-errors.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/internals/engine-v8-version.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/es.promise.finally.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/esnext.aggregate-error.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/esnext.promise.all-settled.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/esnext.promise.try.js","webpack://tui.ImageEditor/./node_modules/core-js-pure/modules/esnext.promise.any.js","webpack://tui.ImageEditor/./src/js/action.js","webpack://tui.ImageEditor/./src/js/helper/imagetracer.js","webpack://tui.ImageEditor/./src/js/graphics.js","webpack://tui.ImageEditor/./src/js/component/imageLoader.js","webpack://tui.ImageEditor/./src/js/component/cropper.js","webpack://tui.ImageEditor/./src/js/extension/cropzone.js","webpack://tui.ImageEditor/./src/js/component/flip.js","webpack://tui.ImageEditor/./src/js/component/rotation.js","webpack://tui.ImageEditor/./src/js/component/freeDrawing.js","webpack://tui.ImageEditor/./src/js/component/line.js","webpack://tui.ImageEditor/./src/js/extension/arrowLine.js","webpack://tui.ImageEditor/./src/js/component/text.js","webpack://tui.ImageEditor/./src/js/component/icon.js","webpack://tui.ImageEditor/./src/js/component/filter.js","webpack://tui.ImageEditor/./src/js/extension/mask.js","webpack://tui.ImageEditor/./src/js/extension/sharpen.js","webpack://tui.ImageEditor/./src/js/extension/emboss.js","webpack://tui.ImageEditor/./src/js/extension/colorFilter.js","webpack://tui.ImageEditor/./src/js/component/shape.js","webpack://tui.ImageEditor/./src/js/helper/shapeFilterFillHelper.js","webpack://tui.ImageEditor/./src/js/component/zoom.js","webpack://tui.ImageEditor/./src/js/drawingMode/cropper.js","webpack://tui.ImageEditor/./src/js/drawingMode/freeDrawing.js","webpack://tui.ImageEditor/./src/js/drawingMode/lineDrawing.js","webpack://tui.ImageEditor/./src/js/drawingMode/shape.js","webpack://tui.ImageEditor/./src/js/drawingMode/text.js","webpack://tui.ImageEditor/./src/js/drawingMode/icon.js","webpack://tui.ImageEditor/./src/js/drawingMode/zoom.js","webpack://tui.ImageEditor/./src/js/command/addIcon.js","webpack://tui.ImageEditor/./src/js/command/addImageObject.js","webpack://tui.ImageEditor/./src/js/command/addObject.js","webpack://tui.ImageEditor/./src/js/command/addShape.js","webpack://tui.ImageEditor/./src/js/command/addText.js","webpack://tui.ImageEditor/./src/js/command/applyFilter.js","webpack://tui.ImageEditor/./src/js/command/changeIconColor.js","webpack://tui.ImageEditor/./src/js/command/changeShape.js","webpack://tui.ImageEditor/./src/js/command/changeText.js","webpack://tui.ImageEditor/./src/js/command/changeTextStyle.js","webpack://tui.ImageEditor/./src/js/command/clearObjects.js","webpack://tui.ImageEditor/./src/js/command/flip.js","webpack://tui.ImageEditor/./src/js/command/loadImage.js","webpack://tui.ImageEditor/./src/js/command/removeFilter.js","webpack://tui.ImageEditor/./src/js/command/removeObject.js","webpack://tui.ImageEditor/./src/js/command/resizeCanvasDimension.js","webpack://tui.ImageEditor/./src/js/command/rotate.js","webpack://tui.ImageEditor/./src/js/command/setObjectProperties.js","webpack://tui.ImageEditor/./src/js/command/setObjectPosition.js","webpack://tui.ImageEditor/./src/js/command/changeSelection.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__4__","installedModules","__webpack_require__","m","ZOOM_HELP_MENUS","COMMAND_HELP_MENUS","DELETE_HELP_MENUS","HELP_MENUS","SHAPE_FILL_TYPE","FILTER","COLOR","SHAPE_TYPE","OBJ_TYPE","CROPZONE","filterType","VINTAGE","SEPIA2","REMOVE_COLOR","COLOR_FILTER","REMOVE_WHITE","BLEND_COLOR","BLEND","componentNames","keyMirror","SHAPE_DEFAULT_OPTIONS","lockSkewingX","lockSkewingY","bringForward","isRegular","CROPZONE_DEFAULT_OPTIONS","hasRotatingPoint","hasBorders","lockScalingFlip","lockRotation","commandNames","CLEAR_OBJECTS","LOAD_IMAGE","FLIP_IMAGE","ROTATE_IMAGE","ADD_OBJECT","REMOVE_OBJECT","APPLY_FILTER","REMOVE_FILTER","ADD_ICON","CHANGE_ICON_COLOR","ADD_SHAPE","CHANGE_SHAPE","ADD_TEXT","CHANGE_TEXT","CHANGE_TEXT_STYLE","ADD_IMAGE_OBJECT","RESIZE_CANVAS_DIMENSION","SET_OBJECT_PROPERTIES","SET_OBJECT_POSITION","CHANGE_SELECTION","eventNames","OBJECT_ACTIVATED","OBJECT_REMOVED","OBJECT_MOVED","OBJECT_SCALED","OBJECT_CREATED","OBJECT_ROTATED","OBJECT_ADDED","OBJECT_MODIFIED","TEXT_EDITING","TEXT_CHANGED","ICON_CREATE_RESIZE","ICON_CREATE_END","ADD_OBJECT_AFTER","MOUSE_DOWN","MOUSE_UP","MOUSE_MOVE","REDO_STACK_CHANGED","UNDO_STACK_CHANGED","SELECTION_CLEARED","SELECTION_CREATED","EXECUTE_COMMAND","AFTER_UNDO","AFTER_REDO","ZOOM_CHANGED","HAND_STARTED","HAND_STOPPED","KEY_DOWN","KEY_UP","INPUT_BOX_EDITING_STARTED","INPUT_BOX_EDITING_STOPPED","FOCUS","BLUR","selectorNames","COLOR_PICKER_INPUT_BOX","historyNames","LOAD_MASK_IMAGE","ADD_MASK_IMAGE","CROP","drawingModes","drawingMenuNames","TEXT","SHAPE","ZOOM","zoomModes","DEFAULT","HAND","keyCodes","Z","Y","C","V","SHIFT","BACKSPACE","DEL","ARROW_DOWN","ARROW_UP","SPACE","fObjectOptions","SELECTION_STYLE","borderColor","cornerColor","cornerSize","originX","originY","transparentCorners","rejectMessages","addedObject","flip","invalidDrawingMode","invalidParameters","isLock","loadImage","loadingImageFailed","noActiveObject","noObject","redo","rotation","undo","unsupportedOperation","unsupportedType","defaultIconPath","defaultRotateRangeValues","realTimeEvent","min","max","value","defaultDrawRangeValues","defaultShapeStrokeValues","defaultTextRangeValues","defaultFilterRangeValues","tintOpacityRange","useDecimal","removewhiteDistanceRange","brightnessRange","noiseRange","pixelateRange","colorfilterThresholdRange","blurFilterRange","defaultPixelTargetTolerance","emptyCropRectValues","LEFT","TOP","WIDTH","HEIGHT","clamp","minValue","maxValue","obj","args","forEach","key","makeStyleText","styleObj","styleStr","prop","getProperties","keys","props","length","i","toInteger","parseInt","toCamelCase","targetString","replace","$0","$1","toUpperCase","isSupportFileApi","File","FileList","FileReader","getRgb","color","alpha","slice","r","g","b","sendHostName","styleLoad","styleBuffer","tagId","head","document","getElementsByTagName","linkElement","createElement","styleData","encodeURIComponent","id","setAttribute","appendChild","getSelector","targetElement","str","querySelector","base64ToBlob","data","mimeString","raw","uInt8Array","header","imageType","rawLength","atob","Uint8Array","charCodeAt","Blob","type","fixFloatingPoint","Number","toFixed","FLOATING_POINT_DIGIT","assignmentForDestroy","targetObject","cls","prefix","charAt","CSS_PREFIX","changeOrigin","fObject","origin","getPointByOrigin","left","x","top","y","set","setCoords","flipObject","result","Object","setCustomProperty","customProps","extend","getCustomProperty","propNames","resultObject","isString","propName","capitalizeString","includes","getFillTypeFromOption","fillOption","pick","getFillTypeFromObject","shapeObj","fill","source","isShape","inArray","get","getObjectType","toStartOfCapital","isSilentCommand","command","name","getHistoryTitle","historyInfo","detail","useAlpha","mode","filterName","getFilterType","getHelpMenuBarPosition","position","isEmptyCropzone","cropRect","width","height","Math","targetArray","compareValue","indexOf","first","Promise","lastId","iteratee","context","isArray","forEachArray","forEachOwnProperties","arr","index","len","call","hasOwnProperty","Array","isFunction","Function","isNull","isObject","isUndefined","undefined","target","objects","hasOwnProp","prototype","arguments","filter","add","Error","subResult","push","apply","searchElement","array","startIndex","isExisty","param","String","map","resultArray","paths","stamp","__fe_id","commands","create","actions","Command","register","it","check","globalThis","self","global","shared","has","uid","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","Symbol","createWellKnownSymbol","withoutSetter","Component","this","graphics","fire","oImage","setCanvasImage","getCanvasElement","getCanvas","getCanvasImage","getImageName","getEditor","setting","withRendering","setImageProperties","dimension","setCanvasCssDimension","setCanvasBackstoreDimension","adjustCanvasDimension","adjustCanvasDimensionForRotate","DESCRIPTORS","definePropertyModule","createPropertyDescriptor","object","f","exec","error","TypeError","fails","defineProperty","wrapConstructor","NativeConstructor","Wrapper","a","c","getOwnPropertyDescriptor","isForced","path","bind","createNonEnumerableProperty","options","USE_NATIVE","VIRTUAL_PROTOTYPE","sourceProperty","targetProperty","nativeProperty","resultProperty","descriptor","TARGET","GLOBAL","STATIC","stat","PROTO","proto","nativeSource","targetPrototype","forced","noTargetGet","wrap","sham","real","createMessage","errorMessage","errorTypes","types","DrawingMode","UN_IMPLEMENTATION","aFunction","variable","namespace","method","IE8_DOM_DEFINE","anObject","toPrimitive","nativeDefineProperty","O","P","Attributes","toString","PromiseCapability","resolve","reject","promise","$$resolve","$$reject","NATIVE_WEAK_MAP","objectHas","sharedKey","hiddenKeys","WeakMap","store","wmget","wmhas","wmset","metadata","STATE","enforce","getterFor","TYPE","state","bitmap","enumerable","configurable","writable","IndexedObject","requireObjectCoercible","Result","stopped","isArrayIteratorMethod","toLength","getIteratorMethod","callWithSafeIterationClosing","iterable","fn","that","AS_ENTRIES","IS_ITERATOR","iterator","iterFn","next","step","boundFunction","done","stop","setCachedUndoDataForDimension","undoData","cachedUndoDataForChangeDimension","getCachedUndoDataForDimension","makeSelectionUndoData","undoDatumMaker","getObjects","item","angle","scaleX","scaleY","realizeTransform","makeSelectionUndoDatum","isSelection","ceil","floor","argument","isNaN","EXISTS","toObject","CORRECT_PROTOTYPE_GETTER","IE_PROTO","ObjectPrototype","getPrototypeOf","constructor","TO_STRING_TAG_SUPPORT","TO_STRING_TAG","wellKnownSymbol","TAG","SET_METHOD","test","classofRaw","CORRECT_ARGUMENTS","tag","tryGet","callee","snippet","R_EVENTNAME_SPLIT","CustomEvents","events","contexts","mixin","func","_getHandlerItem","handler","_safeEvent","eventName","byName","_safeContext","_indexOfContext","ctx","_memorizeContext","_forgetContext","contextIndex","splice","_bindEvent","on","split","once","onceHandler","off","_spliceMatches","predicate","_matchHandler","needRemove","_matchContext","_matchHandlerAndContext","matchHandler","matchContext","_offByEventName","andByHandler","handlerItems","_offByHandler","_offByObject","matchFunc","invoke","hasListener","getListenerLength","messages","methodName","NO_COMPONENT_NAME","toLowerCase","functionToString","inspectSource","setGlobal","SHARED","input","PREFERRED_STRING","val","valueOf","IS_PURE","version","copyright","postfix","random","returnThis","$","createIteratorConstructor","setPrototypeOf","setToStringTag","redefine","Iterators","IteratorsCore","IteratorPrototype","BUGGY_SAFARI_ITERATORS","ITERATOR","VALUES","ENTRIES","Iterable","NAME","IteratorConstructor","IS_SET","FORCED","getIterationMethod","KIND","defaultIterator","IterablePrototype","CurrentIteratorPrototype","methods","KEY","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","entries","values","propertyIsEnumerableModule","toIndexedObject","nativeGetOwnPropertyDescriptor","feature","detection","normalize","POLYFILL","NATIVE","replacement","string","PrototypeOfArrayIteratorPrototype","arrayIterator","getOwnPropertySymbols","EmptyConstructor","scriptTag","content","LT","SCRIPT","activeXDocument","defineProperties","enumBugKeys","html","documentCreateElement","PROTOTYPE","NullProtoObject","domain","ActiveXObject","iframeDocument","iframe","write","close","temp","parentWindow","NullProtoObjectViaActiveX","style","display","src","contentWindow","open","F","Properties","getBuiltIn","aPossiblePrototype","setter","CORRECT_SETTER","__proto__","SPECIES","defaultConstructor","S","run","queue","runner","listener","event","post","postMessage","location","protocol","host","defer","channel","port","classof","IS_IOS","setImmediate","clear","clearImmediate","process","MessageChannel","Dispatch","counter","ONREADYSTATECHANGE","nextTick","now","port2","port1","onmessage","addEventListener","importScripts","removeChild","setTimeout","userAgent","newPromiseCapability","promiseCapability","newPromiseCapabilityModule","perform","iterate","allSettled","capability","promiseResolve","remaining","alreadyCalled","then","status","e","reason","DIVISOR","rect","circle","triangle","DIMENSION_KEYS","w","h","getPositionsOfRotatedOrigin","pointer","sx","sy","px","py","PI","cos","sin","setOrigins","shape","leftTopPoint","rightTopPoint","rightBottomPoint","leftBottomPoint","origins","lt","rt","rb","lb","resize","isScaling","originKey","centerPoint","originPositions","strokeWidth","divisor","dimensionKeys","isTriangle","substring","startPoint","maxScale","hasControls","adjustDimensionOnScaling","abs","sqrt","setPositionByOrigin","adjustOriginToCenter","ImageEditor","Element","matches","msMatchesSelector","webkitMatchesSelector","closest","s","el","documentElement","contains","parentElement","parentNode","nodeType","createElementNS","view","classListProp","protoProp","elemCtrProto","objCtr","strTrim","trim","arrIndexOf","DOMEx","message","code","DOMException","checkTokenAndGetIndex","classList","token","ClassList","elem","trimmedClasses","getAttribute","classes","_updateClassName","classListProto","classListGetter","tokens","l","updated","remove","toggle","force","join","classListPropDesc","ex","number","__defineGetter__","testElement","createMethod","original","DOMTokenList","_toggle","ui","isColorPickerInputBoxEditing","selectionStyle","applyCropSelectionStyle","applyGroupSelectionStyle","_graphics","setSelectionStyle","setCropSelectionStyle","eventTarget","_invoker","canvas","_handlers","mousedown","mouseup","mousemove","objectMoved","objectScaled","objectRotated","objectActivated","objectAdded","objectRemoved","objectModified","addText","addObject","textEditing","textChanged","iconCreateResize","iconCreateEnd","selectionCleared","selectionCreated","keydown","removeEventListener","ctrlKey","keyCode","metaKey","isModifierKey","canRemove","allowObjectRemoval","resetTargetObjectForCopyPaste","pasteObject","clearRedoStack","isDeleteKey","isRemoveReady","isReadyRemoveObject","preventDefault","removeActiveObject","activeObjectId","getActiveObjectIdForRemove","removeObject","originPointer","commandFactory","pushUndoStack","getObjectId","execute","getDrawingMode","deactivateAll","renderAll","discardSelection","selectable","changeSelectableAll","initHistory","clearHistory","commandName","theArgs","concat","executeSilent","iterationCount","zoomLevel","zoom","resetZoom","imgFile","imageName","imgUrl","URL","createObjectURL","loadImageFromURL","revokeObjectURL","url","option","startDrawingMode","stopDrawingMode","getCroppedImageData","getCropzoneRect","setCropzoneRect","_flip","isSilent","_rotate","setBrush","setDrawingShape","iconColor","setIconStyle","_setPositions","text","originPosition","clientPosition","objectProps","getObject","_pushAddObjectCommand","_pushModifyObjectCommand","lockScalingX","lockScalingY","infos","registerPaths","cursorType","changeCursor","hasFilter","toDataURL","clearUndoStack","isEmptyUndoStack","isEmptyRedoStack","setCssMaxDimension","_detachDomEvents","destroy","_detachColorPickerInputBoxEvents","centerPosition","getCenter","keyValue","setObjectProperties","getObjectProperties","getCanvasSize","getCanvasZoom","getObjectPosition","posInfo","setCanvasZoom","allow","wrapper","includeUI","usageStatistics","Invoker","Graphics","getEditorArea","cssMaxWidth","cssMaxHeight","_onKeyDown","_onMouseDown","_onMouseUp","_onMouseMove","_onObjectActivated","_onObjectRemoved","_onObjectMoved","_onObjectScaled","_onObjectRotated","_onObjectAdded","_onObjectModified","createdPath","_onCreatedPath","_onAddText","_onAddObject","_onTextEditing","_onTextChanged","_onIconCreateResize","_onIconCreateEnd","_selectionCleared","_selectionCreated","_attachInvokerEvents","_attachGraphicsEvents","_attachDomEvents","_setSelectionStyle","initCanvas","setReAction","_attachColorPickerInputBoxEvents","fabric","enableGLFiltering","action","isRedo","lock","_isSilent","unlock","executeCallback","pushRedoStack","undoCallback","_redoStack","_undoStack","_isLocked","_invokeExecution","pop","_fireUndoStackChanged","_invokeUndo","_fireRedoStackChanged","cachedUndoDataForSilent","callback","parent","InternalStateModule","defineIterator","STRING_ITERATOR","setInternalState","getInternalState","iterated","point","CONVERT_TO_STRING","$this","pos","second","size","codeAt","nativePropertyIsEnumerable","propertyIsEnumerable","NASHORN_BUG","1","objectKeys","internalObjectKeys","names","IS_INCLUDES","fromIndex","toAbsoluteIndex","integer","DOMIterables","COLLECTION_NAME","Collection","CollectionPrototype","addToUnscopables","ARRAY_ITERATOR","kind","Arguments","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DataTransferItemList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","isThenable","notify","isReject","notified","chain","reactions","microtask","ok","exited","reaction","fail","rejection","onHandleUnhandled","enter","exit","onUnhandled","dispatchEvent","DISPATCH_EVENT","createEvent","initEvent","UNHANDLED_REJECTION","hostReportErrors","unwrap","internalReject","Internal","OwnPromiseCapability","PromiseWrapper","nativeThen","NativePromise","redefineAll","setSpecies","anInstance","checkCorrectnessOfIteration","speciesConstructor","task","V8_VERSION","PROMISE","getInternalPromiseState","PromiseConstructor","$fetch","newGenericPromiseCapability","IS_NODE","PromiseRejectionEvent","FakePromise","INCORRECT_ITERATION","all","isUnhandled","emit","internalResolve","executor","onFulfilled","onRejected","unsafe","fetch","$promiseResolve","race","CONSTRUCTOR_NAME","Constructor","ArrayPrototype","returnMethod","SAFE_CLOSING","called","iteratorWithReturn","from","SKIP_CLOSING","ITERATION_SUPPORT","flush","last","node","macrotask","MutationObserver","WebKitMutationObserver","queueMicrotaskDescriptor","queueMicrotask","createTextNode","observe","characterData","console","match","versions","v8","onFinally","getInternalAggregateErrorState","$AggregateError","errors","errorsArray","AggregateError","callbackfn","PROMISE_ANY_ERROR","any","alreadyResolved","alreadyRejected","getActions","main","_mainAction","_shapeAction","crop","_cropAction","_flipAction","rotate","_rotateAction","_textAction","mask","_maskAction","draw","_drawAction","icon","_iconAction","_filterAction","history","_historyAction","exitCropOnAction","submenu","changeMenu","onEndUndoRedo","filterOptions","setRangeBarAngle","setFilterState","initFilterState","initFilterCheckBoxState","initLoadImage","imagePath","sizeValue","initializeImgUrl","resizeEditor","imageSize","reset","_initHistory","delete","changeHelpButtonEnabled","deleteAll","clearObjects","load","file","alert","loadImageFromFile","activeMenuEvent","_clearHistory","download","dataURL","blob","saveAs","body","innerHTML","toggleHistoryMenu","zoomIn","zoomMode","toggleZoomButtonStatus","getZoomMode","startZoomInMode","endZoomInMode","zoomOut","hand","offZoomInButtonStatus","startHandMode","endHandMode","_commonAction","changeColor","changeIconColor","addIcon","iconType","setDrawingIcon","cancelAddIcon","clearIconType","registerDefaultIcons","iconObj","registerIcons","registerCustomIcon","Imagetracer","imageToSVG","svgstr","svgPath","tracerDefaultOption","setDrawMode","settings","setColor","addImageObject","applyFilter","maskObjId","changeTextStyle","setAngle","changeShape","changeShapeObject","shapeType","cancel","preset","presetType","changeApplyButtonStatus","flipType","applying","removeFilter","undoStackChanged","redoStackChanged","setShapeStatus","strokeColor","stroke","fillColor","setMaxStrokeValue","changeStandbyMode","setTextStyleStateOnAction","setIconPickerColor","textColor","fontSize","fontStyle","fontWeight","underline","styles","fontFamily","addObjectAfter","strokeValue","getStrokeValue","setStrokeValue","count","CROPPER","modeChange","menu","_changeActivateMode","ImageTracer","pathomit","ltres","qtres","scale","strokewidth","viewbox","linefilter","desc","rightangleenhance","pal","checkoptions","imagedataToSVG","getImgdata","imgd","td","imagedataToTracedata","getsvgstring","ii","colorquantization","tracedata","layering","layers","palette","colornum","tracedlayer","batchtracepaths","internodes","pathscan","layeringstep","ls","layercontainerid","drawLayers","specpalette","bps","batchpathscan","bis","batchinternodes","batchtracelayers","optionpresets","k","idx","cd","cdl","ci","paletteacc","pixelnum","j","cnt","colorsampling","generatepalette","numberofcolors","samplepalette","samplepalette2","blurradius","blur","blurdelta","colorquantcycles","n","mincolorratio","ni","nj","vx","vy","rcnt","gcnt","bcnt","graystep","colorqnum","pow","colorstep","rndnum","ah","aw","n1","n2","n3","n4","n5","n6","n7","n8","cnum","layer","pacnt","pcnt","dir","pathfinished","holepath","lookuprow","points","boundingbox","holechildren","t","pathscan_combined_lookup","isholepath","parentidx","parentbbox","parentcnt","boundingboxincludes","childbbox","bpaths","ins","palen","nextidx","nextidx2","previdx","previdx2","testrightangle","linesegment","getdirection","idx1","idx2","idx3","idx4","idx5","x1","y1","x2","y2","binternodes","segtype1","segtype2","seqend","smp","segments","fitseq","seqstart","errorpoint","errorval","curvepass","dist2","tl","pl","fitpoint","t1","t2","t3","cpx","cpy","x3","y3","splitpoint","internodepaths","btracedpaths","tracepath","btbis","places","lnum","pathnum","tosvgcolorstr","roundcoords","roundtodec","hcnt","hsmp","lcpr","qcpr","versionnumber","lcnt","svgpathstring","parentid","div","getElementById","radius","delta","racc","gacc","bacc","aacc","wacc","imgd2","thisgk","gks","himgd","Uint8ClampedArray","img","Image","corsenabled","crossOrigin","onload","getContext","drawImage","getImageData","fillStyle","torgbastr","fillRect","default","posterized1","posterized2","curvy","sharp","detailed","smoothed","grayscale","fixedpalette","randomsampling1","randomsampling2","artistic1","artistic2","artistic3","artistic4","posterized3","cssOnly","backstoreOnly","wrapperEl","_canvas","_detachZoomEvents","getComponent","components","attachKeyboardZoomEvents","detachKeyboardZoomEvents","discardActiveObject","_objects","includesBackground","isType","isEmpty","forEachObject","_activeObject","activeObject","getActiveObject","group","Group","_addFabricObject","isEditing","ActiveSelection","setActiveObject","cropSelectionStyle","_componentMap","_drawingMode","_isSameDrawingMode","drawingModeInstance","_getDrawingModeInstance","start","NORMAL","end","cropper","changeVisibility","dataUrl","canvasImage","maxDimension","getBoundingRect","_calcMaxDimension","viewportCenter","setDimensions","setZoom","getElement","_callbackAfterLoadingImageObject","fromURL","image","createObjectProperties","drawingMode","compName","FREE_DRAWING","LINE_DRAWING","LINE","setStates","ICON","pathInfos","defaultCursor","clone","targetObj","targetOrigin","centerOrigin","diffX","diffY","getZoom","staticCanvas","StaticCanvas","enableRetinaScaling","modeName","_drawingModeMap","objectCaching","element","selectedElement","canvasElement","nodeName","Canvas","containerClass","targetFindTolerance","rotationCursor","_register","CropperDrawingMode","FreeDrawingMode","LineDrawingMode","ShapeDrawingMode","TextDrawingMode","IconDrawingMode","ZoomDrawingMode","ImageLoader","Cropper","Flip","Rotation","FreeDrawing","Line","Text","Icon","Filter","Shape","Zoom","getName","wScaleFactor","hScaleFactor","centerPos","getCenterPoint","_handler","onMouseDown","onMouseUp","onMouseMove","onObjectAdded","onObjectRemoved","onObjectMoved","onObjectScaled","onObjectModified","onObjectRotated","onPathCreated","onSelectionCleared","onSelectionCreated","onObjectSelected","fEvent","getPointer","params","_removeFabricObject","_lazyFire","paramsMaker","delegationState","canvasEventDelegation","canvasEventRegister","bringToFront","evented","hoverCursor","_createTextProperties","shapeComp","makeFillPropertyForUserEvent","targetObjectForCopyPaste","targetObjects","newTargetObject","_cloneObject","addedObjects","getActiveSelectionFromObjects","_cloneObjectItem","_copyFabricObjectForPaste","clonedObject","objectProperties","addExtraPx","isReverse","_copyFabricObject","canvasWidth","canvasHeight","rightEdge","bottomEdge","cloned","processForCopiedObject","_onObjectSelected","_onPathCreated","_onSelectionCleared","_onSelectionCreated","_setObjectCachingToFalse","_setCanvasElement","_createDrawingModeInstances","_createComponents","_attachCanvasEvents","_attachZoomEvents","imageOption","padding","_setBackgroundImage","backgroundImage","setBackgroundImage","IMAGE_LOADER","DEFAULT_OPTION","presetRatio","_cropzone","Cropzone","_listeners","selection","util","addListener","keyup","cropzone","removeListener","visible","coord","_startX","_startY","_calcRectDimensionFromPoint","getWidth","getHeight","startX","startY","_withShiftKey","listeners","requestRenderAll","containsCropzone","imageData","isValid","_getPresetPropertiesForCropSize","getScale","orignalValue","originalWidth","originalHeight","standardSize","scaleWidth","scaleHeight","_onKeyUp","_onFabricMouseDown","_onFabricMouseMove","_onFabricMouseUp","NOOP_FUNCTION","CORNER_TYPE_LIST","getScaleBasis","createClass","Rect","initialize","extendsOptions","callSuper","_addEventHandler","setControlVisible","canvasEventTrigger","eventTrigger","moving","_onMoving","scaling","_onScaling","_renderCropzone","originalFlipX","flipX","originalFlipY","flipY","originalScaleX","originalScaleY","_fillOuterRect","lineWidth","_strokeBorder","lineDashWidth","lineDashOffset","_render","_getCoordinates","save","beginPath","moveTo","lineTo","closePath","restore","_fillInnerRect","outerX","outerY","_caculateInnerPosition","strokeStyle","outer","halfWidth","halfHeight","setLineDash","maxLeft","maxTop","selectedCorner","transform","corner","_calcScalingSizeFromPointer","_resizeCropZone","adjustRatioCropzoneSize","leftMaker","topMaker","maxWidth","maxHeight","scaleTo","maxScaleFactor","v","_getCropzoneRectInfo","rectTop","rectLeft","rectWidth","rectHeight","rectRight","rectBottom","resizeInfoMap","newWidth","newHeight","tr","mt","ml","mr","mb","bl","br","newSetting","getCurrentSetting","isChangingFlipX","isChangingFlipY","_invertAngle","_flipObjects","parseFloat","current","FLIP","oldAngle","getCurrentAngle","oldImageCenter","newImageCenter","_rotateForEachObject","angleDiff","centerDiff","objCenter","radian","degreesToRadians","newObjCenter","rotatePoint","additionalAngle","ROTATION","isDrawingMode","brush","freeDrawingBrush","oColor","Color","toRgba","findTarget","perPixelTargetFind","arrowType","tail","_arrowType","setHeadOption","_width","_oColor","_line","ArrowLine","_createLineEventObjectProperties","startPosition","endPosition","calcLinePoints","linePosition","fromX","fromY","toX","toY","_renderBasicLinePath","_drawDecoratorPath","_renderStroke","_drawDecoratorPathType","_drawTrianglePath","_drawChevronPath","decorateSize","rotatedPosition","changeAngle","getRotatePosition","standardX","standardY","compareX","compareY","atan2","distance","referencePosition","defaultStyles","resetStyles","textAlign","isPrevEditing","select","selectClear","setCanvasRatio","editStatus","newText","_defaultStyles","_setInitPos","autofocus","IText","enterEditing","selectAll","activeObj","_getTextDecorationAdaptObject","textDecoration","_selectedObj","_isSelected","cssWidth","originWidth","_ratio","linethrough","overline","ratio","getCanvasRatio","_editingObj","textareaStyle","_textarea","editingObj","editingObjInfos","_editingObjInfos","textContent","transWidth","transHeight","scrollLeft","scrollTop","getSelectedObj","setSelectedInfo","_fireAddText","clientX","clientY","newClickTime","Date","getTime","_isDoubleClick","_lastClickTime","_onFabricSelect","_onFabricSelectClear","_onFabricScaling","_onFabricTextChanged","pathMap","arrow","arrow2","_type","_iconColor","_pathMap","_createIcon","_icon","controlStyle","Path","_startPoint","moveOriginPointer","filters","Mask","Sharpen","Emboss","ColorFilter","sourceImg","_getSourceImage","imgFilter","_getFilter","_createFilter","_changeFilterValues","_apply","getOptions","_removeFilter","applyFilters","filterObj","fabricType","_getFabricFilterType","ImageFilter","BlendImage","applyTo","pipelineState","canvasEl","maskCanvasEl","_createCanvasOfMask","maskCtx","_drawMask","_mapData","createCanvasElement","maskImg","translate","imgHeight","sourceData","maskData","Convolute","matrix","BaseFilter","threshold","filterColor","sourceFromHex","_getColor","_isOutsideThreshold","putImageData","color1","color2","diff","SHAPE_INIT_OPTIONS","rx","ry","makeFabricFillOption","createStaticCanvas","fillType","extOption","newStaticCanvas","makeFillPatternForFilter","uniformScaling","_options","extendOption","_extendOptions","_createInstance","_bindEventOnShape","_resetPositionFillFilter","hasFillOption","fillProp","fillImage","getFillImageFromShape","filterOption","makeFilterOptionFromFabricImage","originalShapeObj","instance","Ellipse","Triangle","selectionStyles","added","_shapeObj","resizeHelper","selected","deselected","modified","currentObj","modifiedInGroup","activeSelection","_fillFilterRePositionInGroupSelection","rotating","setCursor","startPointX","startPointY","_mouseMoved","KEY_CODES","patternSourceCanvas","originalAngle","reMakePatternImageSource","rePositionFilterTypeFillImage","resetFillPatternCanvas","addWithUpdate","rotatedShapeCornerDimension","getShapeEdgePoint","ax","ay","bx","by","cx","cy","dx","dy","right","bottom","getRotatedDimension","diffLeft","diffTop","cropX","cropY","fillImageMaxSize","overflowAreaPositionFixer","outDistance","imageLeft","imageTop","shapePointNavigation","linePointsOutsideCanvas","shapeNeighborPointNavigation","minimumPoint","minimumPointIndex","endPointIndex1","endPointIndex2","startPointIndex","calculateLinePointsOutsideCanvas","reatAngles","linePointsOfOneVertexIndex","horizontalVerticalAngle","pointIndex","endPoint","calculateLineAngleOfOutsideCanvas","diffPosition","rotationChangePoint1","rotationChangePoint2","isForward","isReverseLeftPositionForFlip","isReverseTopPositionForFlip","getReversePositionForFlip","cropDistance","compareSize","POSITION_DIMENSION_MAP","cachedCanvasImageElement","calculateDimensionLeftTopEdge","insideCanvasRealImageWidth","insideCanvasRealImageHeight","cropDistance2","calculateDimensionRightBottomEdge","calculateFillImageDimensionOutsideCanvas","makeFillImage","getCachedCanvasImageElement","fabricProperty","Pattern","repeat","innerImage","newFillImage","FILTER_OPTION_MAP","pixelate","FILTER_NAME_VALUE_MAP","imageObject","toCanvasElement","copiedCanvasElement","currentCanvasImageAngle","fabricFilterClassName","DEFAULT_SCROLL_OPTION","opacity","DEFAULT_VERTICAL_SCROLL_RATIO","DEFAULT_HORIZONTAL_SCROLL_RATIO","isTextEditing","withSpace","zoomArea","_changeObjectsEventedState","startZoom","moveZoom","stopZoom","_startHandPoint","startHand","center","_getCenterPoint","_isMaxZoomLevel","_centerPoints","prevZoomLevel","zoomToPoint","_fireZoomChanged","aspectRatio","centerPoints","prevX","prevY","_isDefaultZoomLevel","setViewportTransform","deltaX","deltaY","moveHand","stopHand","_movePointOfZoom","viewport","_verticalScroll","_horizontalScroll","viewportWidth","viewportHeight","horizontalScrollWidth","horizontalScrollHeight","horizontalScrollLeft","horizontalScrollMargin","horizontalScrollBorderRadius","verticalScrollWidth","verticalScrollHeight","verticalScrollTop","verticalScrollMargin","verticalScrollBorderRadius","_addScrollBar","scrollBarTid","clearTimeout","calcViewportBoundaries","_onMouseDownWithZoomMode","_onMouseMoveWithZoomMode","_onMouseUpWithZoomMode","_onMouseDownWithHandMode","_onMouseMoveWithHandMode","_onMouseUpWithHandMode","zoomChanged","_changeScrollState","_startHandModeWithSpaceBar","_endHandModeWithSpaceBar","_startTextEditingHandler","_stopTextEditingHandler","iconComp","textComp","undoObject","textObject","prevfilterOption","filterComp","maskObj","setUndoData","getColor","change","getText","textObj","undoValue","setStyle","removeAll","flipComp","loader","prevImage","prevImageWidth","prevImageHeight","objectItem","newImage","oldWidth","oldHeight","removeObjectById","rotationComp","originalState","objectId","setObjectPosition","datum","d","getter","o","toStringTag","__esModule","ns","property","p","moduleId","modules"],"mappings":"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","file":"tui-image-editor.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"fabric\")[\"fabric\"]);\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"fabric\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ImageEditor\"] = factory(require(\"fabric\")[\"fabric\"]);\n\telse\n\t\troot[\"tui\"] = root[\"tui\"] || {}, root[\"tui\"][\"ImageEditor\"] = factory(root[\"fabric\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__4__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 67);\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Constants\n */\nimport { keyMirror } from '@/util';\n\n/**\n * Help features for zoom\n * @type {Array.<string>}\n */\nexport const ZOOM_HELP_MENUS = ['zoomIn', 'zoomOut', 'hand'];\n\n/**\n * Help features for command\n * @type {Array.<string>}\n */\nexport const COMMAND_HELP_MENUS = ['history', 'undo', 'redo', 'reset'];\n\n/**\n * Help features for delete\n * @type {Array.<string>}\n */\nexport const DELETE_HELP_MENUS = ['delete', 'deleteAll'];\n\n/**\n * Editor help features\n * @type {Array.<string>}\n */\nexport const HELP_MENUS = [...ZOOM_HELP_MENUS, ...COMMAND_HELP_MENUS, ...DELETE_HELP_MENUS];\n\n/**\n * Fill type for shape\n * @type {Object.<string, string>}\n */\nexport const SHAPE_FILL_TYPE = {\n  FILTER: 'filter',\n  COLOR: 'color',\n};\n\n/**\n * Shape type list\n * @type {Array.<string>}\n */\nexport const SHAPE_TYPE = ['rect', 'circle', 'triangle'];\n\n/**\n * Object type\n * @type {Object.<string, string>}\n */\nexport const OBJ_TYPE = {\n  CROPZONE: 'cropzone',\n};\n\n/**\n * Filter type map\n * @type {Object.<string, string>}\n */\nexport const filterType = {\n  VINTAGE: 'vintage',\n  SEPIA2: 'sepia2',\n  REMOVE_COLOR: 'removeColor',\n  COLOR_FILTER: 'colorFilter',\n  REMOVE_WHITE: 'removeWhite',\n  BLEND_COLOR: 'blendColor',\n  BLEND: 'blend',\n};\n\n/**\n * Component names\n * @type {Object.<string, string>}\n */\nexport const componentNames = keyMirror(\n  'IMAGE_LOADER',\n  'CROPPER',\n  'FLIP',\n  'ROTATION',\n  'FREE_DRAWING',\n  'LINE',\n  'TEXT',\n  'ICON',\n  'FILTER',\n  'SHAPE',\n  'ZOOM'\n);\n\n/**\n * Shape default option\n * @type {Object}\n */\nexport const SHAPE_DEFAULT_OPTIONS = {\n  lockSkewingX: true,\n  lockSkewingY: true,\n  bringForward: true,\n  isRegular: false,\n};\n\n/**\n * Cropzone default option\n * @type {Object}\n */\nexport const CROPZONE_DEFAULT_OPTIONS = {\n  hasRotatingPoint: false,\n  hasBorders: false,\n  lockScalingFlip: true,\n  lockRotation: true,\n  lockSkewingX: true,\n  lockSkewingY: true,\n};\n\n/**\n * Command names\n * @type {Object.<string, string>}\n */\nexport const commandNames = {\n  CLEAR_OBJECTS: 'clearObjects',\n  LOAD_IMAGE: 'loadImage',\n  FLIP_IMAGE: 'flip',\n  ROTATE_IMAGE: 'rotate',\n  ADD_OBJECT: 'addObject',\n  REMOVE_OBJECT: 'removeObject',\n  APPLY_FILTER: 'applyFilter',\n  REMOVE_FILTER: 'removeFilter',\n  ADD_ICON: 'addIcon',\n  CHANGE_ICON_COLOR: 'changeIconColor',\n  ADD_SHAPE: 'addShape',\n  CHANGE_SHAPE: 'changeShape',\n  ADD_TEXT: 'addText',\n  CHANGE_TEXT: 'changeText',\n  CHANGE_TEXT_STYLE: 'changeTextStyle',\n  ADD_IMAGE_OBJECT: 'addImageObject',\n  RESIZE_CANVAS_DIMENSION: 'resizeCanvasDimension',\n  SET_OBJECT_PROPERTIES: 'setObjectProperties',\n  SET_OBJECT_POSITION: 'setObjectPosition',\n  CHANGE_SELECTION: 'changeSelection',\n};\n\n/**\n * Event names\n * @type {Object.<string, string>}\n */\nexport const eventNames = {\n  OBJECT_ACTIVATED: 'objectActivated',\n  OBJECT_REMOVED: 'objectRemoved',\n  OBJECT_MOVED: 'objectMoved',\n  OBJECT_SCALED: 'objectScaled',\n  OBJECT_CREATED: 'objectCreated',\n  OBJECT_ROTATED: 'objectRotated',\n  OBJECT_ADDED: 'objectAdded',\n  OBJECT_MODIFIED: 'objectModified',\n  TEXT_EDITING: 'textEditing',\n  TEXT_CHANGED: 'textChanged',\n  ICON_CREATE_RESIZE: 'iconCreateResize',\n  ICON_CREATE_END: 'iconCreateEnd',\n  ADD_TEXT: 'addText',\n  ADD_OBJECT: 'addObject',\n  ADD_OBJECT_AFTER: 'addObjectAfter',\n  MOUSE_DOWN: 'mousedown',\n  MOUSE_UP: 'mouseup',\n  MOUSE_MOVE: 'mousemove',\n  // UNDO/REDO Events\n  REDO_STACK_CHANGED: 'redoStackChanged',\n  UNDO_STACK_CHANGED: 'undoStackChanged',\n  SELECTION_CLEARED: 'selectionCleared',\n  SELECTION_CREATED: 'selectionCreated',\n  EXECUTE_COMMAND: 'executeCommand',\n  AFTER_UNDO: 'afterUndo',\n  AFTER_REDO: 'afterRedo',\n  ZOOM_CHANGED: 'zoomChanged',\n  HAND_STARTED: 'handStarted',\n  HAND_STOPPED: 'handStopped',\n  KEY_DOWN: 'keydown',\n  KEY_UP: 'keyup',\n  INPUT_BOX_EDITING_STARTED: 'inputBoxEditingStarted',\n  INPUT_BOX_EDITING_STOPPED: 'inputBoxEditingStopped',\n  FOCUS: 'focus',\n  BLUR: 'blur',\n};\n\n/**\n * Selector names\n * @type {Object.<string, string>}\n */\nexport const selectorNames = {\n  COLOR_PICKER_INPUT_BOX: '.tui-colorpicker-palette-hex',\n};\n\n/**\n * History names\n * @type {Object.<string, string>}\n */\nexport const historyNames = {\n  LOAD_IMAGE: 'Load',\n  LOAD_MASK_IMAGE: 'Mask',\n  ADD_MASK_IMAGE: 'Mask',\n  ADD_IMAGE_OBJECT: 'Mask',\n  CROP: 'Crop',\n  APPLY_FILTER: 'Filter',\n  REMOVE_FILTER: 'Filter',\n  CHANGE_SHAPE: 'Shape',\n  CHANGE_ICON_COLOR: 'Icon',\n  ADD_TEXT: 'Text',\n  CHANGE_TEXT_STYLE: 'Text',\n  REMOVE_OBJECT: 'Delete',\n  CLEAR_OBJECTS: 'Delete',\n};\n\n/**\n * Editor states\n * @type {Object.<string, string>}\n */\nexport const drawingModes = keyMirror(\n  'NORMAL',\n  'CROPPER',\n  'FREE_DRAWING',\n  'LINE_DRAWING',\n  'TEXT',\n  'SHAPE',\n  'ICON',\n  'ZOOM'\n);\n\n/**\n * Menu names with drawing mode\n * @type {Object.<string, string>}\n */\nexport const drawingMenuNames = {\n  TEXT: 'text',\n  CROP: 'crop',\n  SHAPE: 'shape',\n  ZOOM: 'zoom',\n};\n\n/**\n * Zoom modes\n * @type {Object.<string, string>}\n */\nexport const zoomModes = {\n  DEFAULT: 'normal',\n  ZOOM: 'zoom',\n  HAND: 'hand',\n};\n\n/**\n * Shortcut key values\n * @type {Object.<string, number>}\n */\nexport const keyCodes = {\n  Z: 90,\n  Y: 89,\n  C: 67,\n  V: 86,\n  SHIFT: 16,\n  BACKSPACE: 8,\n  DEL: 46,\n  ARROW_DOWN: 40,\n  ARROW_UP: 38,\n  SPACE: 32,\n};\n\n/**\n * Fabric object options\n * @type {Object.<string, Object>}\n */\nexport const fObjectOptions = {\n  SELECTION_STYLE: {\n    borderColor: 'red',\n    cornerColor: 'green',\n    cornerSize: 10,\n    originX: 'center',\n    originY: 'center',\n    transparentCorners: false,\n  },\n};\n\n/**\n * Promise reject messages\n * @type {Object.<string, string>}\n */\nexport const rejectMessages = {\n  addedObject: 'The object is already added.',\n  flip: 'The flipX and flipY setting values are not changed.',\n  invalidDrawingMode: 'This operation is not supported in the drawing mode.',\n  invalidParameters: 'Invalid parameters.',\n  isLock: 'The executing command state is locked.',\n  loadImage: 'The background image is empty.',\n  loadingImageFailed: 'Invalid image loaded.',\n  noActiveObject: 'There is no active object.',\n  noObject: 'The object is not in canvas.',\n  redo: 'The promise of redo command is reject.',\n  rotation: 'The current angle is same the old angle.',\n  undo: 'The promise of undo command is reject.',\n  unsupportedOperation: 'Unsupported operation.',\n  unsupportedType: 'Unsupported object type.',\n};\n\n/**\n * Default icon menu svg path\n * @type {Object.<string, string>}\n */\nexport const defaultIconPath = {\n  'icon-arrow': 'M40 12V0l24 24-24 24V36H0V12h40z',\n  'icon-arrow-2': 'M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ',\n  'icon-arrow-3':\n    'M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ',\n  'icon-star':\n    'M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ',\n  'icon-star-2':\n    'M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ',\n  'icon-polygon': 'M3,31 L19,3 h32 l16,28 l-16,28 H19  z ',\n  'icon-location':\n    'M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z',\n  'icon-heart':\n    'M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ',\n  'icon-bubble':\n    'M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z',\n};\n\nexport const defaultRotateRangeValues = {\n  realTimeEvent: true,\n  min: -360,\n  max: 360,\n  value: 0,\n};\n\nexport const defaultDrawRangeValues = {\n  min: 5,\n  max: 30,\n  value: 12,\n};\n\nexport const defaultShapeStrokeValues = {\n  realTimeEvent: true,\n  min: 2,\n  max: 300,\n  value: 3,\n};\n\nexport const defaultTextRangeValues = {\n  realTimeEvent: true,\n  min: 10,\n  max: 100,\n  value: 50,\n};\n\nexport const defaultFilterRangeValues = {\n  tintOpacityRange: {\n    realTimeEvent: true,\n    min: 0,\n    max: 1,\n    value: 0.7,\n    useDecimal: true,\n  },\n  removewhiteDistanceRange: {\n    realTimeEvent: true,\n    min: 0,\n    max: 1,\n    value: 0.2,\n    useDecimal: true,\n  },\n  brightnessRange: {\n    realTimeEvent: true,\n    min: -1,\n    max: 1,\n    value: 0,\n    useDecimal: true,\n  },\n  noiseRange: {\n    realTimeEvent: true,\n    min: 0,\n    max: 1000,\n    value: 100,\n  },\n  pixelateRange: {\n    realTimeEvent: true,\n    min: 2,\n    max: 20,\n    value: 4,\n  },\n  colorfilterThresholdRange: {\n    realTimeEvent: true,\n    min: 0,\n    max: 1,\n    value: 0.2,\n    useDecimal: true,\n  },\n  blurFilterRange: {\n    value: 0.1,\n  },\n};\n\nexport const defaultPixelTargetTolerance = 10;\n\nexport const emptyCropRectValues = {\n  LEFT: 0,\n  TOP: 0,\n  WIDTH: 0.5,\n  HEIGHT: 0.5,\n};\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Util\n */\nimport { forEach, extend, isString, pick, inArray } from './codeSnippet';\nimport Promise from 'core-js-pure/features/promise';\nimport {\n  commandNames,\n  filterType,\n  historyNames,\n  SHAPE_FILL_TYPE,\n  SHAPE_TYPE,\n  emptyCropRectValues,\n} from '@/consts';\n\nconst FLOATING_POINT_DIGIT = 2;\nconst CSS_PREFIX = 'tui-image-editor-';\nconst { min, max } = Math;\n\n/**\n * Export Promise Class (for simplified module path)\n * @returns {Promise} promise class\n */\nexport { Promise };\n\n/**\n * Clamp value\n * @param {number} value - Value\n * @param {number} minValue - Minimum value\n * @param {number} maxValue - Maximum value\n * @returns {number} clamped value\n */\nexport function clamp(value, minValue, maxValue) {\n  if (minValue > maxValue) {\n    [minValue, maxValue] = [maxValue, minValue];\n  }\n\n  return max(minValue, min(value, maxValue));\n}\n\n/**\n * Make key-value object from arguments\n * @returns {object.<string, string>}\n */\nexport function keyMirror(...args) {\n  const obj = {};\n\n  forEach(args, (key) => {\n    obj[key] = key;\n  });\n\n  return obj;\n}\n\n/**\n * Make CSSText\n * @param {Object} styleObj - Style info object\n * @returns {string} Connected string of style\n */\nexport function makeStyleText(styleObj) {\n  let styleStr = '';\n\n  forEach(styleObj, (value, prop) => {\n    styleStr += `${prop}: ${value};`;\n  });\n\n  return styleStr;\n}\n\n/**\n * Get object's properties\n * @param {Object} obj - object\n * @param {Array} keys - keys\n * @returns {Object} properties object\n */\nexport function getProperties(obj, keys) {\n  const props = {};\n  const { length } = keys;\n  let i = 0;\n  let key;\n\n  for (i = 0; i < length; i += 1) {\n    key = keys[i];\n    props[key] = obj[key];\n  }\n\n  return props;\n}\n\n/**\n * ParseInt simpliment\n * @param {number} value - Value\n * @returns {number}\n */\nexport function toInteger(value) {\n  return parseInt(value, 10);\n}\n\n/**\n * String to camelcase string\n * @param {string} targetString - change target\n * @returns {string}\n * @private\n */\nexport function toCamelCase(targetString) {\n  return targetString.replace(/-([a-z])/g, ($0, $1) => $1.toUpperCase());\n}\n\n/**\n * Check browser file api support\n * @returns {boolean}\n * @private\n */\nexport function isSupportFileApi() {\n  return !!(window.File && window.FileList && window.FileReader);\n}\n\n/**\n * hex to rgb\n * @param {string} color - hex color\n * @param {string} alpha - color alpha value\n * @returns {string} rgb expression\n */\nexport function getRgb(color, alpha) {\n  if (color.length === 4) {\n    color = `${color}${color.slice(1, 4)}`;\n  }\n  const r = parseInt(color.slice(1, 3), 16);\n  const g = parseInt(color.slice(3, 5), 16);\n  const b = parseInt(color.slice(5, 7), 16);\n  const a = alpha || 1;\n\n  return `rgba(${r}, ${g}, ${b}, ${a})`;\n}\n\n/**\n * send hostname\n */\nexport function sendHostName() {}\n\n/**\n * Apply css resource\n * @param {string} styleBuffer - serialized css text\n * @param {string} tagId - style tag id\n */\nexport function styleLoad(styleBuffer, tagId) {\n  const [head] = document.getElementsByTagName('head');\n  const linkElement = document.createElement('link');\n  const styleData = encodeURIComponent(styleBuffer);\n  if (tagId) {\n    linkElement.id = tagId;\n    // linkElement.id = 'tui-image-editor-theme-style';\n  }\n  linkElement.setAttribute('rel', 'stylesheet');\n  linkElement.setAttribute('type', 'text/css');\n  linkElement.setAttribute('href', `data:text/css;charset=UTF-8,${styleData}`);\n  head.appendChild(linkElement);\n}\n\n/**\n * Get selector\n * @param {HTMLElement} targetElement - target element\n * @returns {Function} selector\n */\nexport function getSelector(targetElement) {\n  return (str) => targetElement.querySelector(str);\n}\n\n/**\n * Change base64 to blob\n * @param {String} data - base64 string data\n * @returns {Blob} Blob Data\n */\nexport function base64ToBlob(data) {\n  const rImageType = /data:(image\\/.+);base64,/;\n  let mimeString = '';\n  let raw, uInt8Array, i;\n\n  raw = data.replace(rImageType, (header, imageType) => {\n    mimeString = imageType;\n\n    return '';\n  });\n\n  raw = atob(raw);\n  const rawLength = raw.length;\n  uInt8Array = new Uint8Array(rawLength); // eslint-disable-line\n\n  for (i = 0; i < rawLength; i += 1) {\n    uInt8Array[i] = raw.charCodeAt(i);\n  }\n\n  return new Blob([uInt8Array], { type: mimeString });\n}\n\n/**\n * Fix floating point diff.\n * @param {number} value - original value\n * @returns {number} fixed value\n */\nexport function fixFloatingPoint(value) {\n  return Number(value.toFixed(FLOATING_POINT_DIGIT));\n}\n\n/**\n * Assignment for destroying objects.\n * @param {Object} targetObject - object to be removed.\n */\nexport function assignmentForDestroy(targetObject) {\n  forEach(targetObject, (value, key) => {\n    targetObject[key] = null;\n  });\n}\n\n/**\n * Make class name for ui\n * @param {String} str  - main string of className\n * @param {String} prefix - prefix string of className\n * @returns {String} class name\n */\nexport function cls(str = '', prefix = '') {\n  if (str.charAt(0) === '.') {\n    return `.${CSS_PREFIX}${prefix}${str.slice(1)}`;\n  }\n\n  return `${CSS_PREFIX}${prefix}${str}`;\n}\n\n/**\n * Change object origin\n * @param {fabric.Object} fObject - fabric object\n * @param {Object} origin - origin of fabric object\n *   @param {string} originX - horizontal basis.\n *   @param {string} originY - vertical basis.\n */\nexport function changeOrigin(fObject, origin) {\n  const { originX, originY } = origin;\n  const { x: left, y: top } = fObject.getPointByOrigin(originX, originY);\n\n  fObject.set({\n    left,\n    top,\n    originX,\n    originY,\n  });\n\n  fObject.setCoords();\n}\n\n/**\n * Object key value flip\n * @param {Object} targetObject - The data object of the key value.\n * @returns {Object}\n */\nexport function flipObject(targetObject) {\n  const result = {};\n\n  Object.keys(targetObject).forEach((key) => {\n    result[targetObject[key]] = key;\n  });\n\n  return result;\n}\n\n/**\n * Set custom properties\n * @param {Object} targetObject - target object\n * @param {Object} props - custom props object\n */\nexport function setCustomProperty(targetObject, props) {\n  targetObject.customProps = targetObject.customProps || {};\n  extend(targetObject.customProps, props);\n}\n\n/**\n * Get custom property\n * @param {fabric.Object} fObject - fabric object\n * @param {Array|string} propNames - prop name array\n * @returns {object | number | string}\n */\nexport function getCustomProperty(fObject, propNames) {\n  const resultObject = {};\n  if (isString(propNames)) {\n    propNames = [propNames];\n  }\n  forEach(propNames, (propName) => {\n    resultObject[propName] = fObject.customProps[propName];\n  });\n\n  return resultObject;\n}\n\n/**\n * Capitalize string\n * @param {string} targetString - target string\n * @returns {string}\n */\nexport function capitalizeString(targetString) {\n  return targetString.charAt(0).toUpperCase() + targetString.slice(1);\n}\n\n/**\n * Array includes check\n * @param {Array} targetArray - target array\n * @param {string|number} compareValue - compare value\n * @returns {boolean}\n */\nexport function includes(targetArray, compareValue) {\n  return targetArray.indexOf(compareValue) >= 0;\n}\n\n/**\n * Get fill type\n * @param {Object | string} fillOption - shape fill option\n * @returns {string} 'color' or 'filter'\n */\nexport function getFillTypeFromOption(fillOption = {}) {\n  return pick(fillOption, 'type') || SHAPE_FILL_TYPE.COLOR;\n}\n\n/**\n * Get fill type of shape type object\n * @param {fabric.Object} shapeObj - fabric object\n * @returns {string} 'transparent' or 'color' or 'filter'\n */\nexport function getFillTypeFromObject(shapeObj) {\n  const { fill = {} } = shapeObj;\n  if (fill.source) {\n    return SHAPE_FILL_TYPE.FILTER;\n  }\n\n  return SHAPE_FILL_TYPE.COLOR;\n}\n\n/**\n * Check if the object is a shape object.\n * @param {fabric.Object} obj - fabric object\n * @returns {boolean}\n */\nexport function isShape(obj) {\n  return inArray(obj.get('type'), SHAPE_TYPE) >= 0;\n}\n\n/**\n * Get object type\n * @param {string} type - fabric object type\n * @returns {string} type of object (ex: shape, icon, ...)\n */\nexport function getObjectType(type) {\n  if (includes(SHAPE_TYPE, type)) {\n    return 'Shape';\n  }\n\n  switch (type) {\n    case 'i-text':\n      return 'Text';\n    case 'path':\n    case 'line':\n      return 'Draw';\n    case 'activeSelection':\n      return 'Group';\n    default:\n      return toStartOfCapital(type);\n  }\n}\n\n/**\n * Get filter type\n * @param {string} type - fabric filter type\n * @param {object} [options] - filter type options\n *   @param {boolean} [options.useAlpha=true] - usage of alpha(true is 'color filter', false is 'remove white')\n *   @param {string} [options.mode] - mode of blendColor\n * @returns {string} type of filter (ex: sepia, blur, ...)\n */\nfunction getFilterType(type, { useAlpha = true, mode } = {}) {\n  const {\n    VINTAGE,\n    REMOVE_COLOR,\n    BLEND_COLOR,\n    SEPIA2,\n    COLOR_FILTER,\n    REMOVE_WHITE,\n    BLEND,\n  } = filterType;\n\n  let filterName;\n\n  switch (type) {\n    case VINTAGE:\n      filterName = SEPIA2;\n      break;\n    case REMOVE_COLOR:\n      filterName = useAlpha ? COLOR_FILTER : REMOVE_WHITE;\n      break;\n    case BLEND_COLOR:\n      filterName = mode === 'add' ? BLEND : mode;\n      break;\n    default:\n      filterName = type;\n  }\n\n  return toStartOfCapital(filterName);\n}\n\n/**\n * Check if command is silent command\n * @param {Command|string} command - command or command name\n * @returns {boolean}\n */\nexport function isSilentCommand(command) {\n  const { LOAD_IMAGE } = commandNames;\n\n  return typeof command === 'string' ? LOAD_IMAGE === command : LOAD_IMAGE === command.name;\n}\n\n/**\n * Get command name\n * @param {Command|string} command - command or command name\n * @returns {{name: string, ?detail: string}}\n */\n// eslint-disable-next-line complexity, require-jsdoc\nexport function getHistoryTitle(command) {\n  const {\n    FLIP_IMAGE,\n    ROTATE_IMAGE,\n    ADD_TEXT,\n    APPLY_FILTER,\n    REMOVE_FILTER,\n    CHANGE_SHAPE,\n    CHANGE_ICON_COLOR,\n    CHANGE_TEXT_STYLE,\n    CLEAR_OBJECTS,\n    ADD_IMAGE_OBJECT,\n    REMOVE_OBJECT,\n  } = commandNames;\n  const { name, args } = command;\n  let historyInfo;\n\n  switch (name) {\n    case FLIP_IMAGE:\n      historyInfo = { name, detail: args[1] === 'reset' ? args[1] : args[1].slice(4) };\n      break;\n    case ROTATE_IMAGE:\n      historyInfo = { name, detail: args[2] };\n      break;\n    case APPLY_FILTER:\n      historyInfo = { name: historyNames.APPLY_FILTER, detail: getFilterType(args[1], args[2]) };\n      break;\n    case REMOVE_FILTER:\n      historyInfo = { name: historyNames.REMOVE_FILTER, detail: 'Remove' };\n      break;\n    case CHANGE_SHAPE:\n      historyInfo = { name: historyNames.CHANGE_SHAPE, detail: 'Change' };\n      break;\n    case CHANGE_ICON_COLOR:\n      historyInfo = { name: historyNames.CHANGE_ICON_COLOR, detail: 'Change' };\n      break;\n    case CHANGE_TEXT_STYLE:\n      historyInfo = { name: historyNames.CHANGE_TEXT_STYLE, detail: 'Change' };\n      break;\n    case REMOVE_OBJECT:\n      historyInfo = { name: historyNames.REMOVE_OBJECT, detail: args[2] };\n      break;\n    case CLEAR_OBJECTS:\n      historyInfo = { name: historyNames.CLEAR_OBJECTS, detail: 'All' };\n      break;\n    case ADD_IMAGE_OBJECT:\n      historyInfo = { name: historyNames.ADD_IMAGE_OBJECT, detail: 'Add' };\n      break;\n    case ADD_TEXT:\n      historyInfo = { name: historyNames.ADD_TEXT };\n      break;\n\n    default:\n      historyInfo = { name };\n      break;\n  }\n\n  if (args[1] === 'mask') {\n    historyInfo = { name: historyNames.LOAD_MASK_IMAGE, detail: 'Apply' };\n  }\n\n  return historyInfo;\n}\n\n/**\n * Get help menubar position(opposite of menubar)\n * @param {string} position - position of menubar\n * @returns {string} position of help menubar\n */\nexport function getHelpMenuBarPosition(position) {\n  if (position === 'top') {\n    return 'bottom';\n  }\n  if (position === 'left') {\n    return 'right';\n  }\n  if (position === 'right') {\n    return 'left';\n  }\n\n  return 'top';\n}\n\n/**\n * Change to capital start letter\n * @param {string} str - string to change\n * @returns {string}\n */\nfunction toStartOfCapital(str) {\n  return str.replace(/[a-z]/, (first) => first.toUpperCase());\n}\n\n/**\n * Check if cropRect is Empty.\n * @param {Object} cropRect - cropRect object\n *  @param {Number} cropRect.left - cropRect left position value\n *  @param {Number} cropRect.top - cropRect top position value\n *  @param {Number} cropRect.width - cropRect width value\n *  @param {Number} cropRect.height - cropRect height value\n * @returns {boolean}\n */\nexport function isEmptyCropzone(cropRect) {\n  const { left, top, width, height } = cropRect;\n  const { LEFT, TOP, WIDTH, HEIGHT } = emptyCropRectValues;\n\n  return left === LEFT && top === TOP && width === WIDTH && height === HEIGHT;\n}\n","/* eslint-disable */\n/*!\n * @file This file contains functions from tui.code-snippet@1.5.2 that are required by our custom\n * build of this package.\n * @author NHN. FE Development Lab <dl_javascript@nhn.com>\n * @license MIT\n */\n\n/**\n * The last id of stamp\n * @type {number}\n * @private\n */\nvar lastId = 0;\n\n/**\n * Extend the target object from other objects.\n * @param {object} target - Object that will be extended\n * @param {...object} objects - Objects as sources\n * @returns {object} Extended object\n * @memberof tui.util\n */\nfunction extend(target, objects) { // eslint-disable-line no-unused-vars\n  var hasOwnProp = Object.prototype.hasOwnProperty;\n  var source, prop, i, len;\n\n  for (i = 1, len = arguments.length; i < len; i += 1) {\n    source = arguments[i];\n    for (prop in source) {\n      if (hasOwnProp.call(source, prop)) {\n        target[prop] = source[prop];\n      }\n    }\n  }\n\n  return target;\n}\n\n/**\n * Create a new array or plain object with all elements(or properties)\n * that pass the test implemented by the provided function.<br>\n * Callback function(iteratee) is invoked with three arguments:\n *  - The value of the property(or The value of the element)\n *  - The name of the property(or The index of the element)\n *  - The object being traversed\n * @param {Object} obj Object(plain object or Array) that will be traversed\n * @param {function} iteratee Callback function\n * @param {Object} [context] Context(this) of callback function\n * @returns {Object} plain object or Array\n * @memberof tui.util\n * @example\n * //-- #1. Get Module --//\n * var util = require('tui-code-snippet'); // node, commonjs\n * var util = tui.util; // distribution file\n *\n * //-- #2. Use property --//\n * var result1 = util.filter([0,1,2,3], function(value) {\n *     return (value % 2 === 0);\n * });\n * alert(result1); // [0, 2]\n *\n * var result2 = util.filter({a : 1, b: 2, c: 3}, function(value) {\n *     return (value % 2 !== 0);\n * });\n * alert(result2.a); // 1\n * alert(result2.b); // undefined\n * alert(result2.c); // 3\n */\nfunction filter(obj, iteratee, context) {\n  var result, add;\n\n  context = context || null;\n\n  if (!isObject(obj) || !isFunction(iteratee)) {\n    throw new Error('wrong parameter');\n  }\n\n  if (isArray(obj)) {\n    result = [];\n    add = function(subResult, args) {\n      subResult.push(args[0]);\n    };\n  } else {\n    result = {};\n    add = function(subResult, args) {\n      subResult[args[1]] = args[0];\n    };\n  }\n\n  forEach(obj, function() {\n    if (iteratee.apply(context, arguments)) {\n      add(result, arguments);\n    }\n  }, context);\n\n  return result;\n}\n\n/**\n * Execute the provided callback once for each property of object(or element of array) which actually exist.<br>\n * If the object is Array-like object(ex-arguments object), It needs to transform to Array.(see 'ex2' of example).<br>\n * If the callback function returns false, the loop will be stopped.<br>\n * Callback function(iteratee) is invoked with three arguments:\n *  - The value of the property(or The value of the element)\n *  - The name of the property(or The index of the element)\n *  - The object being traversed\n * @param {Object} obj The object that will be traversed\n * @param {function} iteratee Callback function\n * @param {Object} [context] Context(this) of callback function\n * @memberof tui.util\n * @example\n * //-- #1. Get Module --//\n * var util = require('tui-code-snippet'); // node, commonjs\n * var util = tui.util; // distribution file\n *\n * //-- #2. Use property --//\n * var sum = 0;\n *\n * util.forEach([1,2,3], function(value){\n *     sum += value;\n * });\n * alert(sum); // 6\n *\n * // In case of Array-like object\n * var array = Array.prototype.slice.call(arrayLike); // change to array\n * util.forEach(array, function(value){\n *     sum += value;\n * });\n */\nfunction forEach(obj, iteratee, context) {\n  if (isArray(obj)) {\n    forEachArray(obj, iteratee, context);\n  } else {\n    forEachOwnProperties(obj, iteratee, context);\n  }\n}\n\n/**\n * Execute the provided callback once for each element present\n * in the array(or Array-like object) in ascending order.<br>\n * If the callback function returns false, the loop will be stopped.<br>\n * Callback function(iteratee) is invoked with three arguments:\n *  - The value of the element\n *  - The index of the element\n *  - The array(or Array-like object) being traversed\n * @param {Array} arr The array(or Array-like object) that will be traversed\n * @param {function} iteratee Callback function\n * @param {Object} [context] Context(this) of callback function\n * @memberof tui.util\n * @example\n * //-- #1. Get Module --//\n * var util = require('tui-code-snippet'); // node, commonjs\n * var util = tui.util; // distribution file\n *\n * //-- #2. Use property --//\n * var sum = 0;\n *\n * util.forEachArray([1,2,3], function(value){\n *     sum += value;\n * });\n * alert(sum); // 6\n */\nfunction forEachArray(arr, iteratee, context) {\n  var index = 0;\n  var len = arr.length;\n\n  context = context || null;\n\n  for (; index < len; index += 1) {\n    if (iteratee.call(context, arr[index], index, arr) === false) {\n      break;\n    }\n  }\n}\n\n/**\n * Execute the provided callback once for each property of object which actually exist.<br>\n * If the callback function returns false, the loop will be stopped.<br>\n * Callback function(iteratee) is invoked with three arguments:\n *  - The value of the property\n *  - The name of the property\n *  - The object being traversed\n * @param {Object} obj The object that will be traversed\n * @param {function} iteratee  Callback function\n * @param {Object} [context] Context(this) of callback function\n * @memberof tui.util\n * @example\n * //-- #1. Get Module --//\n * var util = require('tui-code-snippet'); // node, commonjs\n * var util = tui.util; // distribution file\n *\n * //-- #2. Use property --//\n * var sum = 0;\n *\n * util.forEachOwnProperties({a:1,b:2,c:3}, function(value){\n *     sum += value;\n * });\n * alert(sum); // 6\n **/\nfunction forEachOwnProperties(obj, iteratee, context) {\n  var key;\n\n  context = context || null;\n\n  for (key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      if (iteratee.call(context, obj[key], key, obj) === false) {\n        break;\n      }\n    }\n  }\n}\n\n/**\n * Returns the first index at which a given element can be found in the array\n * from start index(default 0), or -1 if it is not present.<br>\n * It compares searchElement to elements of the Array using strict equality\n * (the same method used by the ===, or triple-equals, operator).\n * @param {*} searchElement Element to locate in the array\n * @param {Array} array Array that will be traversed.\n * @param {number} startIndex Start index in array for searching (default 0)\n * @returns {number} the First index at which a given element, or -1 if it is not present\n * @memberof tui.util\n * @example\n * //-- #1. Get Module --//\n * var util = require('tui-code-snippet'); // node, commonjs\n * var util = tui.util; // distribution file\n *\n * //-- #2. Use property --//\n * var arr = ['one', 'two', 'three', 'four'];\n * var idx1 = util.inArray('one', arr, 3); // -1\n * var idx2 = util.inArray('one', arr); // 0\n */\nvar inArray = function(searchElement, array, startIndex) {\n  var i;\n  var length;\n  startIndex = startIndex || 0;\n\n  if (!isArray(array)) {\n    return -1;\n  }\n\n  if (Array.prototype.indexOf) {\n    return Array.prototype.indexOf.call(array, searchElement, startIndex);\n  }\n\n  length = array.length;\n  for (i = startIndex; startIndex >= 0 && i < length; i += 1) {\n    if (array[i] === searchElement) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\n/**\n * Check whether the given variable is an instance of Array or not.<br>\n *  If the given variable is an instance of Array, return true.\n * @param {*} obj - Target for checking\n * @returns {boolean} Is array instance?\n * @memberof tui.util\n */\nfunction isArray(obj) {\n  return obj instanceof Array;\n}\n\n/**\n * Check whether the given variable is existing or not.<br>\n *  If the given variable is not null and not undefined, returns true.\n * @param {*} param - Target for checking\n * @returns {boolean} Is existy?\n * @memberof tui.util\n * @example\n * //-- #1. Get Module --//\n * var util = require('tui-code-snippet'); // node, commonjs\n * var util = tui.util; // distribution file\n *\n * //-- #2. Use property --//\n * util.isExisty(''); //true\n * util.isExisty(0); //true\n * util.isExisty([]); //true\n * util.isExisty({}); //true\n * util.isExisty(null); //false\n * util.isExisty(undefined); //false\n */\nfunction isExisty(param) {\n  return !isUndefined(param) && !isNull(param);\n}\n\n/**\n * Check whether the given variable is a function or not.<br>\n *  If the given variable is a function, return true.\n * @param {*} obj - Target for checking\n * @returns {boolean} Is function?\n * @memberof tui.util\n */\nfunction isFunction(obj) {\n  return obj instanceof Function;\n}\n\n/**\n * Check whether the given variable is null or not.<br>\n *  If the given variable(arguments[0]) is null, returns true.\n * @param {*} obj - Target for checking\n * @returns {boolean} Is null?\n * @memberof tui.util\n */\nfunction isNull(obj) {\n  return obj === null;\n}\n\n/**\n * Check whether the given variable is an object or not.<br>\n *  If the given variable is an object, return true.\n * @param {*} obj - Target for checking\n * @returns {boolean} Is object?\n * @memberof tui.util\n */\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Check whether the given variable is a string or not.<br>\n *  If the given variable is a string, return true.\n * @param {*} obj - Target for checking\n * @returns {boolean} Is string?\n * @memberof tui.util\n */\nfunction isString(obj) {\n  return typeof obj === 'string' || obj instanceof String;\n}\n\n/**\n * Check whether the given variable is undefined or not.<br>\n *  If the given variable is undefined, returns true.\n * @param {*} obj - Target for checking\n * @returns {boolean} Is undefined?\n * @memberof tui.util\n */\nfunction isUndefined(obj) {\n  return obj === undefined; // eslint-disable-line no-undefined\n}\n\n/**\n * Execute the provided callback function once for each element in an array, in order,\n * and constructs a new array from the results.<br>\n * If the object is Array-like object(ex-arguments object),\n * It needs to transform to Array.(see 'ex2' of forEach example)<br>\n * Callback function(iteratee) is invoked with three arguments:\n *  - The value of the property(or The value of the element)\n *  - The name of the property(or The index of the element)\n *  - The object being traversed\n * @param {Object} obj The object that will be traversed\n * @param {function} iteratee Callback function\n * @param {Object} [context] Context(this) of callback function\n * @returns {Array} A new array composed of returned values from callback function\n * @memberof tui.util\n * @example\n * //-- #1. Get Module --//\n * var util = require('tui-code-snippet'); // node, commonjs\n * var util = tui.util; // distribution file\n *\n * //-- #2. Use property --//\n * var result = util.map([0,1,2,3], function(value) {\n *     return value + 1;\n * });\n *\n * alert(result);  // 1,2,3,4\n */\nfunction map(obj, iteratee, context) {\n  var resultArray = [];\n\n  context = context || null;\n\n  forEach(obj, function() {\n    resultArray.push(iteratee.apply(context, arguments));\n  });\n\n  return resultArray;\n}\n\n/**\n * Retrieve a nested item from the given object/array\n * @param {object|Array} obj - Object for retrieving\n * @param {...string|number} paths - Paths of property\n * @returns {*} Value\n * @memberof tui.util\n * @example\n * //-- #1. Get Module --//\n * var util = require('tui-code-snippet'); // node, commonjs\n * var util = tui.util; // distribution file\n *\n * //-- #2. Use property --//\n * var obj = {\n *     'key1': 1,\n *     'nested' : {\n *         'key1': 11,\n *         'nested': {\n *             'key1': 21\n *         }\n *     }\n * };\n * util.pick(obj, 'nested', 'nested', 'key1'); // 21\n * util.pick(obj, 'nested', 'nested', 'key2'); // undefined\n *\n * var arr = ['a', 'b', 'c'];\n * util.pick(arr, 1); // 'b'\n */\nfunction pick(obj, paths) { // eslint-disable-line no-unused-vars\n  var args = arguments;\n  var target = args[0];\n  var i = 1;\n  var length = args.length;\n\n  for (; i < length; i += 1) {\n    if (isUndefined(target) ||\n      isNull(target)) {\n      return;\n    }\n\n    target = target[args[i]];\n  }\n\n  return target; // eslint-disable-line consistent-return\n}\n\n/**\n * Assign a unique id to an object\n * @param {object} obj - Object that will be assigned id.\n * @returns {number} Stamped id\n * @memberof tui.util\n */\nfunction stamp(obj) {\n  if (!obj.__fe_id) {\n    lastId += 1;\n    obj.__fe_id = lastId; // eslint-disable-line camelcase\n  }\n\n  return obj.__fe_id;\n}\n\nmodule.exports = {\n  extend,\n  filter,\n  forEach,\n  forEachArray,\n  forEachOwnProperties,\n  inArray,\n  isArray,\n  isExisty,\n  isFunction,\n  isObject,\n  isString,\n  isUndefined,\n  map,\n  pick,\n  stamp,\n};\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Command factory\n */\nimport Command from '@/interface/command';\n\nconst commands = {};\n\n/**\n * Create a command\n * @param {string} name - Command name\n * @param {...*} args - Arguments for creating command\n * @returns {Command}\n * @ignore\n */\nfunction create(name, ...args) {\n  const actions = commands[name];\n  if (actions) {\n    return new Command(actions, args);\n  }\n\n  return null;\n}\n\n/**\n * Register a command with name as a key\n * @param {Object} command - {name:{string}, execute: {function}, undo: {function}}\n * @param {string} command.name - command name\n * @param {function} command.execute - executable function\n * @param {function} command.undo - undo function\n * @ignore\n */\nfunction register(command) {\n  commands[command.name] = command;\n}\n\nexport default {\n  create,\n  register,\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  Function('return this')();\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Component interface\n */\n\n/**\n * Component interface\n * @class\n * @param {string} name - component name\n * @param {Graphics} graphics - Graphics instance\n * @ignore\n */\nclass Component {\n  constructor(name, graphics) {\n    /**\n     * Component name\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * Graphics instance\n     * @type {Graphics}\n     */\n    this.graphics = graphics;\n  }\n\n  /**\n   * Fire Graphics event\n   * @returns {Object} return value\n   */\n  fire(...args) {\n    const context = this.graphics;\n\n    return this.graphics.fire.apply(context, args);\n  }\n\n  /**\n   * Save image(background) of canvas\n   * @param {string} name - Name of image\n   * @param {fabric.Image} oImage - Fabric image instance\n   */\n  setCanvasImage(name, oImage) {\n    this.graphics.setCanvasImage(name, oImage);\n  }\n\n  /**\n   * Returns canvas element of fabric.Canvas[[lower-canvas]]\n   * @returns {HTMLCanvasElement}\n   */\n  getCanvasElement() {\n    return this.graphics.getCanvasElement();\n  }\n\n  /**\n   * Get fabric.Canvas instance\n   * @returns {fabric.Canvas}\n   */\n  getCanvas() {\n    return this.graphics.getCanvas();\n  }\n\n  /**\n   * Get canvasImage (fabric.Image instance)\n   * @returns {fabric.Image}\n   */\n  getCanvasImage() {\n    return this.graphics.getCanvasImage();\n  }\n\n  /**\n   * Get image name\n   * @returns {string}\n   */\n  getImageName() {\n    return this.graphics.getImageName();\n  }\n\n  /**\n   * Get image editor\n   * @returns {ImageEditor}\n   */\n  getEditor() {\n    return this.graphics.getEditor();\n  }\n\n  /**\n   * Return component name\n   * @returns {string}\n   */\n  getName() {\n    return this.name;\n  }\n\n  /**\n   * Set image properties\n   * @param {Object} setting - Image properties\n   * @param {boolean} [withRendering] - If true, The changed image will be reflected in the canvas\n   */\n  setImageProperties(setting, withRendering) {\n    this.graphics.setImageProperties(setting, withRendering);\n  }\n\n  /**\n   * Set canvas dimension - css only\n   * @param {Object} dimension - Canvas css dimension\n   */\n  setCanvasCssDimension(dimension) {\n    this.graphics.setCanvasCssDimension(dimension);\n  }\n\n  /**\n   * Set canvas dimension - css only\n   * @param {Object} dimension - Canvas backstore dimension\n   */\n  setCanvasBackstoreDimension(dimension) {\n    this.graphics.setCanvasBackstoreDimension(dimension);\n  }\n\n  /**\n   * Adjust canvas dimension with scaling image\n   */\n  adjustCanvasDimension() {\n    this.graphics.adjustCanvasDimension();\n  }\n\n  /**\n   * Adjust canvas dimension with scaling image for the rotation command\n   */\n  adjustCanvasDimensionForRotate() {\n    this.graphics.adjustCanvasDimensionForRotate();\n  }\n}\n\nexport default Component;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","'use strict';\nvar global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar isForced = require('../internals/is-forced');\nvar path = require('../internals/path');\nvar bind = require('../internals/function-bind-context');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\n\nvar wrapConstructor = function (NativeConstructor) {\n  var Wrapper = function (a, b, c) {\n    if (this instanceof NativeConstructor) {\n      switch (arguments.length) {\n        case 0: return new NativeConstructor();\n        case 1: return new NativeConstructor(a);\n        case 2: return new NativeConstructor(a, b);\n      } return new NativeConstructor(a, b, c);\n    } return NativeConstructor.apply(this, arguments);\n  };\n  Wrapper.prototype = NativeConstructor.prototype;\n  return Wrapper;\n};\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var PROTO = options.proto;\n\n  var nativeSource = GLOBAL ? global : STATIC ? global[TARGET] : (global[TARGET] || {}).prototype;\n\n  var target = GLOBAL ? path : path[TARGET] || (path[TARGET] = {});\n  var targetPrototype = target.prototype;\n\n  var FORCED, USE_NATIVE, VIRTUAL_PROTOTYPE;\n  var key, sourceProperty, targetProperty, nativeProperty, resultProperty, descriptor;\n\n  for (key in source) {\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contains in native\n    USE_NATIVE = !FORCED && nativeSource && has(nativeSource, key);\n\n    targetProperty = target[key];\n\n    if (USE_NATIVE) if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(nativeSource, key);\n      nativeProperty = descriptor && descriptor.value;\n    } else nativeProperty = nativeSource[key];\n\n    // export native or implementation\n    sourceProperty = (USE_NATIVE && nativeProperty) ? nativeProperty : source[key];\n\n    if (USE_NATIVE && typeof targetProperty === typeof sourceProperty) continue;\n\n    // bind timers to global for call from export context\n    if (options.bind && USE_NATIVE) resultProperty = bind(sourceProperty, global);\n    // wrap global constructors for prevent changs in this version\n    else if (options.wrap && USE_NATIVE) resultProperty = wrapConstructor(sourceProperty);\n    // make static versions for prototype methods\n    else if (PROTO && typeof sourceProperty == 'function') resultProperty = bind(Function.call, sourceProperty);\n    // default case\n    else resultProperty = sourceProperty;\n\n    // add a flag to not completely full polyfills\n    if (options.sham || (sourceProperty && sourceProperty.sham) || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(resultProperty, 'sham', true);\n    }\n\n    target[key] = resultProperty;\n\n    if (PROTO) {\n      VIRTUAL_PROTOTYPE = TARGET + 'Prototype';\n      if (!has(path, VIRTUAL_PROTOTYPE)) {\n        createNonEnumerableProperty(path, VIRTUAL_PROTOTYPE, {});\n      }\n      // export virtual prototype methods\n      path[VIRTUAL_PROTOTYPE][key] = sourceProperty;\n      // export real prototype methods\n      if (options.real && targetPrototype && !targetPrototype[key]) {\n        createNonEnumerableProperty(targetPrototype, key, sourceProperty);\n      }\n    }\n  }\n};\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview DrawingMode interface\n */\nimport errorMessage from '@/factory/errorMessage';\n\nconst createMessage = errorMessage.create;\nconst errorTypes = errorMessage.types;\n\n/**\n * DrawingMode interface\n * @class\n * @param {string} name - drawing mode name\n * @ignore\n */\nclass DrawingMode {\n  constructor(name) {\n    /**\n     * the name of drawing mode\n     * @type {string}\n     */\n    this.name = name;\n  }\n\n  /**\n   * Get this drawing mode name;\n   * @returns {string} drawing mode name\n   */\n  getName() {\n    return this.name;\n  }\n\n  /**\n   * start this drawing mode\n   * @param {Object} options - drawing mode options\n   * @abstract\n   */\n  start() {\n    throw new Error(createMessage(errorTypes.UN_IMPLEMENTATION, 'start'));\n  }\n\n  /**\n   * stop this drawing mode\n   * @abstract\n   */\n  end() {\n    throw new Error(createMessage(errorTypes.UN_IMPLEMENTATION, 'stop'));\n  }\n}\n\nexport default DrawingMode;\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","module.exports = {};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = true;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","'use strict';\nvar aFunction = require('../internals/a-function');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n};\n\n// 25.4.1.5 NewPromiseCapability(C)\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (target, key, value, options) {\n  if (options && options.enumerable) target[key] = value;\n  else createNonEnumerableProperty(target, key, value);\n};\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar iterate = module.exports = function (iterable, fn, that, AS_ENTRIES, IS_ITERATOR) {\n  var boundFunction = bind(fn, that, AS_ENTRIES ? 2 : 1);\n  var iterator, iterFn, index, length, result, next, step;\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = AS_ENTRIES\n          ? boundFunction(anObject(step = iterable[index])[0], step[1])\n          : boundFunction(iterable[index]);\n        if (result && result instanceof Result) return result;\n      } return new Result(false);\n    }\n    iterator = iterFn.call(iterable);\n  }\n\n  next = iterator.next;\n  while (!(step = next.call(iterator)).done) {\n    result = callWithSafeIterationClosing(iterator, boundFunction, step.value, AS_ENTRIES);\n    if (typeof result == 'object' && result && result instanceof Result) return result;\n  } return new Result(false);\n};\n\niterate.stop = function (result) {\n  return new Result(true, result);\n};\n","module.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Selection modification helper\n */\n\nimport { extend } from '../codeSnippet';\n\n/**\n * Cached selection's info\n * @type {Array}\n * @private\n */\nlet cachedUndoDataForChangeDimension = null;\n\n/**\n * Set cached undo data\n * @param {Array} undoData - selection object\n * @private\n */\nexport function setCachedUndoDataForDimension(undoData) {\n  cachedUndoDataForChangeDimension = undoData;\n}\n\n/**\n * Get cached undo data\n * @returns {Object} cached undo data\n * @private\n */\nexport function getCachedUndoDataForDimension() {\n  return cachedUndoDataForChangeDimension;\n}\n\n/**\n * Make undo data\n * @param {fabric.Object} obj - selection object\n * @param {Function} undoDatumMaker - make undo datum\n * @returns {Array} undoData\n * @private\n */\nexport function makeSelectionUndoData(obj, undoDatumMaker) {\n  let undoData;\n\n  if (obj.type === 'activeSelection') {\n    undoData = obj.getObjects().map((item) => {\n      const { angle, left, top, scaleX, scaleY, width, height } = item;\n\n      obj.realizeTransform(item);\n      const result = undoDatumMaker(item);\n\n      item.set({\n        angle,\n        left,\n        top,\n        width,\n        height,\n        scaleX,\n        scaleY,\n      });\n\n      return result;\n    });\n  } else {\n    undoData = [undoDatumMaker(obj)];\n  }\n\n  return undoData;\n}\n\n/**\n * Make undo datum\n * @param {number} id - object id\n * @param {fabric.Object} obj - selection object\n * @param {boolean} isSelection - whether or not object is selection\n * @returns {Object} undo datum\n * @private\n */\nexport function makeSelectionUndoDatum(id, obj, isSelection) {\n  return isSelection\n    ? {\n        id,\n        width: obj.width,\n        height: obj.height,\n        top: obj.top,\n        left: obj.left,\n        angle: obj.angle,\n        scaleX: obj.scaleX,\n        scaleY: obj.scaleY,\n      }\n    : extend({ id }, obj);\n}\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","module.exports = {};\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar defineProperty = require('../internals/object-define-property').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar toString = require('../internals/object-to-string');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC, SET_METHOD) {\n  if (it) {\n    var target = STATIC ? it : it.prototype;\n    if (!has(target, TO_STRING_TAG)) {\n      defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });\n    }\n    if (SET_METHOD && !TO_STRING_TAG_SUPPORT) {\n      createNonEnumerableProperty(target, 'toString', toString);\n    }\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","/* eslint-disable */\n/*!\n * @file This file is src/customEvent.js from tui.code-snippet@1.5.2 with some minor edits to use\n * our new codeSnippet.js file.\n * @author NHN. FE Development Lab <dl_javascript@nhn.com>\n * @license MIT\n */\n\n/**\n * @fileoverview\n *  This module provides some functions for custom events.<br>\n *  And it is implemented in the observer design pattern.\n * @author NHN.\n *         FE Development Lab <dl_javascript@nhn.com>\n */\n\n'use strict';\n\nconst snippet = require('./codeSnippet');\n\nvar R_EVENTNAME_SPLIT = /\\s+/g;\n\n/**\n * A unit of event handler item.\n * @ignore\n * @typedef {object} HandlerItem\n * @property {function} fn - event handler\n * @property {object} ctx - context of event handler\n */\n\n/**\n * @class\n * @memberof tui.util\n * @example\n * // node, commonjs\n * var CustomEvents = require('tui-code-snippet').CustomEvents;\n * @example\n * // distribution file, script\n * <script src='path-to/tui-code-snippt.js'></script>\n * <script>\n * var CustomEvents = tui.util.CustomEvents;\n * </script>\n */\nfunction CustomEvents() {\n    /**\n     * @type {HandlerItem[]}\n     */\n    this.events = null;\n\n    /**\n     * only for checking specific context event was binded\n     * @type {object[]}\n     */\n    this.contexts = null;\n}\n\n/**\n * Mixin custom events feature to specific constructor\n * @param {function} func - constructor\n * @example\n * //-- #1. Get Module --//\n * var CustomEvents = require('tui-code-snippet').CustomEvents; // node, commonjs\n * var CustomEvents = tui.util.CustomEvents; // distribution file\n *\n * //-- #2. Use property --//\n * var model;\n * function Model() {\n *     this.name = '';\n * }\n * CustomEvents.mixin(Model);\n *\n * model = new Model();\n * model.on('change', function() { this.name = 'model'; }, this);\n * model.fire('change');\n * alert(model.name); // 'model';\n */\nCustomEvents.mixin = function(func) {\n    snippet.extend(func.prototype, CustomEvents.prototype);\n};\n\n/**\n * Get HandlerItem object\n * @param {function} handler - handler function\n * @param {object} [context] - context for handler\n * @returns {HandlerItem} HandlerItem object\n * @private\n */\nCustomEvents.prototype._getHandlerItem = function(handler, context) {\n    var item = {handler: handler};\n\n    if (context) {\n        item.context = context;\n    }\n\n    return item;\n};\n\n/**\n * Get event object safely\n * @param {string} [eventName] - create sub event map if not exist.\n * @returns {(object|array)} event object. if you supplied `eventName`\n *  parameter then make new array and return it\n * @private\n */\nCustomEvents.prototype._safeEvent = function(eventName) {\n    var events = this.events;\n    var byName;\n\n    if (!events) {\n        events = this.events = {};\n    }\n\n    if (eventName) {\n        byName = events[eventName];\n\n        if (!byName) {\n            byName = [];\n            events[eventName] = byName;\n        }\n\n        events = byName;\n    }\n\n    return events;\n};\n\n/**\n * Get context array safely\n * @returns {array} context array\n * @private\n */\nCustomEvents.prototype._safeContext = function() {\n    var context = this.contexts;\n\n    if (!context) {\n        context = this.contexts = [];\n    }\n\n    return context;\n};\n\n/**\n * Get index of context\n * @param {object} ctx - context that used for bind custom event\n * @returns {number} index of context\n * @private\n */\nCustomEvents.prototype._indexOfContext = function(ctx) {\n    var context = this._safeContext();\n    var index = 0;\n\n    while (context[index]) {\n        if (ctx === context[index][0]) {\n            return index;\n        }\n\n        index += 1;\n    }\n\n    return -1;\n};\n\n/**\n * Memorize supplied context for recognize supplied object is context or\n *  name: handler pair object when off()\n * @param {object} ctx - context object to memorize\n * @private\n */\nCustomEvents.prototype._memorizeContext = function(ctx) {\n    var context, index;\n\n    if (!snippet.isExisty(ctx)) {\n        return;\n    }\n\n    context = this._safeContext();\n    index = this._indexOfContext(ctx);\n\n    if (index > -1) {\n        context[index][1] += 1;\n    } else {\n        context.push([ctx, 1]);\n    }\n};\n\n/**\n * Forget supplied context object\n * @param {object} ctx - context object to forget\n * @private\n */\nCustomEvents.prototype._forgetContext = function(ctx) {\n    var context, contextIndex;\n\n    if (!snippet.isExisty(ctx)) {\n        return;\n    }\n\n    context = this._safeContext();\n    contextIndex = this._indexOfContext(ctx);\n\n    if (contextIndex > -1) {\n        context[contextIndex][1] -= 1;\n\n        if (context[contextIndex][1] <= 0) {\n            context.splice(contextIndex, 1);\n        }\n    }\n};\n\n/**\n * Bind event handler\n * @param {(string|{name:string, handler:function})} eventName - custom\n *  event name or an object {eventName: handler}\n * @param {(function|object)} [handler] - handler function or context\n * @param {object} [context] - context for binding\n * @private\n */\nCustomEvents.prototype._bindEvent = function(eventName, handler, context) {\n    var events = this._safeEvent(eventName);\n    this._memorizeContext(context);\n    events.push(this._getHandlerItem(handler, context));\n};\n\n/**\n * Bind event handlers\n * @param {(string|{name:string, handler:function})} eventName - custom\n *  event name or an object {eventName: handler}\n * @param {(function|object)} [handler] - handler function or context\n * @param {object} [context] - context for binding\n * //-- #1. Get Module --//\n * var CustomEvents = require('tui-code-snippet').CustomEvents; // node, commonjs\n * var CustomEvents = tui.util.CustomEvents; // distribution file\n *\n * //-- #2. Use property --//\n * // # 2.1 Basic Usage\n * CustomEvents.on('onload', handler);\n *\n * // # 2.2 With context\n * CustomEvents.on('onload', handler, myObj);\n *\n * // # 2.3 Bind by object that name, handler pairs\n * CustomEvents.on({\n *     'play': handler,\n *     'pause': handler2\n * });\n *\n * // # 2.4 Bind by object that name, handler pairs with context object\n * CustomEvents.on({\n *     'play': handler\n * }, myObj);\n */\nCustomEvents.prototype.on = function(eventName, handler, context) {\n    var self = this;\n\n    if (snippet.isString(eventName)) {\n        // [syntax 1, 2]\n        eventName = eventName.split(R_EVENTNAME_SPLIT);\n        snippet.forEach(eventName, function(name) {\n            self._bindEvent(name, handler, context);\n        });\n    } else if (snippet.isObject(eventName)) {\n        // [syntax 3, 4]\n        context = handler;\n        snippet.forEach(eventName, function(func, name) {\n            self.on(name, func, context);\n        });\n    }\n};\n\n/**\n * Bind one-shot event handlers\n * @param {(string|{name:string,handler:function})} eventName - custom\n *  event name or an object {eventName: handler}\n * @param {function|object} [handler] - handler function or context\n * @param {object} [context] - context for binding\n */\nCustomEvents.prototype.once = function(eventName, handler, context) {\n    var self = this;\n\n    if (snippet.isObject(eventName)) {\n        context = handler;\n        snippet.forEach(eventName, function(func, name) {\n            self.once(name, func, context);\n        });\n\n        return;\n    }\n\n    function onceHandler() { // eslint-disable-line require-jsdoc\n        handler.apply(context, arguments);\n        self.off(eventName, onceHandler, context);\n    }\n\n    this.on(eventName, onceHandler, context);\n};\n\n/**\n * Splice supplied array by callback result\n * @param {array} arr - array to splice\n * @param {function} predicate - function return boolean\n * @private\n */\nCustomEvents.prototype._spliceMatches = function(arr, predicate) {\n    var i = 0;\n    var len;\n\n    if (!snippet.isArray(arr)) {\n        return;\n    }\n\n    for (len = arr.length; i < len; i += 1) {\n        if (predicate(arr[i]) === true) {\n            arr.splice(i, 1);\n            len -= 1;\n            i -= 1;\n        }\n    }\n};\n\n/**\n * Get matcher for unbind specific handler events\n * @param {function} handler - handler function\n * @returns {function} handler matcher\n * @private\n */\nCustomEvents.prototype._matchHandler = function(handler) {\n    var self = this;\n\n    return function(item) {\n        var needRemove = handler === item.handler;\n\n        if (needRemove) {\n            self._forgetContext(item.context);\n        }\n\n        return needRemove;\n    };\n};\n\n/**\n * Get matcher for unbind specific context events\n * @param {object} context - context\n * @returns {function} object matcher\n * @private\n */\nCustomEvents.prototype._matchContext = function(context) {\n    var self = this;\n\n    return function(item) {\n        var needRemove = context === item.context;\n\n        if (needRemove) {\n            self._forgetContext(item.context);\n        }\n\n        return needRemove;\n    };\n};\n\n/**\n * Get matcher for unbind specific hander, context pair events\n * @param {function} handler - handler function\n * @param {object} context - context\n * @returns {function} handler, context matcher\n * @private\n */\nCustomEvents.prototype._matchHandlerAndContext = function(handler, context) {\n    var self = this;\n\n    return function(item) {\n        var matchHandler = (handler === item.handler);\n        var matchContext = (context === item.context);\n        var needRemove = (matchHandler && matchContext);\n\n        if (needRemove) {\n            self._forgetContext(item.context);\n        }\n\n        return needRemove;\n    };\n};\n\n/**\n * Unbind event by event name\n * @param {string} eventName - custom event name to unbind\n * @param {function} [handler] - handler function\n * @private\n */\nCustomEvents.prototype._offByEventName = function(eventName, handler) {\n    var self = this;\n    var forEach = snippet.forEachArray;\n    var andByHandler = snippet.isFunction(handler);\n    var matchHandler = self._matchHandler(handler);\n\n    eventName = eventName.split(R_EVENTNAME_SPLIT);\n\n    forEach(eventName, function(name) {\n        var handlerItems = self._safeEvent(name);\n\n        if (andByHandler) {\n            self._spliceMatches(handlerItems, matchHandler);\n        } else {\n            forEach(handlerItems, function(item) {\n                self._forgetContext(item.context);\n            });\n\n            self.events[name] = [];\n        }\n    });\n};\n\n/**\n * Unbind event by handler function\n * @param {function} handler - handler function\n * @private\n */\nCustomEvents.prototype._offByHandler = function(handler) {\n    var self = this;\n    var matchHandler = this._matchHandler(handler);\n\n    snippet.forEach(this._safeEvent(), function(handlerItems) {\n        self._spliceMatches(handlerItems, matchHandler);\n    });\n};\n\n/**\n * Unbind event by object(name: handler pair object or context object)\n * @param {object} obj - context or {name: handler} pair object\n * @param {function} handler - handler function\n * @private\n */\nCustomEvents.prototype._offByObject = function(obj, handler) {\n    var self = this;\n    var matchFunc;\n\n    if (this._indexOfContext(obj) < 0) {\n        snippet.forEach(obj, function(func, name) {\n            self.off(name, func);\n        });\n    } else if (snippet.isString(handler)) {\n        matchFunc = this._matchContext(obj);\n\n        self._spliceMatches(this._safeEvent(handler), matchFunc);\n    } else if (snippet.isFunction(handler)) {\n        matchFunc = this._matchHandlerAndContext(handler, obj);\n\n        snippet.forEach(this._safeEvent(), function(handlerItems) {\n            self._spliceMatches(handlerItems, matchFunc);\n        });\n    } else {\n        matchFunc = this._matchContext(obj);\n\n        snippet.forEach(this._safeEvent(), function(handlerItems) {\n            self._spliceMatches(handlerItems, matchFunc);\n        });\n    }\n};\n\n/**\n * Unbind custom events\n * @param {(string|object|function)} eventName - event name or context or\n *  {name: handler} pair object or handler function\n * @param {(function)} handler - handler function\n * @example\n * //-- #1. Get Module --//\n * var CustomEvents = require('tui-code-snippet').CustomEvents; // node, commonjs\n * var CustomEvents = tui.util.CustomEvents; // distribution file\n *\n * //-- #2. Use property --//\n * // # 2.1 off by event name\n * CustomEvents.off('onload');\n *\n * // # 2.2 off by event name and handler\n * CustomEvents.off('play', handler);\n *\n * // # 2.3 off by handler\n * CustomEvents.off(handler);\n *\n * // # 2.4 off by context\n * CustomEvents.off(myObj);\n *\n * // # 2.5 off by context and handler\n * CustomEvents.off(myObj, handler);\n *\n * // # 2.6 off by context and event name\n * CustomEvents.off(myObj, 'onload');\n *\n * // # 2.7 off by an Object.<string, function> that is {eventName: handler}\n * CustomEvents.off({\n *   'play': handler,\n *   'pause': handler2\n * });\n *\n * // # 2.8 off the all events\n * CustomEvents.off();\n */\nCustomEvents.prototype.off = function(eventName, handler) {\n    if (snippet.isString(eventName)) {\n        // [syntax 1, 2]\n        this._offByEventName(eventName, handler);\n    } else if (!arguments.length) {\n        // [syntax 8]\n        this.events = {};\n        this.contexts = [];\n    } else if (snippet.isFunction(eventName)) {\n        // [syntax 3]\n        this._offByHandler(eventName);\n    } else if (snippet.isObject(eventName)) {\n        // [syntax 4, 5, 6]\n        this._offByObject(eventName, handler);\n    }\n};\n\n/**\n * Fire custom event\n * @param {string} eventName - name of custom event\n */\nCustomEvents.prototype.fire = function(eventName) {  // eslint-disable-line\n    this.invoke.apply(this, arguments);\n};\n\n/**\n * Fire a event and returns the result of operation 'boolean AND' with all\n *  listener's results.\n *\n * So, It is different from {@link CustomEvents#fire}.\n *\n * In service code, use this as a before event in component level usually\n *  for notifying that the event is cancelable.\n * @param {string} eventName - Custom event name\n * @param {...*} data - Data for event\n * @returns {boolean} The result of operation 'boolean AND'\n * @example\n * var map = new Map();\n * map.on({\n *     'beforeZoom': function() {\n *         // It should cancel the 'zoom' event by some conditions.\n *         if (that.disabled && this.getState()) {\n *             return false;\n *         }\n *         return true;\n *     }\n * });\n *\n * if (this.invoke('beforeZoom')) {    // check the result of 'beforeZoom'\n *     // if true,\n *     // doSomething\n * }\n */\nCustomEvents.prototype.invoke = function(eventName) {\n    var events, args, index, item;\n\n    if (!this.hasListener(eventName)) {\n        return true;\n    }\n\n    events = this._safeEvent(eventName);\n    args = Array.prototype.slice.call(arguments, 1);\n    index = 0;\n\n    while (events[index]) {\n        item = events[index];\n\n        if (item.handler.apply(item.context, args) === false) {\n            return false;\n        }\n\n        index += 1;\n    }\n\n    return true;\n};\n\n/**\n * Return whether at least one of the handlers is registered in the given\n *  event name.\n * @param {string} eventName - Custom event name\n * @returns {boolean} Is there at least one handler in event name?\n */\nCustomEvents.prototype.hasListener = function(eventName) {\n    return this.getListenerLength(eventName) > 0;\n};\n\n/**\n * Return a count of events registered.\n * @param {string} eventName - Custom event name\n * @returns {number} number of event\n */\nCustomEvents.prototype.getListenerLength = function(eventName) {\n    var events = this._safeEvent(eventName);\n\n    return events.length;\n};\n\nmodule.exports = CustomEvents;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Error-message factory\n */\nimport snippet from '../codeSnippet';\nimport { keyMirror } from '@/util';\n\nconst types = keyMirror('UN_IMPLEMENTATION', 'NO_COMPONENT_NAME');\nconst messages = {\n  UN_IMPLEMENTATION: 'Should implement a method: ',\n  NO_COMPONENT_NAME: 'Should set a component name',\n};\nconst map = {\n  UN_IMPLEMENTATION(methodName) {\n    return messages.UN_IMPLEMENTATION + methodName;\n  },\n  NO_COMPONENT_NAME() {\n    return messages.NO_COMPONENT_NAME;\n  },\n};\n\nexport default {\n  types: snippet.extend({}, types),\n\n  create(type, ...args) {\n    type = type.toLowerCase();\n    const func = map[type];\n\n    return func(...args);\n  },\n};\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.6.4',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.github.io/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nif (IteratorPrototype == undefined) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif (!IS_PURE && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.github.io/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","var anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.github.io/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\nvar bind = require('../internals/function-bind-context');\nvar html = require('../internals/html');\nvar createElement = require('../internals/document-create-element');\nvar IS_IOS = require('../internals/engine-is-ios');\n\nvar location = global.location;\nvar set = global.setImmediate;\nvar clear = global.clearImmediate;\nvar process = global.process;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\n\nvar run = function (id) {\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar listener = function (event) {\n  run(event.data);\n};\n\nvar post = function (id) {\n  // old engines have not location.origin\n  global.postMessage(id + '', location.protocol + '//' + location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      (typeof fn == 'function' ? fn : Function(fn)).apply(undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (classof(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  // except iOS - https://github.com/zloirock/core-js/issues/624\n  } else if (MessageChannel && !IS_IOS) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = bind(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts && !fails(post)) {\n    defer = post;\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: set,\n  clear: clear\n};\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /(iphone|ipod|ipad).*applewebkit/i.test(userAgent);\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar iterate = require('../internals/iterate');\n\n// `Promise.allSettled` method\n// https://github.com/tc39/proposal-promise-allSettled\n$({ target: 'Promise', stat: true }, {\n  allSettled: function allSettled(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var promiseResolve = aFunction(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        promiseResolve.call(C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'fulfilled', value: value };\n          --remaining || resolve(values);\n        }, function (e) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'rejected', reason: e };\n          --remaining || resolve(values);\n        });\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Shape resize helper\n */\nconst DIVISOR = {\n  rect: 1,\n  circle: 2,\n  triangle: 1,\n};\nconst DIMENSION_KEYS = {\n  rect: {\n    w: 'width',\n    h: 'height',\n  },\n  circle: {\n    w: 'rx',\n    h: 'ry',\n  },\n  triangle: {\n    w: 'width',\n    h: 'height',\n  },\n};\n\n/**\n * Set the start point value to the shape object\n * @param {fabric.Object} shape - Shape object\n * @ignore\n */\nfunction setStartPoint(shape) {\n  const { originX, originY } = shape;\n  const originKey = originX.substring(0, 1) + originY.substring(0, 1);\n\n  shape.startPoint = shape.origins[originKey];\n}\n\n/**\n * Get the positions of ratated origin by the pointer value\n * @param {{x: number, y: number}} origin - Origin value\n * @param {{x: number, y: number}} pointer - Pointer value\n * @param {number} angle - Rotating angle\n * @returns {Object} Postions of origin\n * @ignore\n */\nfunction getPositionsOfRotatedOrigin(origin, pointer, angle) {\n  const sx = origin.x;\n  const sy = origin.y;\n  const px = pointer.x;\n  const py = pointer.y;\n  const r = (angle * Math.PI) / 180;\n  const rx = (px - sx) * Math.cos(r) - (py - sy) * Math.sin(r) + sx;\n  const ry = (px - sx) * Math.sin(r) + (py - sy) * Math.cos(r) + sy;\n\n  return {\n    originX: sx > rx ? 'right' : 'left',\n    originY: sy > ry ? 'bottom' : 'top',\n  };\n}\n\n/**\n * Whether the shape has the center origin or not\n * @param {fabric.Object} shape - Shape object\n * @returns {boolean} State\n * @ignore\n */\nfunction hasCenterOrigin(shape) {\n  return shape.originX === 'center' && shape.originY === 'center';\n}\n\n/**\n * Adjust the origin of shape by the start point\n * @param {{x: number, y: number}} pointer - Pointer value\n * @param {fabric.Object} shape - Shape object\n * @ignore\n */\nfunction adjustOriginByStartPoint(pointer, shape) {\n  const centerPoint = shape.getPointByOrigin('center', 'center');\n  const angle = -shape.angle;\n  const originPositions = getPositionsOfRotatedOrigin(centerPoint, pointer, angle);\n  const { originX, originY } = originPositions;\n  const origin = shape.getPointByOrigin(originX, originY);\n  const left = shape.left - (centerPoint.x - origin.x);\n  const top = shape.top - (centerPoint.y - origin.y);\n\n  shape.set({\n    originX,\n    originY,\n    left,\n    top,\n  });\n\n  shape.setCoords();\n}\n\n/**\n * Adjust the origin of shape by the moving pointer value\n * @param {{x: number, y: number}} pointer - Pointer value\n * @param {fabric.Object} shape - Shape object\n * @ignore\n */\nfunction adjustOriginByMovingPointer(pointer, shape) {\n  const origin = shape.startPoint;\n  const angle = -shape.angle;\n  const originPositions = getPositionsOfRotatedOrigin(origin, pointer, angle);\n  const { originX, originY } = originPositions;\n\n  shape.setPositionByOrigin(origin, originX, originY);\n  shape.setCoords();\n}\n\n/**\n * Adjust the dimension of shape on firing scaling event\n * @param {fabric.Object} shape - Shape object\n * @ignore\n */\nfunction adjustDimensionOnScaling(shape) {\n  const { type, scaleX, scaleY } = shape;\n  const dimensionKeys = DIMENSION_KEYS[type];\n  let width = shape[dimensionKeys.w] * scaleX;\n  let height = shape[dimensionKeys.h] * scaleY;\n\n  if (shape.isRegular) {\n    const maxScale = Math.max(scaleX, scaleY);\n\n    width = shape[dimensionKeys.w] * maxScale;\n    height = shape[dimensionKeys.h] * maxScale;\n  }\n\n  const options = {\n    hasControls: false,\n    hasBorders: false,\n    scaleX: 1,\n    scaleY: 1,\n  };\n\n  options[dimensionKeys.w] = width;\n  options[dimensionKeys.h] = height;\n\n  shape.set(options);\n}\n\n/**\n * Adjust the dimension of shape on firing mouse move event\n * @param {{x: number, y: number}} pointer - Pointer value\n * @param {fabric.Object} shape - Shape object\n * @ignore\n */\nfunction adjustDimensionOnMouseMove(pointer, shape) {\n  const { type, strokeWidth, startPoint: origin } = shape;\n  const divisor = DIVISOR[type];\n  const dimensionKeys = DIMENSION_KEYS[type];\n  const isTriangle = !!(shape.type === 'triangle');\n  const options = {};\n  let width = Math.abs(origin.x - pointer.x) / divisor;\n  let height = Math.abs(origin.y - pointer.y) / divisor;\n\n  if (width > strokeWidth) {\n    width -= strokeWidth / divisor;\n  }\n\n  if (height > strokeWidth) {\n    height -= strokeWidth / divisor;\n  }\n\n  if (shape.isRegular) {\n    width = height = Math.max(width, height);\n\n    if (isTriangle) {\n      height = (Math.sqrt(3) / 2) * width;\n    }\n  }\n\n  options[dimensionKeys.w] = width;\n  options[dimensionKeys.h] = height;\n\n  shape.set(options);\n}\n\nmodule.exports = {\n  /**\n   * Set each origin value to shape\n   * @param {fabric.Object} shape - Shape object\n   */\n  setOrigins(shape) {\n    const leftTopPoint = shape.getPointByOrigin('left', 'top');\n    const rightTopPoint = shape.getPointByOrigin('right', 'top');\n    const rightBottomPoint = shape.getPointByOrigin('right', 'bottom');\n    const leftBottomPoint = shape.getPointByOrigin('left', 'bottom');\n\n    shape.origins = {\n      lt: leftTopPoint,\n      rt: rightTopPoint,\n      rb: rightBottomPoint,\n      lb: leftBottomPoint,\n    };\n  },\n\n  /**\n   * Resize the shape\n   * @param {fabric.Object} shape - Shape object\n   * @param {{x: number, y: number}} pointer - Mouse pointer values on canvas\n   * @param {boolean} isScaling - Whether the resizing action is scaling or not\n   */\n  resize(shape, pointer, isScaling) {\n    if (hasCenterOrigin(shape)) {\n      adjustOriginByStartPoint(pointer, shape);\n      setStartPoint(shape);\n    }\n\n    if (isScaling) {\n      adjustDimensionOnScaling(shape, pointer);\n    } else {\n      adjustDimensionOnMouseMove(pointer, shape);\n    }\n\n    adjustOriginByMovingPointer(pointer, shape);\n  },\n\n  /**\n   * Adjust the origin position of shape to center\n   * @param {fabric.Object} shape - Shape object\n   */\n  adjustOriginToCenter(shape) {\n    const centerPoint = shape.getPointByOrigin('center', 'center');\n    const { originX, originY } = shape;\n    const origin = shape.getPointByOrigin(originX, originY);\n    const left = shape.left + (centerPoint.x - origin.x);\n    const top = shape.top + (centerPoint.y - origin.y);\n\n    shape.set({\n      hasControls: true,\n      hasBorders: true,\n      originX: 'center',\n      originY: 'center',\n      left,\n      top,\n    });\n\n    shape.setCoords(); // For left, top properties\n  },\n};\n","import '@/polyfill';\nimport ImageEditor from '@/imageEditor';\n\n// commands\nimport '@/command/addIcon';\nimport '@/command/addImageObject';\nimport '@/command/addObject';\nimport '@/command/addShape';\nimport '@/command/addText';\nimport '@/command/applyFilter';\nimport '@/command/changeIconColor';\nimport '@/command/changeShape';\nimport '@/command/changeText';\nimport '@/command/changeTextStyle';\nimport '@/command/clearObjects';\nimport '@/command/flip';\nimport '@/command/loadImage';\nimport '@/command/removeFilter';\nimport '@/command/removeObject';\nimport '@/command/resizeCanvasDimension';\nimport '@/command/rotate';\nimport '@/command/setObjectProperties';\nimport '@/command/setObjectPosition';\nimport '@/command/changeSelection';\n\nmodule.exports = ImageEditor;\n","// https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\n// Any copyright is dedicated to the Public Domain. http://creativecommons.org/publicdomain/zero/1.0/if (!Element.prototype.matches)\nElement.prototype.matches =\n  Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nif (!Element.prototype.closest)\n  Element.prototype.closest = function (s) {\n    var el = this;\n    if (!document.documentElement.contains(el)) return null;\n    do {\n      if (el.matches(s)) return el;\n      el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n    return null;\n  };\n\n/*\n * classList.js: Cross-browser full element.classList implementation.\n * 1.1.20170427\n *\n * By Eli Grey, http://eligrey.com\n * License: Dedicated to the public domain.\n *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n\nif ('document' in window.self) {\n  // Full polyfill for browsers with no classList support\n  // Including IE < Edge missing SVGElement.classList\n  if (\n    !('classList' in document.createElement('_')) ||\n    (document.createElementNS &&\n      !('classList' in document.createElementNS('http://www.w3.org/2000/svg', 'g')))\n  ) {\n    (function (view) {\n      'use strict';\n\n      if (!('Element' in view)) return;\n\n      var classListProp = 'classList',\n        protoProp = 'prototype',\n        elemCtrProto = view.Element[protoProp],\n        objCtr = Object,\n        strTrim =\n          String[protoProp].trim ||\n          function () {\n            return this.replace(/^\\s+|\\s+$/g, '');\n          },\n        arrIndexOf =\n          Array[protoProp].indexOf ||\n          function (item) {\n            var i = 0,\n              len = this.length;\n            for (; i < len; i++) {\n              if (i in this && this[i] === item) {\n                return i;\n              }\n            }\n            return -1;\n          },\n        // Vendors: please allow content code to instantiate DOMExceptions\n        DOMEx = function (type, message) {\n          this.name = type;\n          this.code = DOMException[type];\n          this.message = message;\n        },\n        checkTokenAndGetIndex = function (classList, token) {\n          if (token === '') {\n            throw new DOMEx('SYNTAX_ERR', 'An invalid or illegal string was specified');\n          }\n          if (/\\s/.test(token)) {\n            throw new DOMEx('INVALID_CHARACTER_ERR', 'String contains an invalid character');\n          }\n          return arrIndexOf.call(classList, token);\n        },\n        ClassList = function (elem) {\n          var trimmedClasses = strTrim.call(elem.getAttribute('class') || ''),\n            classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : [],\n            i = 0,\n            len = classes.length;\n          for (; i < len; i++) {\n            this.push(classes[i]);\n          }\n          this._updateClassName = function () {\n            elem.setAttribute('class', this.toString());\n          };\n        },\n        classListProto = (ClassList[protoProp] = []),\n        classListGetter = function () {\n          return new ClassList(this);\n        };\n      // Most DOMException implementations don't allow calling DOMException's toString()\n      // on non-DOMExceptions. Error's toString() is sufficient here.\n      DOMEx[protoProp] = Error[protoProp];\n      classListProto.item = function (i) {\n        return this[i] || null;\n      };\n      classListProto.contains = function (token) {\n        token += '';\n        return checkTokenAndGetIndex(this, token) !== -1;\n      };\n      classListProto.add = function () {\n        var tokens = arguments,\n          i = 0,\n          l = tokens.length,\n          token,\n          updated = false;\n        do {\n          token = tokens[i] + '';\n          if (checkTokenAndGetIndex(this, token) === -1) {\n            this.push(token);\n            updated = true;\n          }\n        } while (++i < l);\n\n        if (updated) {\n          this._updateClassName();\n        }\n      };\n      classListProto.remove = function () {\n        var tokens = arguments,\n          i = 0,\n          l = tokens.length,\n          token,\n          updated = false,\n          index;\n        do {\n          token = tokens[i] + '';\n          index = checkTokenAndGetIndex(this, token);\n          while (index !== -1) {\n            this.splice(index, 1);\n            updated = true;\n            index = checkTokenAndGetIndex(this, token);\n          }\n        } while (++i < l);\n\n        if (updated) {\n          this._updateClassName();\n        }\n      };\n      classListProto.toggle = function (token, force) {\n        token += '';\n\n        var result = this.contains(token),\n          method = result ? force !== true && 'remove' : force !== false && 'add';\n        if (method) {\n          this[method](token);\n        }\n\n        if (force === true || force === false) {\n          return force;\n        } else {\n          return !result;\n        }\n      };\n      classListProto.toString = function () {\n        return this.join(' ');\n      };\n\n      if (objCtr.defineProperty) {\n        var classListPropDesc = {\n          get: classListGetter,\n          enumerable: true,\n          configurable: true,\n        };\n        try {\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n        } catch (ex) {\n          // IE 8 doesn't support enumerable:true\n          // adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n          // modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n          if (ex.number === undefined || ex.number === -0x7ff5ec54) {\n            classListPropDesc.enumerable = false;\n            objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n          }\n        }\n      } else if (objCtr[protoProp].__defineGetter__) {\n        elemCtrProto.__defineGetter__(classListProp, classListGetter);\n      }\n    })(window.self);\n  }\n\n  // There is full or partial native classList support, so just check if we need\n  // to normalize the add/remove and toggle APIs.\n\n  (function () {\n    'use strict';\n\n    var testElement = document.createElement('_');\n\n    testElement.classList.add('c1', 'c2');\n\n    // Polyfill for IE 10/11 and Firefox <26, where classList.add and\n    // classList.remove exist but support only one argument at a time.\n    if (!testElement.classList.contains('c2')) {\n      var createMethod = function (method) {\n        var original = DOMTokenList.prototype[method];\n\n        DOMTokenList.prototype[method] = function (token) {\n          var i,\n            len = arguments.length;\n\n          for (i = 0; i < len; i++) {\n            token = arguments[i];\n            original.call(this, token);\n          }\n        };\n      };\n      createMethod('add');\n      createMethod('remove');\n    }\n\n    testElement.classList.toggle('c3', false);\n\n    // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n    // support the second argument.\n    if (testElement.classList.contains('c3')) {\n      var _toggle = DOMTokenList.prototype.toggle;\n\n      DOMTokenList.prototype.toggle = function (token, force) {\n        if (1 in arguments && !this.contains(token) === !force) {\n          return force;\n        } else {\n          return _toggle.call(this, token);\n        }\n      };\n    }\n\n    testElement = null;\n  })();\n}\n\n/*!\n * @copyright Copyright (c) 2017 IcoMoon.io\n * @license   Licensed under MIT license\n *            See https://github.com/Keyamoon/svgxuse\n * @version   1.2.6\n */\n/*jslint browser: true */\n/*global XDomainRequest, MutationObserver, window */\n/*(function () {\n  'use strict';\n  if (typeof window !== 'undefined' && window.addEventListener) {\n    var cache = Object.create(null); // holds xhr objects to prevent multiple requests\n    var checkUseElems;\n    var tid; // timeout id\n    var debouncedCheck = function () {\n      clearTimeout(tid);\n      tid = setTimeout(checkUseElems, 100);\n    };\n    var unobserveChanges = function () {\n      return;\n    };\n    var observeChanges = function () {\n      var observer;\n      window.addEventListener('resize', debouncedCheck, false);\n      window.addEventListener('orientationchange', debouncedCheck, false);\n      if (window.MutationObserver) {\n        observer = new MutationObserver(debouncedCheck);\n        observer.observe(document.documentElement, {\n          childList: true,\n          subtree: true,\n          attributes: true,\n        });\n        unobserveChanges = function () {\n          try {\n            observer.disconnect();\n            window.removeEventListener('resize', debouncedCheck, false);\n            window.removeEventListener('orientationchange', debouncedCheck, false);\n          } catch (ignore) {}\n        };\n      } else {\n        document.documentElement.addEventListener('DOMSubtreeModified', debouncedCheck, false);\n        unobserveChanges = function () {\n          document.documentElement.removeEventListener('DOMSubtreeModified', debouncedCheck, false);\n          window.removeEventListener('resize', debouncedCheck, false);\n          window.removeEventListener('orientationchange', debouncedCheck, false);\n        };\n      }\n    };\n    var createRequest = function (url) {\n      // In IE 9, cross origin requests can only be sent using XDomainRequest.\n      // XDomainRequest would fail if CORS headers are not set.\n      // Therefore, XDomainRequest should only be used with cross origin requests.\n      function getOrigin(loc) {\n        var a;\n        if (loc.protocol !== undefined) {\n          a = loc;\n        } else {\n          a = document.createElement('a');\n          a.href = loc;\n        }\n        return a.protocol.replace(/:/g, '') + a.host;\n      }\n      var Request;\n      var origin;\n      var origin2;\n      if (window.XMLHttpRequest) {\n        Request = new XMLHttpRequest();\n        origin = getOrigin(location);\n        origin2 = getOrigin(url);\n        if (Request.withCredentials === undefined && origin2 !== '' && origin2 !== origin) {\n          Request = XDomainRequest || undefined;\n        } else {\n          Request = XMLHttpRequest;\n        }\n      }\n      return Request;\n    };\n    var xlinkNS = 'http://www.w3.org/1999/xlink';\n    checkUseElems = function () {\n      var base;\n      var bcr;\n      var fallback = ''; // optional fallback URL in case no base path to SVG file was given and no symbol definition was found.\n      var hash;\n      var href;\n      var i;\n      var inProgressCount = 0;\n      var isHidden;\n      var Request;\n      var url;\n      var uses;\n      var xhr;\n      function observeIfDone() {\n        // If done with making changes, start watching for chagnes in DOM again\n        inProgressCount -= 1;\n        if (inProgressCount === 0) {\n          // if all xhrs were resolved\n          unobserveChanges(); // make sure to remove old handlers\n          observeChanges(); // watch for changes to DOM\n        }\n      }\n      function attrUpdateFunc(spec) {\n        return function () {\n          if (cache[spec.base] !== true) {\n            spec.useEl.setAttributeNS(xlinkNS, 'xlink:href', '#' + spec.hash);\n            if (spec.useEl.hasAttribute('href')) {\n              spec.useEl.setAttribute('href', '#' + spec.hash);\n            }\n          }\n        };\n      }\n      function onloadFunc(xhr) {\n        return function () {\n          var body = document.body;\n          var x = document.createElement('x');\n          var svg;\n          xhr.onload = null;\n          x.innerHTML = xhr.responseText;\n          svg = x.getElementsByTagName('svg')[0];\n          if (svg) {\n            svg.setAttribute('aria-hidden', 'true');\n            svg.style.position = 'absolute';\n            svg.style.width = 0;\n            svg.style.height = 0;\n            svg.style.overflow = 'hidden';\n            body.insertBefore(svg, body.firstChild);\n          }\n          observeIfDone();\n        };\n      }\n      function onErrorTimeout(xhr) {\n        return function () {\n          xhr.onerror = null;\n          xhr.ontimeout = null;\n          observeIfDone();\n        };\n      }\n      unobserveChanges(); // stop watching for changes to DOM\n      // find all use elements\n      uses = document.getElementsByTagName('use');\n      for (i = 0; i < uses.length; i += 1) {\n        try {\n          bcr = uses[i].getBoundingClientRect();\n        } catch (ignore) {\n          // failed to get bounding rectangle of the use element\n          bcr = false;\n        }\n        href =\n          uses[i].getAttribute('href') ||\n          uses[i].getAttributeNS(xlinkNS, 'href') ||\n          uses[i].getAttribute('xlink:href');\n        if (href && href.split) {\n          url = href.split('#');\n        } else {\n          url = ['', ''];\n        }\n        base = url[0];\n        hash = url[1];\n        isHidden = bcr && bcr.left === 0 && bcr.right === 0 && bcr.top === 0 && bcr.bottom === 0;\n        if (bcr && bcr.width === 0 && bcr.height === 0 && !isHidden) {\n          // the use element is empty\n          // if there is a reference to an external SVG, try to fetch it\n          // use the optional fallback URL if there is no reference to an external SVG\n          if (fallback && !base.length && hash && !document.getElementById(hash)) {\n            base = fallback;\n          }\n          if (uses[i].hasAttribute('href')) {\n            uses[i].setAttributeNS(xlinkNS, 'xlink:href', href);\n          }\n          if (base.length) {\n            // schedule updating xlink:href\n            xhr = cache[base];\n            if (xhr !== true) {\n              // true signifies that prepending the SVG was not required\n              setTimeout(\n                attrUpdateFunc({\n                  useEl: uses[i],\n                  base: base,\n                  hash: hash,\n                }),\n                0\n              );\n            }\n            if (xhr === undefined) {\n              Request = createRequest(base);\n              if (Request !== undefined) {\n                xhr = new Request();\n                cache[base] = xhr;\n                xhr.onload = onloadFunc(xhr);\n                xhr.onerror = onErrorTimeout(xhr);\n                xhr.ontimeout = onErrorTimeout(xhr);\n                xhr.open('GET', base);\n                xhr.send();\n                inProgressCount += 1;\n              }\n            }\n          }\n        } else {\n          if (!isHidden) {\n            if (cache[base] === undefined) {\n              // remember this URL if the use element was not empty and no request was sent\n              cache[base] = true;\n            } else if (cache[base].onload) {\n              // if it turns out that prepending the SVG is not necessary,\n              // abort the in-progress xhr.\n              cache[base].abort();\n              delete cache[base].onload;\n              cache[base] = true;\n            }\n          } else if (base.length && cache[base]) {\n            setTimeout(\n              attrUpdateFunc({\n                useEl: uses[i],\n                base: base,\n                hash: hash,\n              }),\n              0\n            );\n          }\n        }\n      }\n      uses = '';\n      inProgressCount += 1;\n      observeIfDone();\n    };\n    var winLoad;\n    winLoad = function () {\n      window.removeEventListener('load', winLoad, false); // to prevent memory leaks\n      tid = setTimeout(checkUseElems, 0);\n    };\n    if (document.readyState !== 'complete') {\n      // The load event fires when all resources have finished loading, which allows detecting whether SVG use elements are empty.\n      window.addEventListener('load', winLoad, false);\n    } else {\n      // No need to add a listener if the document is already loaded, initialize immediately.\n      winLoad();\n    }\n  }\n}());*/\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Image-editor application class\n */\nimport snippet from './codeSnippet';\nimport Invoker from '@/invoker';\nimport action from '@/action';\nimport commandFactory from '@/factory/command';\nimport Graphics from '@/graphics';\nimport { makeSelectionUndoData, makeSelectionUndoDatum } from '@/helper/selectionModifyHelper';\nimport { sendHostName, Promise, getObjectType } from '@/util';\nimport {\n  eventNames as events,\n  commandNames as commands,\n  keyCodes,\n  rejectMessages,\n  OBJ_TYPE,\n} from '@/consts';\nimport CustomEvents from './customEvent';\n\nconst { isUndefined, forEach } = snippet;\n\nconst {\n  MOUSE_DOWN,\n  MOUSE_UP,\n  MOUSE_MOVE,\n  OBJECT_MOVED,\n  OBJECT_SCALED,\n  OBJECT_ACTIVATED,\n  OBJECT_ROTATED,\n  OBJECT_ADDED,\n  OBJECT_REMOVED,\n  OBJECT_MODIFIED,\n  ADD_TEXT,\n  ADD_OBJECT,\n  TEXT_EDITING,\n  TEXT_CHANGED,\n  ICON_CREATE_RESIZE,\n  ICON_CREATE_END,\n  SELECTION_CLEARED,\n  SELECTION_CREATED,\n  ADD_OBJECT_AFTER,\n} = events;\n\n/**\n * Image filter result\n * @typedef {object} FilterResult\n * @property {string} type - filter type like 'mask', 'Grayscale' and so on\n * @property {string} action - action type like 'add', 'remove'\n */\n\n/**\n * Flip status\n * @typedef {object} FlipStatus\n * @property {boolean} flipX - x axis\n * @property {boolean} flipY - y axis\n * @property {Number} angle - angle\n */\n/**\n * Rotation status\n * @typedef {Number} RotateStatus\n * @property {Number} angle - angle\n */\n\n/**\n * Old and new Size\n * @typedef {object} SizeChange\n * @property {Number} oldWidth - old width\n * @property {Number} oldHeight - old height\n * @property {Number} newWidth - new width\n * @property {Number} newHeight - new height\n */\n\n/**\n * @typedef {string} ErrorMsg - {string} error message\n */\n\n/**\n * @typedef {object} ObjectProps - graphics object properties\n * @property {number} id - object id\n * @property {string} type - object type\n * @property {string} text - text content\n * @property {(string | number)} left - Left\n * @property {(string | number)} top - Top\n * @property {(string | number)} width - Width\n * @property {(string | number)} height - Height\n * @property {string} fill - Color\n * @property {string} stroke - Stroke\n * @property {(string | number)} strokeWidth - StrokeWidth\n * @property {string} fontFamily - Font type for text\n * @property {number} fontSize - Font Size\n * @property {string} fontStyle - Type of inclination (normal / italic)\n * @property {string} fontWeight - Type of thicker or thinner looking (normal / bold)\n * @property {string} textAlign - Type of text align (left / center / right)\n * @property {string} textDecoration - Type of line (underline / line-through / overline)\n */\n\n/**\n * Shape filter option\n * @typedef {object.<string, number>} ShapeFilterOption\n */\n\n/**\n * Shape filter option\n * @typedef {object} ShapeFillOption - fill option of shape\n * @property {string} type - fill type ('color' or 'filter')\n * @property {Array.<ShapeFillFilterOption>} [filter] - {@link ShapeFilterOption} List.\n *  only applies to filter types\n *  (ex: \\[\\{pixelate: 20\\}, \\{blur: 0.3\\}\\])\n * @property {string} [color] - Shape foreground color (ex: '#fff', 'transparent')\n */\n\n/**\n * Image editor\n * @class\n * @param {string|HTMLElement} wrapper - Wrapper's element or selector\n * @param {Object} [options] - Canvas max width & height of css\n *  @param {number} [options.includeUI] - Use the provided UI\n *    @param {Object} [options.includeUI.loadImage] - Basic editing image\n *      @param {string} options.includeUI.loadImage.path - image path\n *      @param {string} options.includeUI.loadImage.name - image name\n *    @param {Object} [options.includeUI.theme] - Theme object\n *    @param {Array} [options.includeUI.menu] - It can be selected when only specific menu is used, Default values are \\['crop', 'flip', 'rotate', 'draw', 'shape', 'icon', 'text', 'mask', 'filter'\\].\n *    @param {string} [options.includeUI.initMenu] - The first menu to be selected and started.\n *    @param {Object} [options.includeUI.uiSize] - ui size of editor\n *      @param {string} options.includeUI.uiSize.width - width of ui\n *      @param {string} options.includeUI.uiSize.height - height of ui\n *    @param {string} [options.includeUI.menuBarPosition=bottom] - Menu bar position('top', 'bottom', 'left', 'right')\n *  @param {number} options.cssMaxWidth - Canvas css-max-width\n *  @param {number} options.cssMaxHeight - Canvas css-max-height\n *  @param {Object} [options.selectionStyle] - selection style\n *  @param {string} [options.selectionStyle.cornerStyle] - selection corner style\n *  @param {number} [options.selectionStyle.cornerSize] - selection corner size\n *  @param {string} [options.selectionStyle.cornerColor] - selection corner color\n *  @param {string} [options.selectionStyle.cornerStrokeColor] = selection corner stroke color\n *  @param {boolean} [options.selectionStyle.transparentCorners] - selection corner transparent\n *  @param {number} [options.selectionStyle.lineWidth] - selection line width\n *  @param {string} [options.selectionStyle.borderColor] - selection border color\n *  @param {number} [options.selectionStyle.rotatingPointOffset] - selection rotating point length\n *  @param {Boolean} [options.usageStatistics=true] - Let us know the hostname. If you don't want to send the hostname, please set to false.\n * @example\n * var ImageEditor = require('tui-image-editor');\n * var blackTheme = require('./js/theme/black-theme.js');\n * var instance = new ImageEditor(document.querySelector('#tui-image-editor'), {\n *   includeUI: {\n *     loadImage: {\n *       path: 'img/sampleImage.jpg',\n *       name: 'SampleImage'\n *     },\n *     theme: blackTheme, // or whiteTheme\n *     menu: ['shape', 'filter'],\n *     initMenu: 'filter',\n *     uiSize: {\n *         width: '1000px',\n *         height: '700px'\n *     },\n *     menuBarPosition: 'bottom'\n *   },\n *   cssMaxWidth: 700,\n *   cssMaxHeight: 500,\n *   selectionStyle: {\n *     cornerSize: 20,\n *     rotatingPointOffset: 70\n *   }\n * });\n */\nclass ImageEditor {\n  constructor(wrapper, options) {\n    options = snippet.extend(\n      {\n        includeUI: false,\n        usageStatistics: false,\n      },\n      options\n    );\n\n    this.mode = null;\n\n    this.activeObjectId = null;\n\n    /**\n     * Flag that enables/disables removal of objects\n     * @type {boolean}\n     */\n    this.allowObjectRemoval = true;\n\n    /**\n     * Invoker\n     * @type {Invoker}\n     * @private\n     */\n    this._invoker = new Invoker();\n\n    /**\n     * Graphics instance\n     * @type {Graphics}\n     * @private\n     */\n    this._graphics = new Graphics(this.ui ? this.ui.getEditorArea() : wrapper, {\n      cssMaxWidth: options.cssMaxWidth,\n      cssMaxHeight: options.cssMaxHeight,\n    });\n\n    /**\n     * Event handler list\n     * @type {Object}\n     * @private\n     */\n    this._handlers = {\n      keydown: this._onKeyDown.bind(this),\n      mousedown: this._onMouseDown.bind(this),\n      mouseup: this._onMouseUp.bind(this),\n      mousemove: this._onMouseMove.bind(this),\n      objectActivated: this._onObjectActivated.bind(this),\n      objectRemoved: this._onObjectRemoved.bind(this),\n      objectMoved: this._onObjectMoved.bind(this),\n      objectScaled: this._onObjectScaled.bind(this),\n      objectRotated: this._onObjectRotated.bind(this),\n      objectAdded: this._onObjectAdded.bind(this),\n      objectModified: this._onObjectModified.bind(this),\n      createdPath: this._onCreatedPath,\n      addText: this._onAddText.bind(this),\n      addObject: this._onAddObject.bind(this),\n      textEditing: this._onTextEditing.bind(this),\n      textChanged: this._onTextChanged.bind(this),\n      iconCreateResize: this._onIconCreateResize.bind(this),\n      iconCreateEnd: this._onIconCreateEnd.bind(this),\n      selectionCleared: this._selectionCleared.bind(this),\n      selectionCreated: this._selectionCreated.bind(this),\n    };\n\n    this._attachInvokerEvents();\n    this._attachGraphicsEvents();\n    this._attachDomEvents();\n    this._setSelectionStyle(options.selectionStyle, {\n      applyCropSelectionStyle: options.applyCropSelectionStyle,\n      applyGroupSelectionStyle: options.applyGroupSelectionStyle,\n    });\n\n    if (options.usageStatistics) {\n      sendHostName();\n    }\n\n    if (this.ui) {\n      this.ui.initCanvas();\n      this.setReAction();\n      this._attachColorPickerInputBoxEvents();\n    }\n    fabric.enableGLFiltering = false;\n  }\n\n  _attachColorPickerInputBoxEvents() {\n    this.ui.on(events.INPUT_BOX_EDITING_STARTED, () => {\n      this.isColorPickerInputBoxEditing = true;\n    });\n    this.ui.on(events.INPUT_BOX_EDITING_STOPPED, () => {\n      this.isColorPickerInputBoxEditing = false;\n    });\n  }\n\n  _detachColorPickerInputBoxEvents() {\n    this.ui.off(events.INPUT_BOX_EDITING_STARTED);\n    this.ui.off(events.INPUT_BOX_EDITING_STOPPED);\n  }\n\n  /**\n   * Set selection style by init option\n   * @param {Object} selectionStyle - Selection styles\n   * @param {Object} applyTargets - Selection apply targets\n   *   @param {boolean} applyCropSelectionStyle - whether apply with crop selection style or not\n   *   @param {boolean} applyGroupSelectionStyle - whether apply with group selection style or not\n   * @private\n   */\n  _setSelectionStyle(selectionStyle, { applyCropSelectionStyle, applyGroupSelectionStyle }) {\n    if (selectionStyle) {\n      this._graphics.setSelectionStyle(selectionStyle);\n    }\n\n    if (applyCropSelectionStyle) {\n      this._graphics.setCropSelectionStyle(selectionStyle);\n    }\n\n    if (applyGroupSelectionStyle) {\n      this.on('selectionCreated', (eventTarget) => {\n        if (eventTarget.type === 'activeSelection') {\n          eventTarget.set(selectionStyle);\n        }\n      });\n    }\n  }\n\n  /**\n   * Attach invoker events\n   * @private\n   */\n  _attachInvokerEvents() {\n    const {\n      UNDO_STACK_CHANGED,\n      REDO_STACK_CHANGED,\n      EXECUTE_COMMAND,\n      AFTER_UNDO,\n      AFTER_REDO,\n      HAND_STARTED,\n      HAND_STOPPED,\n    } = events;\n\n    /**\n     * Undo stack changed event\n     * @event ImageEditor#undoStackChanged\n     * @param {Number} length - undo stack length\n     * @example\n     * imageEditor.on('undoStackChanged', function(length) {\n     *     console.log(length);\n     * });\n     */\n    this._invoker.on(UNDO_STACK_CHANGED, this.fire.bind(this, UNDO_STACK_CHANGED));\n    /**\n     * Redo stack changed event\n     * @event ImageEditor#redoStackChanged\n     * @param {Number} length - redo stack length\n     * @example\n     * imageEditor.on('redoStackChanged', function(length) {\n     *     console.log(length);\n     * });\n     */\n    this._invoker.on(REDO_STACK_CHANGED, this.fire.bind(this, REDO_STACK_CHANGED));\n\n    if (this.ui) {\n      const canvas = this._graphics.getCanvas();\n\n      this._invoker.on(EXECUTE_COMMAND, (command) => this.ui.fire(EXECUTE_COMMAND, command));\n      this._invoker.on(AFTER_UNDO, (command) => this.ui.fire(AFTER_UNDO, command));\n      this._invoker.on(AFTER_REDO, (command) => this.ui.fire(AFTER_REDO, command));\n\n      canvas.on(HAND_STARTED, () => this.ui.fire(HAND_STARTED));\n      canvas.on(HAND_STOPPED, () => this.ui.fire(HAND_STOPPED));\n    }\n  }\n\n  /**\n   * Attach canvas events\n   * @private\n   */\n  _attachGraphicsEvents() {\n    this._graphics.on({\n      [MOUSE_DOWN]: this._handlers.mousedown,\n      [MOUSE_UP]: this._handlers.mouseup,\n      [MOUSE_MOVE]: this._handlers.mousemove,\n      [OBJECT_MOVED]: this._handlers.objectMoved,\n      [OBJECT_SCALED]: this._handlers.objectScaled,\n      [OBJECT_ROTATED]: this._handlers.objectRotated,\n      [OBJECT_ACTIVATED]: this._handlers.objectActivated,\n      [OBJECT_ADDED]: this._handlers.objectAdded,\n      [OBJECT_REMOVED]: this._handlers.objectRemoved,\n      [OBJECT_MODIFIED]: this._handlers.objectModified,\n      [ADD_TEXT]: this._handlers.addText,\n      [ADD_OBJECT]: this._handlers.addObject,\n      [TEXT_EDITING]: this._handlers.textEditing,\n      [TEXT_CHANGED]: this._handlers.textChanged,\n      [ICON_CREATE_RESIZE]: this._handlers.iconCreateResize,\n      [ICON_CREATE_END]: this._handlers.iconCreateEnd,\n      [SELECTION_CLEARED]: this._handlers.selectionCleared,\n      [SELECTION_CREATED]: this._handlers.selectionCreated,\n    });\n  }\n\n  /**\n   * Attach dom events\n   * @private\n   */\n  _attachDomEvents() {\n    // ImageEditor supports IE 9 higher\n    document.addEventListener('keydown', this._handlers.keydown);\n  }\n\n  /**\n   * Detach dom events\n   * @private\n   */\n  _detachDomEvents() {\n    // ImageEditor supports IE 9 higher\n    document.removeEventListener('keydown', this._handlers.keydown);\n  }\n\n  /**\n   * Keydown event handler\n   * @param {KeyboardEvent} e - Event object\n   * @private\n   */\n  /* eslint-disable complexity */\n  _onKeyDown(e) {\n    const { ctrlKey, keyCode, metaKey } = e;\n    const isModifierKey = ctrlKey || metaKey;\n    const canRemove = this.allowObjectRemoval;\n\n    if (isModifierKey) {\n      if (keyCode === keyCodes.C) {\n        this._graphics.resetTargetObjectForCopyPaste();\n      } else if (keyCode === keyCodes.V) {\n        this._graphics.pasteObject();\n        this.clearRedoStack();\n      } else if (keyCode === keyCodes.Z) {\n        // There is no error message on shortcut when it's empty\n        this.undo()['catch'](() => {});\n      } else if (keyCode === keyCodes.Y) {\n        // There is no error message on shortcut when it's empty\n        this.redo()['catch'](() => {});\n      }\n    }\n\n    const isDeleteKey = keyCode === keyCodes.BACKSPACE || keyCode === keyCodes.DEL;\n    const isRemoveReady = this._graphics.isReadyRemoveObject();\n\n    if (!this.isColorPickerInputBoxEditing && isRemoveReady && isDeleteKey && canRemove) {\n      e.preventDefault();\n      this.removeActiveObject();\n    }\n  }\n\n  /**\n   * Remove Active Object\n   */\n  removeActiveObject() {\n    const activeObjectId = this._graphics.getActiveObjectIdForRemove();\n\n    this.removeObject(activeObjectId);\n  }\n\n  /**\n   * mouse down event handler\n   * @param {Event} event - mouse down event\n   * @param {Object} originPointer - origin pointer\n   *  @param {Number} originPointer.x x position\n   *  @param {Number} originPointer.y y position\n   * @private\n   */\n  _onMouseDown(event, originPointer) {\n    /**\n     * The mouse down event with position x, y on canvas\n     * @event ImageEditor#mousedown\n     * @param {Object} event - browser mouse event object\n     * @param {Object} originPointer origin pointer\n     *  @param {Number} originPointer.x x position\n     *  @param {Number} originPointer.y y position\n     * @example\n     * imageEditor.on('mousedown', function(event, originPointer) {\n     *     console.log(event);\n     *     console.log(originPointer);\n     *     if (imageEditor.hasFilter('colorFilter')) {\n     *         imageEditor.applyFilter('colorFilter', {\n     *             x: parseInt(originPointer.x, 10),\n     *             y: parseInt(originPointer.y, 10)\n     *         });\n     *     }\n     * });\n     */\n\n    this.fire(events.MOUSE_DOWN, event, originPointer);\n  }\n\n  /**\n   * mouse up event handler\n   * @param {Event} event mouse down event\n   * @param {Object} originPointer origin pointer\n   *  @param {Number} originPointer.x x position\n   *  @param {Number} originPointer.y y position\n   * @private\n   */\n  _onMouseUp(event, originPointer) {\n    /**\n     * The mouse up event with position x, y on canvas\n     * @event ImageEditor#mouseup\n     * @param {Object} event - browser mouse event object\n     * @param {Object} originPointer origin pointer\n     *  @param {Number} originPointer.x x position\n     *  @param {Number} originPointer.y y position\n     * @example\n     * imageEditor.on('mouseup', function(event, originPointer) {\n     *     console.log(event);\n     *     console.log(originPointer);\n     *     if (imageEditor.hasFilter('colorFilter')) {\n     *         imageEditor.applyFilter('colorFilter', {\n     *             x: parseInt(originPointer.x, 10),\n     *             y: parseInt(originPointer.y, 10)\n     *         });\n     *     }\n     * });\n     */\n    this.fire(events.MOUSE_UP, event, originPointer);\n  }\n\n  /**\n   * mouse move event handler\n   * @param {Event} event mouse move event\n   * @param {Object} originPointer origin pointer\n   *  @param {Number} originPointer.x x position\n   *  @param {Number} originPointer.y y position\n   * @private\n   */\n  _onMouseMove(event, originPointer) {\n    /**\n     * The mouse up event with position x, y on canvas\n     * @event ImageEditor#mousemove\n     * @param {Object} event - browser mouse event object\n     * @param {Object} originPointer origin pointer\n     *  @param {Number} originPointer.x x position\n     *  @param {Number} originPointer.y y position\n     * @example\n     * imageEditor.on('mousemove', function(event, originPointer) {\n     *     console.log(event);\n     *     console.log(originPointer);\n     *     if (imageEditor.hasFilter('colorFilter')) {\n     *         imageEditor.applyFilter('colorFilter', {\n     *             x: parseInt(originPointer.x, 10),\n     *             y: parseInt(originPointer.y, 10)\n     *         });\n     *     }\n     * });\n     */\n    this.fire(events.MOUSE_MOVE, event, originPointer);\n  }\n\n  /**\n   * Add a 'addObject' command\n   * @param {Object} obj - Fabric object\n   * @private\n   */\n  _pushAddObjectCommand(obj) {\n    const command = commandFactory.create(commands.ADD_OBJECT, this._graphics, obj);\n    this._invoker.pushUndoStack(command);\n  }\n\n  /**\n   * Add a 'changeSelection' command\n   * @param {fabric.Object} obj - selection object\n   * @private\n   */\n  _pushModifyObjectCommand(obj) {\n    const { type } = obj;\n    const props = makeSelectionUndoData(obj, (item) =>\n      makeSelectionUndoDatum(this._graphics.getObjectId(item), item, type === 'activeSelection')\n    );\n    const command = commandFactory.create(commands.CHANGE_SELECTION, this._graphics, props);\n    command.execute(this._graphics, props);\n\n    this._invoker.pushUndoStack(command);\n  }\n\n  /**\n   * 'objectActivated' event handler\n   * @param {ObjectProps} props - object properties\n   * @private\n   */\n  _onObjectActivated(props) {\n    /**\n     * The event when object is selected(aka activated).\n     * @event ImageEditor#objectActivated\n     * @param {ObjectProps} objectProps - object properties\n     * @example\n     * imageEditor.on('objectActivated', function(props) {\n     *     console.log(props);\n     *     console.log(props.type);\n     *     console.log(props.id);\n     * });\n     */\n    this.fire(events.OBJECT_ACTIVATED, props);\n  }\n\n  /**\n   * 'objectRemoved' event handler\n   * @param {ObjectProps} props - object properties\n   * @private\n   */\n  _onObjectRemoved(props) {\n    /**\n     * The event when object is removed.\n     * @event ImageEditor#objectRemoved\n     * @param {ObjectProps} objectProps - object properties\n     * @example\n     * imageEditor.on('objectRemoved', function(props) {\n     *     console.log(props);\n     *     console.log(props.type);\n     *     console.log(props.id);\n     * });\n     */\n    this.fire(events.OBJECT_REMOVED, props);\n  }\n\n  /**\n   * 'objectMoved' event handler\n   * @param {ObjectProps} props - object properties\n   * @private\n   */\n  _onObjectMoved(props) {\n    /**\n     * The event when object is moved\n     * @event ImageEditor#objectMoved\n     * @param {ObjectProps} props - object properties\n     * @example\n     * imageEditor.on('objectMoved', function(props) {\n     *     console.log(props);\n     *     console.log(props.type);\n     * });\n     */\n    this.fire(events.OBJECT_MOVED, props);\n  }\n\n  /**\n   * 'objectScaled' event handler\n   * @param {ObjectProps} props - object properties\n   * @private\n   */\n  _onObjectScaled(props) {\n    /**\n     * The event when scale factor is changed\n     * @event ImageEditor#objectScaled\n     * @param {ObjectProps} props - object properties\n     * @example\n     * imageEditor.on('objectScaled', function(props) {\n     *     console.log(props);\n     *     console.log(props.type);\n     * });\n     */\n    this.fire(events.OBJECT_SCALED, props);\n  }\n\n  /**\n   * 'objectRotated' event handler\n   * @param {ObjectProps} props - object properties\n   * @private\n   */\n  _onObjectRotated(props) {\n    /**\n     * The event when object angle is changed\n     * @event ImageEditor#objectRotated\n     * @param {ObjectProps} props - object properties\n     * @example\n     * imageEditor.on('objectRotated', function(props) {\n     *     console.log(props);\n     *     console.log(props.type);\n     * });\n     */\n    this.fire(events.OBJECT_ROTATED, props);\n  }\n\n  /**\n   * Get current drawing mode\n   * @returns {string}\n   * @example\n   * // Image editor drawing mode\n   * //\n   * //    NORMAL: 'NORMAL'\n   * //    CROPPER: 'CROPPER'\n   * //    FREE_DRAWING: 'FREE_DRAWING'\n   * //    LINE_DRAWING: 'LINE_DRAWING'\n   * //    TEXT: 'TEXT'\n   * //\n   * if (imageEditor.getDrawingMode() === 'FREE_DRAWING') {\n   *     imageEditor.stopDrawingMode();\n   * }\n   */\n  getDrawingMode() {\n    return this._graphics.getDrawingMode();\n  }\n\n  /**\n   * Clear all objects\n   * @returns {Promise}\n   * @example\n   * imageEditor.clearObjects();\n   */\n  clearObjects() {\n    return this.execute(commands.CLEAR_OBJECTS);\n  }\n\n  /**\n   * Deactivate all objects\n   * @example\n   * imageEditor.deactivateAll();\n   */\n  deactivateAll() {\n    this._graphics.deactivateAll();\n    this._graphics.renderAll();\n  }\n\n  /**\n   * discard selction\n   * @example\n   * imageEditor.discardSelection();\n   */\n  discardSelection() {\n    this._graphics.discardSelection();\n  }\n\n  /**\n   * selectable status change\n   * @param {boolean} selectable - selectable status\n   * @example\n   * imageEditor.changeSelectableAll(false); // or true\n   */\n  changeSelectableAll(selectable) {\n    this._graphics.changeSelectableAll(selectable);\n  }\n\n  /**\n   * Init history\n   */\n  _initHistory() {\n    if (this.ui) {\n      this.ui.initHistory();\n    }\n  }\n\n  /**\n   * Clear history\n   */\n  _clearHistory() {\n    if (this.ui) {\n      this.ui.clearHistory();\n    }\n  }\n\n  /**\n   * Invoke command\n   * @param {String} commandName - Command name\n   * @param {...*} args - Arguments for creating command\n   * @returns {Promise}\n   * @private\n   */\n  execute(commandName, ...args) {\n    // Inject an Graphics instance as first parameter\n    const theArgs = [this._graphics].concat(args);\n\n    return this._invoker.execute(commandName, ...theArgs);\n  }\n\n  /**\n   * Invoke command\n   * @param {String} commandName - Command name\n   * @param {...*} args - Arguments for creating command\n   * @returns {Promise}\n   * @private\n   */\n  executeSilent(commandName, ...args) {\n    // Inject an Graphics instance as first parameter\n    const theArgs = [this._graphics].concat(args);\n\n    return this._invoker.executeSilent(commandName, ...theArgs);\n  }\n\n  /**\n   * Undo\n   * @param {number} [iterationCount=1] - Iteration count of undo\n   * @returns {Promise}\n   * @example\n   * imageEditor.undo();\n   */\n  undo(iterationCount = 1) {\n    let promise = Promise.resolve();\n\n    for (let i = 0; i < iterationCount; i += 1) {\n      promise = promise.then(() => this._invoker.undo());\n    }\n\n    return promise;\n  }\n\n  /**\n   * Redo\n   * @param {number} [iterationCount=1] - Iteration count of redo\n   * @returns {Promise}\n   * @example\n   * imageEditor.redo();\n   */\n  redo(iterationCount = 1) {\n    let promise = Promise.resolve();\n\n    for (let i = 0; i < iterationCount; i += 1) {\n      promise = promise.then(() => this._invoker.redo());\n    }\n\n    return promise;\n  }\n\n  /**\n   * Zoom\n   * @param {number} x - x axis of center point for zoom\n   * @param {number} y - y axis of center point for zoom\n   * @param {number} zoomLevel - level of zoom(1.0 ~ 5.0)\n   */\n  zoom({ x, y, zoomLevel }) {\n    this._graphics.zoom({ x, y }, zoomLevel);\n  }\n\n  /**\n   * Reset zoom. Change zoom level to 1.0\n   */\n  resetZoom() {\n    this._graphics.resetZoom();\n  }\n\n  /**\n   * Load image from file\n   * @param {File} imgFile - Image file\n   * @param {string} [imageName] - imageName\n   * @returns {Promise<SizeChange, ErrorMsg>}\n   * @example\n   * imageEditor.loadImageFromFile(file).then(result => {\n   *      console.log('old : ' + result.oldWidth + ', ' + result.oldHeight);\n   *      console.log('new : ' + result.newWidth + ', ' + result.newHeight);\n   * });\n   */\n  loadImageFromFile(imgFile, imageName) {\n    if (!imgFile) {\n      return Promise.reject(rejectMessages.invalidParameters);\n    }\n\n    const imgUrl = URL.createObjectURL(imgFile);\n    imageName = imageName || imgFile.name;\n\n    return this.loadImageFromURL(imgUrl, imageName).then((value) => {\n      URL.revokeObjectURL(imgFile);\n\n      return value;\n    });\n  }\n\n  /**\n   * Load image from url\n   * @param {string} url - File url\n   * @param {string} imageName - imageName\n   * @returns {Promise<SizeChange, ErrorMsg>}\n   * @example\n   * imageEditor.loadImageFromURL('http://url/testImage.png', 'lena').then(result => {\n   *      console.log('old : ' + result.oldWidth + ', ' + result.oldHeight);\n   *      console.log('new : ' + result.newWidth + ', ' + result.newHeight);\n   * });\n   */\n  loadImageFromURL(url, imageName) {\n    if (!imageName || !url) {\n      return Promise.reject(rejectMessages.invalidParameters);\n    }\n\n    return this.execute(commands.LOAD_IMAGE, imageName, url);\n  }\n\n  /**\n   * Add image object on canvas\n   * @param {string} imgUrl - Image url to make object\n   * @returns {Promise<ObjectProps, ErrorMsg>}\n   * @example\n   * imageEditor.addImageObject('path/fileName.jpg').then(objectProps => {\n   *     console.log(ojectProps.id);\n   * });\n   */\n  addImageObject(imgUrl) {\n    if (!imgUrl) {\n      return Promise.reject(rejectMessages.invalidParameters);\n    }\n\n    return this.execute(commands.ADD_IMAGE_OBJECT, imgUrl);\n  }\n\n  /**\n   * Start a drawing mode. If the current mode is not 'NORMAL', 'stopDrawingMode()' will be called first.\n   * @param {String} mode Can be one of <I>'CROPPER', 'FREE_DRAWING', 'LINE_DRAWING', 'TEXT', 'SHAPE'</I>\n   * @param {Object} [option] parameters of drawing mode, it's available with 'FREE_DRAWING', 'LINE_DRAWING'\n   *  @param {Number} [option.width] brush width\n   *  @param {String} [option.color] brush color\n   *  @param {Object} [option.arrowType] arrow decorate\n   *    @param {string} [option.arrowType.tail] arrow decorate for tail. 'chevron' or 'triangle'\n   *    @param {string} [option.arrowType.head] arrow decorate for head. 'chevron' or 'triangle'\n   * @returns {boolean} true if success or false\n   * @example\n   * imageEditor.startDrawingMode('FREE_DRAWING', {\n   *      width: 10,\n   *      color: 'rgba(255,0,0,0.5)'\n   * });\n   * imageEditor.startDrawingMode('LINE_DRAWING', {\n   *      width: 10,\n   *      color: 'rgba(255,0,0,0.5)',\n   *      arrowType: {\n   *          tail: 'chevron' // triangle\n   *      }\n   * });\n   *\n   */\n  startDrawingMode(mode, option) {\n    return this._graphics.startDrawingMode(mode, option);\n  }\n\n  /**\n   * Stop the current drawing mode and back to the 'NORMAL' mode\n   * @example\n   * imageEditor.stopDrawingMode();\n   */\n  stopDrawingMode() {\n    this._graphics.stopDrawingMode();\n  }\n\n  /**\n   * Crop this image with rect\n   * @param {Object} rect crop rect\n   *  @param {Number} rect.left left position\n   *  @param {Number} rect.top top position\n   *  @param {Number} rect.width width\n   *  @param {Number} rect.height height\n   * @returns {Promise}\n   * @example\n   * imageEditor.crop(imageEditor.getCropzoneRect());\n   */\n  crop(rect) {\n    const data = this._graphics.getCroppedImageData(rect);\n    if (!data) {\n      return Promise.reject(rejectMessages.invalidParameters);\n    }\n\n    return this.loadImageFromURL(data.url, data.imageName);\n  }\n\n  /**\n   * Get the cropping rect\n   * @returns {Object}  {{left: number, top: number, width: number, height: number}} rect\n   */\n  getCropzoneRect() {\n    return this._graphics.getCropzoneRect();\n  }\n\n  /**\n   * Set the cropping rect\n   * @param {number} [mode] crop rect mode [1, 1.5, 1.3333333333333333, 1.25, 1.7777777777777777]\n   */\n  setCropzoneRect(mode) {\n    this._graphics.setCropzoneRect(mode);\n  }\n\n  /**\n   * Flip\n   * @returns {Promise}\n   * @param {string} type - 'flipX' or 'flipY' or 'reset'\n   * @returns {Promise<FlipStatus, ErrorMsg>}\n   * @private\n   */\n  _flip(type) {\n    return this.execute(commands.FLIP_IMAGE, type);\n  }\n\n  /**\n   * Flip x\n   * @returns {Promise<FlipStatus, ErrorMsg>}\n   * @example\n   * imageEditor.flipX().then((status => {\n   *     console.log('flipX: ', status.flipX);\n   *     console.log('flipY: ', status.flipY);\n   *     console.log('angle: ', status.angle);\n   * }).catch(message => {\n   *     console.log('error: ', message);\n   * });\n   */\n  flipX() {\n    return this._flip('flipX');\n  }\n\n  /**\n   * Flip y\n   * @returns {Promise<FlipStatus, ErrorMsg>}\n   * @example\n   * imageEditor.flipY().then(status => {\n   *     console.log('flipX: ', status.flipX);\n   *     console.log('flipY: ', status.flipY);\n   *     console.log('angle: ', status.angle);\n   * }).catch(message => {\n   *     console.log('error: ', message);\n   * });\n   */\n  flipY() {\n    return this._flip('flipY');\n  }\n\n  /**\n   * Reset flip\n   * @returns {Promise<FlipStatus, ErrorMsg>}\n   * @example\n   * imageEditor.resetFlip().then(status => {\n   *     console.log('flipX: ', status.flipX);\n   *     console.log('flipY: ', status.flipY);\n   *     console.log('angle: ', status.angle);\n   * }).catch(message => {\n   *     console.log('error: ', message);\n   * });;\n   */\n  resetFlip() {\n    return this._flip('reset');\n  }\n\n  /**\n   * @param {string} type - 'rotate' or 'setAngle'\n   * @param {number} angle - angle value (degree)\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise<RotateStatus, ErrorMsg>}\n   * @private\n   */\n  _rotate(type, angle, isSilent) {\n    let result = null;\n\n    if (isSilent) {\n      result = this.executeSilent(commands.ROTATE_IMAGE, type, angle);\n    } else {\n      result = this.execute(commands.ROTATE_IMAGE, type, angle);\n    }\n\n    return result;\n  }\n\n  /**\n   * Rotate image\n   * @returns {Promise}\n   * @param {number} angle - Additional angle to rotate image\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise<RotateStatus, ErrorMsg>}\n   * @example\n   * imageEditor.rotate(10); // angle = 10\n   * imageEditor.rotate(10); // angle = 20\n   * imageEditor.rotate(5); // angle = 5\n   * imageEditor.rotate(-95); // angle = -90\n   * imageEditor.rotate(10).then(status => {\n   *     console.log('angle: ', status.angle);\n   * })).catch(message => {\n   *     console.log('error: ', message);\n   * });\n   */\n  rotate(angle, isSilent) {\n    return this._rotate('rotate', angle, isSilent);\n  }\n\n  /**\n   * Set angle\n   * @param {number} angle - Angle of image\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise<RotateStatus, ErrorMsg>}\n   * @example\n   * imageEditor.setAngle(10); // angle = 10\n   * imageEditor.rotate(10); // angle = 20\n   * imageEditor.setAngle(5); // angle = 5\n   * imageEditor.rotate(50); // angle = 55\n   * imageEditor.setAngle(-40); // angle = -40\n   * imageEditor.setAngle(10).then(status => {\n   *     console.log('angle: ', status.angle);\n   * })).catch(message => {\n   *     console.log('error: ', message);\n   * });\n   */\n  setAngle(angle, isSilent) {\n    return this._rotate('setAngle', angle, isSilent);\n  }\n\n  /**\n   * Set drawing brush\n   * @param {Object} option brush option\n   *  @param {Number} option.width width\n   *  @param {String} option.color color like 'FFFFFF', 'rgba(0, 0, 0, 0.5)'\n   * @example\n   * imageEditor.startDrawingMode('FREE_DRAWING');\n   * imageEditor.setBrush({\n   *     width: 12,\n   *     color: 'rgba(0, 0, 0, 0.5)'\n   * });\n   * imageEditor.setBrush({\n   *     width: 8,\n   *     color: 'FFFFFF'\n   * });\n   */\n  setBrush(option) {\n    this._graphics.setBrush(option);\n  }\n\n  /**\n   * Set states of current drawing shape\n   * @param {string} type - Shape type (ex: 'rect', 'circle', 'triangle')\n   * @param {Object} [options] - Shape options\n   *      @param {(ShapeFillOption | string)} [options.fill] - {@link ShapeFillOption} or\n   *        Shape foreground color (ex: '#fff', 'transparent')\n   *      @param {string} [options.stoke] - Shape outline color\n   *      @param {number} [options.strokeWidth] - Shape outline width\n   *      @param {number} [options.width] - Width value (When type option is 'rect', this options can use)\n   *      @param {number} [options.height] - Height value (When type option is 'rect', this options can use)\n   *      @param {number} [options.rx] - Radius x value (When type option is 'circle', this options can use)\n   *      @param {number} [options.ry] - Radius y value (When type option is 'circle', this options can use)\n   *      @param {number} [options.isRegular] - Whether resizing shape has 1:1 ratio or not\n   * @example\n   * imageEditor.setDrawingShape('rect', {\n   *     fill: 'red',\n   *     width: 100,\n   *     height: 200\n   * });\n   * @example\n   * imageEditor.setDrawingShape('rect', {\n   *     fill: {\n   *         type: 'filter',\n   *         filter: [{blur: 0.3}, {pixelate: 20}]\n   *     },\n   *     width: 100,\n   *     height: 200\n   * });\n   * @example\n   * imageEditor.setDrawingShape('circle', {\n   *     fill: 'transparent',\n   *     stroke: 'blue',\n   *     strokeWidth: 3,\n   *     rx: 10,\n   *     ry: 100\n   * });\n   * @example\n   * imageEditor.setDrawingShape('triangle', { // When resizing, the shape keep the 1:1 ratio\n   *     width: 1,\n   *     height: 1,\n   *     isRegular: true\n   * });\n   * @example\n   * imageEditor.setDrawingShape('circle', { // When resizing, the shape keep the 1:1 ratio\n   *     rx: 10,\n   *     ry: 10,\n   *     isRegular: true\n   * });\n   */\n  setDrawingShape(type, options) {\n    this._graphics.setDrawingShape(type, options);\n  }\n\n  setDrawingIcon(type, iconColor) {\n    this._graphics.setIconStyle(type, iconColor);\n  }\n\n  /**\n   * Add shape\n   * @param {string} type - Shape type (ex: 'rect', 'circle', 'triangle')\n   * @param {Object} options - Shape options\n   *      @param {(ShapeFillOption | string)} [options.fill] - {@link ShapeFillOption} or\n   *        Shape foreground color (ex: '#fff', 'transparent')\n   *      @param {string} [options.stroke] - Shape outline color\n   *      @param {number} [options.strokeWidth] - Shape outline width\n   *      @param {number} [options.width] - Width value (When type option is 'rect', this options can use)\n   *      @param {number} [options.height] - Height value (When type option is 'rect', this options can use)\n   *      @param {number} [options.rx] - Radius x value (When type option is 'circle', this options can use)\n   *      @param {number} [options.ry] - Radius y value (When type option is 'circle', this options can use)\n   *      @param {number} [options.left] - Shape x position\n   *      @param {number} [options.top] - Shape y position\n   *      @param {boolean} [options.isRegular] - Whether resizing shape has 1:1 ratio or not\n   * @returns {Promise<ObjectProps, ErrorMsg>}\n   * @example\n   * imageEditor.addShape('rect', {\n   *     fill: 'red',\n   *     stroke: 'blue',\n   *     strokeWidth: 3,\n   *     width: 100,\n   *     height: 200,\n   *     left: 10,\n   *     top: 10,\n   *     isRegular: true\n   * });\n   * @example\n   * imageEditor.addShape('circle', {\n   *     fill: 'red',\n   *     stroke: 'blue',\n   *     strokeWidth: 3,\n   *     rx: 10,\n   *     ry: 100,\n   *     isRegular: false\n   * }).then(objectProps => {\n   *     console.log(objectProps.id);\n   * });\n   * @example\n   * imageEditor.addShape('rect', {\n   *     fill: {\n   *         type: 'filter',\n   *         filter: [{blur: 0.3}, {pixelate: 20}]\n   *     },\n   *     stroke: 'blue',\n   *     strokeWidth: 3,\n   *     rx: 10,\n   *     ry: 100,\n   *     isRegular: false\n   * }).then(objectProps => {\n   *     console.log(objectProps.id);\n   * });\n   */\n  addShape(type, options) {\n    options = options || {};\n\n    this._setPositions(options);\n\n    return this.execute(commands.ADD_SHAPE, type, options);\n  }\n\n  /**\n   * Change shape\n   * @param {number} id - object id\n   * @param {Object} options - Shape options\n   *      @param {(ShapeFillOption | string)} [options.fill] - {@link ShapeFillOption} or\n   *        Shape foreground color (ex: '#fff', 'transparent')\n   *      @param {string} [options.stroke] - Shape outline color\n   *      @param {number} [options.strokeWidth] - Shape outline width\n   *      @param {number} [options.width] - Width value (When type option is 'rect', this options can use)\n   *      @param {number} [options.height] - Height value (When type option is 'rect', this options can use)\n   *      @param {number} [options.rx] - Radius x value (When type option is 'circle', this options can use)\n   *      @param {number} [options.ry] - Radius y value (When type option is 'circle', this options can use)\n   *      @param {boolean} [options.isRegular] - Whether resizing shape has 1:1 ratio or not\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise}\n   * @example\n   * // call after selecting shape object on canvas\n   * imageEditor.changeShape(id, { // change rectagle or triangle\n   *     fill: 'red',\n   *     stroke: 'blue',\n   *     strokeWidth: 3,\n   *     width: 100,\n   *     height: 200\n   * });\n   * @example\n   * // call after selecting shape object on canvas\n   * imageEditor.changeShape(id, { // change circle\n   *     fill: 'red',\n   *     stroke: 'blue',\n   *     strokeWidth: 3,\n   *     rx: 10,\n   *     ry: 100\n   * });\n   */\n  changeShape(id, options, isSilent) {\n    const executeMethodName = isSilent ? 'executeSilent' : 'execute';\n\n    return this[executeMethodName](commands.CHANGE_SHAPE, id, options);\n  }\n\n  /**\n   * Add text on image\n   * @param {string} text - Initial input text\n   * @param {Object} [options] Options for generating text\n   *     @param {Object} [options.styles] Initial styles\n   *         @param {string} [options.styles.fill] Color\n   *         @param {string} [options.styles.fontFamily] Font type for text\n   *         @param {number} [options.styles.fontSize] Size\n   *         @param {string} [options.styles.fontStyle] Type of inclination (normal / italic)\n   *         @param {string} [options.styles.fontWeight] Type of thicker or thinner looking (normal / bold)\n   *         @param {string} [options.styles.textAlign] Type of text align (left / center / right)\n   *         @param {string} [options.styles.textDecoration] Type of line (underline / line-through / overline)\n   *     @param {{x: number, y: number}} [options.position] - Initial position\n   *     @param {boolean} [options.autofocus] - text autofocus, default is true\n   * @returns {Promise}\n   * @example\n   * imageEditor.addText('init text');\n   * @example\n   * imageEditor.addText('init text', {\n   *     styles: {\n   *         fill: '#000',\n   *         fontSize: 20,\n   *         fontWeight: 'bold'\n   *     },\n   *     position: {\n   *         x: 10,\n   *         y: 10\n   *     }\n   * }).then(objectProps => {\n   *     console.log(objectProps.id);\n   * });\n   */\n  addText(text, options) {\n    text = text || '';\n    options = options || {};\n\n    return this.execute(commands.ADD_TEXT, text, options);\n  }\n\n  /**\n   * Change contents of selected text object on image\n   * @param {number} id - object id\n   * @param {string} text - Changing text\n   * @returns {Promise<ObjectProps, ErrorMsg>}\n   * @example\n   * imageEditor.changeText(id, 'change text');\n   */\n  changeText(id, text) {\n    text = text || '';\n\n    return this.execute(commands.CHANGE_TEXT, id, text);\n  }\n\n  /**\n   * Set style\n   * @param {number} id - object id\n   * @param {Object} styleObj - text styles\n   *     @param {string} [styleObj.fill] Color\n   *     @param {string} [styleObj.fontFamily] Font type for text\n   *     @param {number} [styleObj.fontSize] Size\n   *     @param {string} [styleObj.fontStyle] Type of inclination (normal / italic)\n   *     @param {string} [styleObj.fontWeight] Type of thicker or thinner looking (normal / bold)\n   *     @param {string} [styleObj.textAlign] Type of text align (left / center / right)\n   *     @param {string} [styleObj.textDecoration] Type of line (underline / line-through / overline)\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise}\n   * @example\n   * imageEditor.changeTextStyle(id, {\n   *     fontStyle: 'italic'\n   * });\n   */\n  changeTextStyle(id, styleObj, isSilent) {\n    const executeMethodName = isSilent ? 'executeSilent' : 'execute';\n\n    return this[executeMethodName](commands.CHANGE_TEXT_STYLE, id, styleObj);\n  }\n\n  /**\n   * change text mode\n   * @param {string} type - change type\n   * @private\n   */\n  _changeActivateMode(type) {\n    if (type !== 'ICON' && this.getDrawingMode() !== type) {\n      this.startDrawingMode(type);\n    }\n  }\n\n  /**\n   * 'textChanged' event handler\n   * @param {Object} target - changed text object\n   * @private\n   */\n  _onTextChanged(target) {\n    this.fire(events.TEXT_CHANGED, target);\n  }\n\n  /**\n   * 'iconCreateResize' event handler\n   * @param {Object} originPointer origin pointer\n   *  @param {Number} originPointer.x x position\n   *  @param {Number} originPointer.y y position\n   * @private\n   */\n  _onIconCreateResize(originPointer) {\n    this.fire(events.ICON_CREATE_RESIZE, originPointer);\n  }\n\n  /**\n   * 'iconCreateEnd' event handler\n   * @param {Object} originPointer origin pointer\n   *  @param {Number} originPointer.x x position\n   *  @param {Number} originPointer.y y position\n   * @private\n   */\n  _onIconCreateEnd(originPointer) {\n    this.fire(events.ICON_CREATE_END, originPointer);\n  }\n\n  /**\n   * 'textEditing' event handler\n   * @private\n   */\n  _onTextEditing() {\n    /**\n     * The event which starts to edit text object\n     * @event ImageEditor#textEditing\n     * @example\n     * imageEditor.on('textEditing', function() {\n     *     console.log('text editing');\n     * });\n     */\n\n    this.fire(events.TEXT_EDITING);\n  }\n\n  /**\n   * Mousedown event handler in case of 'TEXT' drawing mode\n   * @param {fabric.Event} event - Current mousedown event object\n   * @private\n   */\n  _onAddText(event) {\n    /**\n     * The event when 'TEXT' drawing mode is enabled and click non-object area.\n     * @event ImageEditor#addText\n     * @param {Object} pos\n     *  @param {Object} pos.originPosition - Current position on origin canvas\n     *      @param {Number} pos.originPosition.x - x\n     *      @param {Number} pos.originPosition.y - y\n     *  @param {Object} pos.clientPosition - Current position on client area\n     *      @param {Number} pos.clientPosition.x - x\n     *      @param {Number} pos.clientPosition.y - y\n     * @example\n     * imageEditor.on('addText', function(pos) {\n     *     console.log('text position on canvas: ' + pos.originPosition);\n     *     console.log('text position on brwoser: ' + pos.clientPosition);\n     * });\n     */\n\n    this.fire(events.ADD_TEXT, {\n      originPosition: event.originPosition,\n      clientPosition: event.clientPosition,\n    });\n  }\n\n  /**\n   * 'addObject' event handler\n   * @param {Object} objectProps added object properties\n   * @private\n   */\n  _onAddObject(objectProps) {\n    const obj = this._graphics.getObject(objectProps.id);\n    this._invoker.fire(events.EXECUTE_COMMAND, getObjectType(obj.type));\n    this._pushAddObjectCommand(obj);\n  }\n\n  /**\n   * 'objectAdded' event handler\n   * @param {Object} objectProps added object properties\n   * @private\n   */\n  _onObjectAdded(objectProps) {\n    /**\n     * The event when object added\n     * @event ImageEditor#objectAdded\n     * @param {ObjectProps} props - object properties\n     * @example\n     * imageEditor.on('objectAdded', function(props) {\n     *     console.log(props);\n     * });\n     */\n    this.fire(OBJECT_ADDED, objectProps);\n\n    /**\n     * The event when object added (deprecated)\n     * @event ImageEditor#addObjectAfter\n     * @param {ObjectProps} props - object properties\n     * @deprecated\n     */\n    this.fire(ADD_OBJECT_AFTER, objectProps);\n  }\n\n  /**\n   * 'objectModified' event handler\n   * @param {fabric.Object} obj - selection object\n   * @private\n   */\n  _onObjectModified(obj) {\n    if (obj.type !== OBJ_TYPE.CROPZONE) {\n      this._invoker.fire(events.EXECUTE_COMMAND, getObjectType(obj.type));\n      this._pushModifyObjectCommand(obj);\n    }\n  }\n\n  /**\n   * 'selectionCleared' event handler\n   * @private\n   */\n  _selectionCleared() {\n    this.fire(SELECTION_CLEARED);\n  }\n\n  /**\n   * 'selectionCreated' event handler\n   * @param {Object} eventTarget - Fabric object\n   * @private\n   */\n  _selectionCreated(eventTarget) {\n    if (eventTarget.type === 'activeSelection') {\n      eventTarget.set({\n        lockRotation: true,\n        lockScalingX: true,\n        lockScalingY: true,\n        hasControls: false,\n      });\n    }\n    this.fire(SELECTION_CREATED, eventTarget);\n  }\n\n  /**\n   * Register custom icons\n   * @param {{iconType: string, pathValue: string}} infos - Infos to register icons\n   * @example\n   * imageEditor.registerIcons({\n   *     customIcon: 'M 0 0 L 20 20 L 10 10 Z',\n   *     customArrow: 'M 60 0 L 120 60 H 90 L 75 45 V 180 H 45 V 45 L 30 60 H 0 Z'\n   * });\n   */\n  registerIcons(infos) {\n    this._graphics.registerPaths(infos);\n  }\n\n  /**\n   * Change canvas cursor type\n   * @param {string} cursorType - cursor type\n   * @example\n   * imageEditor.changeCursor('crosshair');\n   */\n  changeCursor(cursorType) {\n    this._graphics.changeCursor(cursorType);\n  }\n\n  /**\n   * Add icon on canvas\n   * @param {string} type - Icon type ('arrow', 'cancel', custom icon name)\n   * @param {Object} options - Icon options\n   *      @param {string} [options.fill] - Icon foreground color\n   *      @param {number} [options.left] - Icon x position\n   *      @param {number} [options.top] - Icon y position\n   * @returns {Promise<ObjectProps, ErrorMsg>}\n   * @example\n   * imageEditor.addIcon('arrow'); // The position is center on canvas\n   * @example\n   * imageEditor.addIcon('arrow', {\n   *     left: 100,\n   *     top: 100\n   * }).then(objectProps => {\n   *     console.log(objectProps.id);\n   * });\n   */\n  addIcon(type, options) {\n    options = options || {};\n\n    this._setPositions(options);\n\n    return this.execute(commands.ADD_ICON, type, options);\n  }\n\n  /**\n   * Change icon color\n   * @param {number} id - object id\n   * @param {string} color - Color for icon\n   * @returns {Promise}\n   * @example\n   * imageEditor.changeIconColor(id, '#000000');\n   */\n  changeIconColor(id, color) {\n    return this.execute(commands.CHANGE_ICON_COLOR, id, color);\n  }\n\n  /**\n   * Remove an object or group by id\n   * @param {number} id - object id\n   * @returns {Promise}\n   * @example\n   * imageEditor.removeObject(id);\n   */\n  removeObject(id) {\n    const { type } = this._graphics.getObject(id);\n\n    return this.execute(commands.REMOVE_OBJECT, id, getObjectType(type));\n  }\n\n  /**\n   * Whether it has the filter or not\n   * @param {string} type - Filter type\n   * @returns {boolean} true if it has the filter\n   */\n  hasFilter(type) {\n    return this._graphics.hasFilter(type);\n  }\n\n  /**\n   * Remove filter on canvas image\n   * @param {string} type - Filter type\n   * @returns {Promise<FilterResult, ErrorMsg>}\n   * @example\n   * imageEditor.removeFilter('Grayscale').then(obj => {\n   *     console.log('filterType: ', obj.type);\n   *     console.log('actType: ', obj.action);\n   * }).catch(message => {\n   *     console.log('error: ', message);\n   * });\n   */\n  removeFilter(type) {\n    return this.execute(commands.REMOVE_FILTER, type);\n  }\n\n  /**\n   * Apply filter on canvas image\n   * @param {string} type - Filter type\n   * @param {object} options - Options to apply filter\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise<FilterResult, ErrorMsg>}\n   * @example\n   * imageEditor.applyFilter('Grayscale');\n   * @example\n   * imageEditor.applyFilter('mask', {maskObjId: id}).then(obj => {\n   *     console.log('filterType: ', obj.type);\n   *     console.log('actType: ', obj.action);\n   * }).catch(message => {\n   *     console.log('error: ', message);\n   * });;\n   */\n  applyFilter(type, options, isSilent) {\n    const executeMethodName = isSilent ? 'executeSilent' : 'execute';\n\n    return this[executeMethodName](commands.APPLY_FILTER, type, options);\n  }\n\n  /**\n   * Get data url\n   * @param {Object} options - options for toDataURL\n   *   @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n   *   @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n   *   @param {Number} [options.multiplier=1] Multiplier to scale by\n   *   @param {Number} [options.left] Cropping left offset. Introduced in fabric v1.2.14\n   *   @param {Number} [options.top] Cropping top offset. Introduced in fabric v1.2.14\n   *   @param {Number} [options.width] Cropping width. Introduced in fabric v1.2.14\n   *   @param {Number} [options.height] Cropping height. Introduced in fabric v1.2.14\n   * @returns {string} A DOMString containing the requested data URI\n   * @example\n   * imgEl.src = imageEditor.toDataURL();\n   *\n   * imageEditor.loadImageFromURL(imageEditor.toDataURL(), 'FilterImage').then(() => {\n   *      imageEditor.addImageObject(imgUrl);\n   * });\n   */\n  toDataURL(options) {\n    return this._graphics.toDataURL(options);\n  }\n\n  /**\n   * Get image name\n   * @returns {string} image name\n   * @example\n   * console.log(imageEditor.getImageName());\n   */\n  getImageName() {\n    return this._graphics.getImageName();\n  }\n\n  /**\n   * Clear undoStack\n   * @example\n   * imageEditor.clearUndoStack();\n   */\n  clearUndoStack() {\n    this._invoker.clearUndoStack();\n  }\n\n  /**\n   * Clear redoStack\n   * @example\n   * imageEditor.clearRedoStack();\n   */\n  clearRedoStack() {\n    this._invoker.clearRedoStack();\n  }\n\n  /**\n   * Whehter the undo stack is empty or not\n   * @returns {boolean}\n   * imageEditor.isEmptyUndoStack();\n   */\n  isEmptyUndoStack() {\n    return this._invoker.isEmptyUndoStack();\n  }\n\n  /**\n   * Whehter the redo stack is empty or not\n   * @returns {boolean}\n   * imageEditor.isEmptyRedoStack();\n   */\n  isEmptyRedoStack() {\n    return this._invoker.isEmptyRedoStack();\n  }\n\n  /**\n   * Resize canvas dimension\n   * @param {{width: number, height: number}} dimension - Max width & height\n   * @returns {Promise}\n   */\n  resizeCanvasDimension(dimension) {\n    if (!dimension) {\n      return Promise.reject(rejectMessages.invalidParameters);\n    }\n\n    return this.execute(commands.RESIZE_CANVAS_DIMENSION, dimension);\n  }\n\n  /**\n   * Resize canvas dimension quietly\n   * @param {{width: number, height: number}} dimension - Max width & height\n   * @returns {Promise}\n   */\n  resizeCanvasDimensionQuietly(dimension) {\n    this._graphics.setCssMaxDimension(dimension);\n    this._graphics.adjustCanvasDimension();\n\n    return Promise.resolve();\n  }\n\n  /**\n   * Destroy\n   */\n  destroy() {\n    this.stopDrawingMode();\n    this._detachDomEvents();\n    this._graphics.destroy();\n    this._graphics = null;\n\n    if (this.ui) {\n      this._detachColorPickerInputBoxEvents();\n      this.ui.destroy();\n    }\n\n    forEach(\n      this,\n      (value, key) => {\n        this[key] = null;\n      },\n      this\n    );\n  }\n\n  /**\n   * Set position\n   * @param {Object} options - Position options (left or top)\n   * @private\n   */\n  _setPositions(options) {\n    const centerPosition = this._graphics.getCenter();\n\n    if (isUndefined(options.left)) {\n      options.left = centerPosition.left;\n    }\n\n    if (isUndefined(options.top)) {\n      options.top = centerPosition.top;\n    }\n  }\n\n  /**\n   * Set properties of active object\n   * @param {number} id - object id\n   * @param {Object} keyValue - key & value\n   * @returns {Promise}\n   * @example\n   * imageEditor.setObjectProperties(id, {\n   *     left:100,\n   *     top:100,\n   *     width: 200,\n   *     height: 200,\n   *     opacity: 0.5\n   * });\n   */\n  setObjectProperties(id, keyValue) {\n    return this.execute(commands.SET_OBJECT_PROPERTIES, id, keyValue);\n  }\n\n  /**\n   * Set properties of active object, Do not leave an invoke history.\n   * @param {number} id - object id\n   * @param {Object} keyValue - key & value\n   * @example\n   * imageEditor.setObjectPropertiesQuietly(id, {\n   *     left:100,\n   *     top:100,\n   *     width: 200,\n   *     height: 200,\n   *     opacity: 0.5\n   * });\n   */\n  setObjectPropertiesQuietly(id, keyValue) {\n    this._graphics.setObjectProperties(id, keyValue);\n  }\n\n  /**\n   * Get properties of active object corresponding key\n   * @param {number} id - object id\n   * @param {Array<string>|ObjectProps|string} keys - property's key\n   * @returns {ObjectProps} properties if id is valid or null\n   * @example\n   * var props = imageEditor.getObjectProperties(id, 'left');\n   * console.log(props);\n   * @example\n   * var props = imageEditor.getObjectProperties(id, ['left', 'top', 'width', 'height']);\n   * console.log(props);\n   * @example\n   * var props = imageEditor.getObjectProperties(id, {\n   *     left: null,\n   *     top: null,\n   *     width: null,\n   *     height: null,\n   *     opacity: null\n   * });\n   * console.log(props);\n   */\n  getObjectProperties(id, keys) {\n    const object = this._graphics.getObject(id);\n    if (!object) {\n      return null;\n    }\n\n    return this._graphics.getObjectProperties(id, keys);\n  }\n\n  /**\n   * Get the canvas size\n   * @returns {Object} {{width: number, height: number}} canvas size\n   * @example\n   * var canvasSize = imageEditor.getCanvasSize();\n   * console.log(canvasSize.width);\n   * console.height(canvasSize.height);\n   */\n  getCanvasSize() {\n    return this._graphics.getCanvasSize();\n  }\n\n  /**\n   * Get the canvas zoom\n   * @returns {number} canvas zoom\n   * @example\n   * var canvasZoom = imageEditor.getCanvasZoom();\n   * console.log(canvasZoom);\n   */\n  getCanvasZoom() {\n    return this._graphics.getCanvasZoom();\n  }\n\n  /**\n   * Get the current angle\n   * @returns {Number}\n   */\n  getCurrentAngle() {\n    return this._graphics.getCanvasImage().angle;\n  }\n\n  /**\n   * Get object position by originX, originY\n   * @param {number} id - object id\n   * @param {string} originX - can be 'left', 'center', 'right'\n   * @param {string} originY - can be 'top', 'center', 'bottom'\n   * @returns {Object} {{x:number, y: number}} position by origin if id is valid, or null\n   * @example\n   * var position = imageEditor.getObjectPosition(id, 'left', 'top');\n   * console.log(position);\n   */\n  getObjectPosition(id, originX, originY) {\n    return this._graphics.getObjectPosition(id, originX, originY);\n  }\n\n  /**\n   * Set object position  by originX, originY\n   * @param {number} id - object id\n   * @param {Object} posInfo - position object\n   *  @param {number} posInfo.x - x position\n   *  @param {number} posInfo.y - y position\n   *  @param {string} posInfo.originX - can be 'left', 'center', 'right'\n   *  @param {string} posInfo.originY - can be 'top', 'center', 'bottom'\n   * @returns {Promise}\n   * @example\n   * // align the object to 'left', 'top'\n   * imageEditor.setObjectPosition(id, {\n   *     x: 0,\n   *     y: 0,\n   *     originX: 'left',\n   *     originY: 'top'\n   * });\n   * @example\n   * // align the object to 'right', 'top'\n   * var canvasSize = imageEditor.getCanvasSize();\n   * imageEditor.setObjectPosition(id, {\n   *     x: canvasSize.width,\n   *     y: 0,\n   *     originX: 'right',\n   *     originY: 'top'\n   * });\n   * @example\n   * // align the object to 'left', 'bottom'\n   * var canvasSize = imageEditor.getCanvasSize();\n   * imageEditor.setObjectPosition(id, {\n   *     x: 0,\n   *     y: canvasSize.height,\n   *     originX: 'left',\n   *     originY: 'bottom'\n   * });\n   * @example\n   * // align the object to 'right', 'bottom'\n   * var canvasSize = imageEditor.getCanvasSize();\n   * imageEditor.setObjectPosition(id, {\n   *     x: canvasSize.width,\n   *     y: canvasSize.height,\n   *     originX: 'right',\n   *     originY: 'bottom'\n   * });\n   */\n  setObjectPosition(id, posInfo) {\n    return this.execute(commands.SET_OBJECT_POSITION, id, posInfo);\n  }\n\n  /**\n   * Set the canvas zoom\n   * @param {number} zoom - zoom level to set\n   * @example\n   * var zoom = 1.5;\n   * imageEditor.setCanvasZoom(zoom);\n   */\n  setCanvasZoom(zoom) {\n    this._graphics.setCanvasZoom(zoom);\n  }\n\n  /**\n   * Sets the object removal flag\n   * @param {boolean} allow - allow flag\n   */\n  setAllowObjectRemoval(allow) {\n    this.allowObjectRemoval = allow;\n  }\n}\n\naction.mixin(ImageEditor);\nCustomEvents.mixin(ImageEditor);\n\nexport default ImageEditor;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Invoker - invoke commands\n */\nimport snippet from './codeSnippet';\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { eventNames, rejectMessages } from '@/consts';\nimport CustomEvents from './customEvent';\n\nconst { isFunction, isString } = snippet;\n\n/**\n * Invoker\n * @class\n * @ignore\n */\nclass Invoker {\n  constructor() {\n    /**\n     * Undo stack\n     * @type {Array.<Command>}\n     * @private\n     */\n    this._undoStack = [];\n\n    /**\n     * Redo stack\n     * @type {Array.<Command>}\n     * @private\n     */\n    this._redoStack = [];\n\n    /**\n     * Lock-flag for executing command\n     * @type {boolean}\n     * @private\n     */\n    this._isLocked = false;\n\n    this._isSilent = false;\n  }\n\n  /**\n   * Invoke command execution\n   * @param {Command} command - Command\n   * @param {boolean} [isRedo=false] - check if command is redo\n   * @returns {Promise}\n   * @private\n   */\n  _invokeExecution(command, isRedo = false) {\n    this.lock();\n\n    let { args } = command;\n    if (!args) {\n      args = [];\n    }\n\n    return command\n      .execute(...args)\n      .then((value) => {\n        if (!this._isSilent) {\n          this.pushUndoStack(command);\n\n          this.fire(isRedo ? eventNames.AFTER_REDO : eventNames.EXECUTE_COMMAND, command);\n        }\n        this.unlock();\n        if (isFunction(command.executeCallback)) {\n          command.executeCallback(value);\n        }\n\n        return value;\n      })\n      ['catch']((message) => {\n        this.unlock();\n\n        return Promise.reject(message);\n      });\n  }\n\n  /**\n   * Invoke command undo\n   * @param {Command} command - Command\n   * @returns {Promise}\n   * @private\n   */\n  _invokeUndo(command) {\n    this.lock();\n\n    let { args } = command;\n    if (!args) {\n      args = [];\n    }\n\n    return command\n      .undo(...args)\n      .then((value) => {\n        this.pushRedoStack(command);\n        this.fire(eventNames.AFTER_UNDO, command);\n        this.unlock();\n        if (isFunction(command.undoCallback)) {\n          command.undoCallback(value);\n        }\n\n        return value;\n      })\n      ['catch']((message) => {\n        this.unlock();\n\n        return Promise.reject(message);\n      });\n  }\n\n  /**\n   * fire REDO_STACK_CHANGED event\n   * @private\n   */\n  _fireRedoStackChanged() {\n    this.fire(eventNames.REDO_STACK_CHANGED, this._redoStack.length);\n  }\n\n  /**\n   * fire UNDO_STACK_CHANGED event\n   * @private\n   */\n  _fireUndoStackChanged() {\n    this.fire(eventNames.UNDO_STACK_CHANGED, this._undoStack.length);\n  }\n\n  /**\n   * Lock this invoker\n   */\n  lock() {\n    this._isLocked = true;\n  }\n\n  /**\n   * Unlock this invoker\n   */\n  unlock() {\n    this._isLocked = false;\n  }\n\n  executeSilent(...args) {\n    this._isSilent = true;\n\n    return this.execute(...args, this._isSilent).then(() => {\n      this._isSilent = false;\n    });\n  }\n\n  /**\n   * Invoke command\n   * Store the command to the undoStack\n   * Clear the redoStack\n   * @param {String} commandName - Command name\n   * @param {...*} args - Arguments for creating command\n   * @returns {Promise}\n   */\n  execute(...args) {\n    if (this._isLocked) {\n      return Promise.reject(rejectMessages.isLock);\n    }\n\n    let [command] = args;\n    if (isString(command)) {\n      command = commandFactory.create(...args);\n    }\n\n    return this._invokeExecution(command).then((value) => {\n      this.clearRedoStack();\n\n      return value;\n    });\n  }\n\n  /**\n   * Undo command\n   * @returns {Promise}\n   */\n  undo() {\n    let command = this._undoStack.pop();\n    let promise;\n    let message = '';\n\n    if (command && this._isLocked) {\n      this.pushUndoStack(command, true);\n      command = null;\n    }\n    if (command) {\n      if (this.isEmptyUndoStack()) {\n        this._fireUndoStackChanged();\n      }\n      promise = this._invokeUndo(command);\n    } else {\n      message = rejectMessages.undo;\n      if (this._isLocked) {\n        message = `${message} Because ${rejectMessages.isLock}`;\n      }\n      promise = Promise.reject(message);\n    }\n\n    return promise;\n  }\n\n  /**\n   * Redo command\n   * @returns {Promise}\n   */\n  redo() {\n    let command = this._redoStack.pop();\n    let promise;\n    let message = '';\n\n    if (command && this._isLocked) {\n      this.pushRedoStack(command, true);\n      command = null;\n    }\n    if (command) {\n      if (this.isEmptyRedoStack()) {\n        this._fireRedoStackChanged();\n      }\n      promise = this._invokeExecution(command, true);\n    } else {\n      message = rejectMessages.redo;\n      if (this._isLocked) {\n        message = `${message} Because ${rejectMessages.isLock}`;\n      }\n      promise = Promise.reject(message);\n    }\n\n    return promise;\n  }\n\n  /**\n   * Push undo stack\n   * @param {Command} command - command\n   * @param {boolean} [isSilent] - Fire event or not\n   */\n  pushUndoStack(command, isSilent) {\n    this._undoStack.push(command);\n    if (!isSilent) {\n      this._fireUndoStackChanged();\n    }\n  }\n\n  /**\n   * Push redo stack\n   * @param {Command} command - command\n   * @param {boolean} [isSilent] - Fire event or not\n   */\n  pushRedoStack(command, isSilent) {\n    this._redoStack.push(command);\n    if (!isSilent) {\n      this._fireRedoStackChanged();\n    }\n  }\n\n  /**\n   * Return whether the redoStack is empty\n   * @returns {boolean}\n   */\n  isEmptyRedoStack() {\n    return this._redoStack.length === 0;\n  }\n\n  /**\n   * Return whether the undoStack is empty\n   * @returns {boolean}\n   */\n  isEmptyUndoStack() {\n    return this._undoStack.length === 0;\n  }\n\n  /**\n   * Clear undoStack\n   */\n  clearUndoStack() {\n    if (!this.isEmptyUndoStack()) {\n      this._undoStack = [];\n      this._fireUndoStackChanged();\n    }\n  }\n\n  /**\n   * Clear redoStack\n   */\n  clearRedoStack() {\n    if (!this.isEmptyRedoStack()) {\n      this._redoStack = [];\n      this._fireRedoStackChanged();\n    }\n  }\n}\n\nCustomEvents.mixin(Invoker);\n\nexport default Invoker;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Command interface\n */\nimport snippet from '../codeSnippet';\nimport errorMessage from '@/factory/errorMessage';\n\nconst createMessage = errorMessage.create;\nconst errorTypes = errorMessage.types;\n\n/**\n * Command class\n * @class\n * @param {{name:function, execute: function, undo: function,\n *          executeCallback: function, undoCallback: function}} actions - Command actions\n * @param {Array} args - passing arguments on execute, undo\n * @ignore\n */\nclass Command {\n  constructor(actions, args) {\n    /**\n     * command name\n     * @type {string}\n     */\n    this.name = actions.name;\n\n    /**\n     * arguments\n     * @type {Array}\n     */\n    this.args = args;\n\n    /**\n     * Execute function\n     * @type {function}\n     */\n    this.execute = actions.execute;\n\n    /**\n     * Undo function\n     * @type {function}\n     */\n    this.undo = actions.undo;\n\n    /**\n     * executeCallback\n     * @type {function}\n     */\n    this.executeCallback = actions.executeCallback || null;\n\n    /**\n     * undoCallback\n     * @type {function}\n     */\n    this.undoCallback = actions.undoCallback || null;\n\n    /**\n     * data for undo\n     * @type {Object}\n     */\n    this.undoData = {};\n  }\n\n  /**\n   * Execute action\n   * @param {Object.<string, Component>} compMap - Components injection\n   * @abstract\n   */\n  execute() {\n    throw new Error(createMessage(errorTypes.UN_IMPLEMENTATION, 'execute'));\n  }\n\n  /**\n   * Undo action\n   * @param {Object.<string, Component>} compMap - Components injection\n   * @abstract\n   */\n  undo() {\n    throw new Error(createMessage(errorTypes.UN_IMPLEMENTATION, 'undo'));\n  }\n\n  /**\n   * command for redo if undoData exists\n   * @returns {boolean} isRedo\n   */\n  get isRedo() {\n    return Object.keys(this.undoData).length > 0;\n  }\n\n  /**\n   * Set undoData action\n   * @param {Object} undoData - maked undo data\n   * @param {Object} cachedUndoDataForSilent - cached undo data\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Object} cachedUndoDataForSilent\n   */\n  setUndoData(undoData, cachedUndoDataForSilent, isSilent) {\n    if (cachedUndoDataForSilent) {\n      undoData = cachedUndoDataForSilent;\n    }\n\n    if (!isSilent) {\n      snippet.extend(this.undoData, undoData);\n      cachedUndoDataForSilent = null;\n    } else if (!cachedUndoDataForSilent) {\n      cachedUndoDataForSilent = undoData;\n    }\n\n    return cachedUndoDataForSilent;\n  }\n\n  /**\n   * Attach execute callabck\n   * @param {function} callback - Callback after execution\n   * @returns {Command} this\n   */\n  setExecuteCallback(callback) {\n    this.executeCallback = callback;\n\n    return this;\n  }\n\n  /**\n   * Attach undo callback\n   * @param {function} callback - Callback after undo\n   * @returns {Command} this\n   */\n  setUndoCallback(callback) {\n    this.undoCallback = callback;\n\n    return this;\n  }\n}\n\nexport default Command;\n","var parent = require('../../es/promise');\nrequire('../../modules/esnext.aggregate-error');\n// TODO: Remove from `core-js@4`\nrequire('../../modules/esnext.promise.all-settled');\nrequire('../../modules/esnext.promise.try');\nrequire('../../modules/esnext.promise.any');\n\nmodule.exports = parent;\n","require('../../modules/es.object.to-string');\nrequire('../../modules/es.string.iterator');\nrequire('../../modules/web.dom-collections.iterator');\nrequire('../../modules/es.promise');\nrequire('../../modules/es.promise.all-settled');\nrequire('../../modules/es.promise.finally');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Promise;\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","require('./es.array.iterator');\nvar DOMIterables = require('../internals/dom-iterables');\nvar global = require('../internals/global');\nvar classof = require('../internals/classof');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype && classof(CollectionPrototype) !== TO_STRING_TAG) {\n    createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n  }\n  Iterators[COLLECTION_NAME] = Iterators.Array;\n}\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.github.io/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.github.io/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.github.io/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","module.exports = function () { /* empty */ };\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar setSpecies = require('../internals/set-species');\nvar isObject = require('../internals/is-object');\nvar aFunction = require('../internals/a-function');\nvar anInstance = require('../internals/an-instance');\nvar classof = require('../internals/classof-raw');\nvar inspectSource = require('../internals/inspect-source');\nvar iterate = require('../internals/iterate');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar speciesConstructor = require('../internals/species-constructor');\nvar task = require('../internals/task').set;\nvar microtask = require('../internals/microtask');\nvar promiseResolve = require('../internals/promise-resolve');\nvar hostReportErrors = require('../internals/host-report-errors');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar InternalStateModule = require('../internals/internal-state');\nvar isForced = require('../internals/is-forced');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\nvar PROMISE = 'Promise';\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar PromiseConstructor = NativePromise;\nvar TypeError = global.TypeError;\nvar document = global.document;\nvar process = global.process;\nvar $fetch = getBuiltIn('fetch');\nvar newPromiseCapability = newPromiseCapabilityModule.f;\nvar newGenericPromiseCapability = newPromiseCapability;\nvar IS_NODE = classof(process) == 'process';\nvar DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\n\nvar FORCED = isForced(PROMISE, function () {\n  var GLOBAL_CORE_JS_PROMISE = inspectSource(PromiseConstructor) !== String(PromiseConstructor);\n  if (!GLOBAL_CORE_JS_PROMISE) {\n    // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n    // We can't detect it synchronously, so just check versions\n    if (V8_VERSION === 66) return true;\n    // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    if (!IS_NODE && typeof PromiseRejectionEvent != 'function') return true;\n  }\n  // We need Promise#finally in the pure version for preventing prototype pollution\n  if (IS_PURE && !PromiseConstructor.prototype['finally']) return true;\n  // We can't use @@species feature detection in V8 since it causes\n  // deoptimization and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if (V8_VERSION >= 51 && /native code/.test(PromiseConstructor)) return false;\n  // Detect correctness of subclassing with @@species support\n  var promise = PromiseConstructor.resolve(1);\n  var FakePromise = function (exec) {\n    exec(function () { /* empty */ }, function () { /* empty */ });\n  };\n  var constructor = promise.constructor = {};\n  constructor[SPECIES] = FakePromise;\n  return !(promise.then(function () { /* empty */ }) instanceof FakePromise);\n});\n\nvar INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {\n  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });\n});\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\n\nvar notify = function (promise, state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  var chain = state.reactions;\n  microtask(function () {\n    var value = state.value;\n    var ok = state.state == FULFILLED;\n    var index = 0;\n    // variable length - can't use forEach\n    while (chain.length > index) {\n      var reaction = chain[index++];\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (state.rejection === UNHANDLED) onHandleUnhandled(promise, state);\n            state.rejection = HANDLED;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // can throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (error) {\n        if (domain && !exited) domain.exit();\n        reject(error);\n      }\n    }\n    state.reactions = [];\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(promise, state);\n  });\n};\n\nvar dispatchEvent = function (name, promise, reason) {\n  var event, handler;\n  if (DISPATCH_EVENT) {\n    event = document.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    global.dispatchEvent(event);\n  } else event = { promise: promise, reason: reason };\n  if (handler = global['on' + name]) handler(event);\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function (promise, state) {\n  task.call(global, function () {\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n    if (IS_UNHANDLED) {\n      result = perform(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function (state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function (promise, state) {\n  task.call(global, function () {\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind = function (fn, promise, state, unwrap) {\n  return function (value) {\n    fn(promise, state, value, unwrap);\n  };\n};\n\nvar internalReject = function (promise, state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(promise, state, true);\n};\n\nvar internalResolve = function (promise, state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n    if (then) {\n      microtask(function () {\n        var wrapper = { done: false };\n        try {\n          then.call(value,\n            bind(internalResolve, promise, wrapper, state),\n            bind(internalReject, promise, wrapper, state)\n          );\n        } catch (error) {\n          internalReject(promise, wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(promise, state, false);\n    }\n  } catch (error) {\n    internalReject(promise, { done: false }, error, state);\n  }\n};\n\n// constructor polyfill\nif (FORCED) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromiseConstructor, PROMISE);\n    aFunction(executor);\n    Internal.call(this);\n    var state = getInternalState(this);\n    try {\n      executor(bind(internalResolve, this, state), bind(internalReject, this, state));\n    } catch (error) {\n      internalReject(this, state, error);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: [],\n      rejection: false,\n      state: PENDING,\n      value: undefined\n    });\n  };\n  Internal.prototype = redefineAll(PromiseConstructor.prototype, {\n    // `Promise.prototype.then` method\n    // https://tc39.github.io/ecma262/#sec-promise.prototype.then\n    then: function then(onFulfilled, onRejected) {\n      var state = getInternalPromiseState(this);\n      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = IS_NODE ? process.domain : undefined;\n      state.parent = true;\n      state.reactions.push(reaction);\n      if (state.state != PENDING) notify(this, state, false);\n      return reaction.promise;\n    },\n    // `Promise.prototype.catch` method\n    // https://tc39.github.io/ecma262/#sec-promise.prototype.catch\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    var state = getInternalState(promise);\n    this.promise = promise;\n    this.resolve = bind(internalResolve, promise, state);\n    this.reject = bind(internalReject, promise, state);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === PromiseConstructor || C === PromiseWrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n\n  if (!IS_PURE && typeof NativePromise == 'function') {\n    nativeThen = NativePromise.prototype.then;\n\n    // wrap native Promise#then for native async functions\n    redefine(NativePromise.prototype, 'then', function then(onFulfilled, onRejected) {\n      var that = this;\n      return new PromiseConstructor(function (resolve, reject) {\n        nativeThen.call(that, resolve, reject);\n      }).then(onFulfilled, onRejected);\n    // https://github.com/zloirock/core-js/issues/640\n    }, { unsafe: true });\n\n    // wrap fetch result\n    if (typeof $fetch == 'function') $({ global: true, enumerable: true, forced: true }, {\n      // eslint-disable-next-line no-unused-vars\n      fetch: function fetch(input /* , init */) {\n        return promiseResolve(PromiseConstructor, $fetch.apply(global, arguments));\n      }\n    });\n  }\n}\n\n$({ global: true, wrap: true, forced: FORCED }, {\n  Promise: PromiseConstructor\n});\n\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\nsetSpecies(PROMISE);\n\nPromiseWrapper = getBuiltIn(PROMISE);\n\n// statics\n$({ target: PROMISE, stat: true, forced: FORCED }, {\n  // `Promise.reject` method\n  // https://tc39.github.io/ecma262/#sec-promise.reject\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    capability.reject.call(undefined, r);\n    return capability.promise;\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {\n  // `Promise.resolve` method\n  // https://tc39.github.io/ecma262/#sec-promise.resolve\n  resolve: function resolve(x) {\n    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {\n  // `Promise.all` method\n  // https://tc39.github.io/ecma262/#sec-promise.all\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        $promiseResolve.call(C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  },\n  // `Promise.race` method\n  // https://tc39.github.io/ecma262/#sec-promise.race\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      iterate(iterable, function (promise) {\n        $promiseResolve.call(C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","var redefine = require('../internals/redefine');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) {\n    if (options && options.unsafe && target[key]) target[key] = src[key];\n    else redefine(target, key, src[key], options);\n  } return target;\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","module.exports = function (it, Constructor, name) {\n  if (!(it instanceof Constructor)) {\n    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var anObject = require('../internals/an-object');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (error) {\n    var returnMethod = iterator['return'];\n    if (returnMethod !== undefined) anObject(returnMethod.call(iterator));\n    throw error;\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar classof = require('../internals/classof-raw');\nvar macrotask = require('../internals/task').set;\nvar IS_IOS = require('../internals/engine-is-ios');\n\nvar MutationObserver = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar IS_NODE = classof(process) == 'process';\n// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`\nvar queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');\nvar queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;\n\nvar flush, head, last, notify, toggle, node, promise, then;\n\n// modern engines have queueMicrotask method\nif (!queueMicrotask) {\n  flush = function () {\n    var parent, fn;\n    if (IS_NODE && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (error) {\n        if (head) notify();\n        else last = undefined;\n        throw error;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (IS_NODE) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339\n  } else if (MutationObserver && !IS_IOS) {\n    toggle = true;\n    node = document.createTextNode('');\n    new MutationObserver(flush).observe(node, { characterData: true });\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    promise = Promise.resolve(undefined);\n    then = promise.then;\n    notify = function () {\n      then.call(promise, flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n}\n\nmodule.exports = queueMicrotask || function (fn) {\n  var task = { fn: fn, next: undefined };\n  if (last) last.next = task;\n  if (!head) {\n    head = task;\n    notify();\n  } last = task;\n};\n","var global = require('../internals/global');\n\nmodule.exports = function (a, b) {\n  var console = global.console;\n  if (console && console.error) {\n    arguments.length === 1 ? console.error(a) : console.error(a, b);\n  }\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar redefine = require('../internals/redefine');\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromise && fails(function () {\n  NativePromise.prototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.github.io/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = typeof onFinally == 'function';\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// patch native Promise.prototype for native async functions\nif (!IS_PURE && typeof NativePromise == 'function' && !NativePromise.prototype['finally']) {\n  redefine(NativePromise.prototype, 'finally', getBuiltIn('Promise').prototype['finally']);\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar iterate = require('../internals/iterate');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar getInternalAggregateErrorState = InternalStateModule.getterFor('AggregateError');\n\nvar $AggregateError = function AggregateError(errors, message) {\n  var that = this;\n  if (!(that instanceof $AggregateError)) return new $AggregateError(errors, message);\n  if (setPrototypeOf) {\n    that = setPrototypeOf(new Error(message), getPrototypeOf(that));\n  }\n  var errorsArray = [];\n  iterate(errors, errorsArray.push, errorsArray);\n  if (DESCRIPTORS) setInternalState(that, { errors: errorsArray, type: 'AggregateError' });\n  else that.errors = errorsArray;\n  if (message !== undefined) createNonEnumerableProperty(that, 'message', String(message));\n  return that;\n};\n\n$AggregateError.prototype = create(Error.prototype, {\n  constructor: createPropertyDescriptor(5, $AggregateError),\n  message: createPropertyDescriptor(5, ''),\n  name: createPropertyDescriptor(5, 'AggregateError')\n});\n\nif (DESCRIPTORS) defineProperty.f($AggregateError.prototype, 'errors', {\n  get: function () {\n    return getInternalAggregateErrorState(this).errors;\n  },\n  configurable: true\n});\n\n$({ global: true }, {\n  AggregateError: $AggregateError\n});\n","// TODO: Remove from `core-js@4`\nrequire('./es.promise.all-settled.js');\n","'use strict';\nvar $ = require('../internals/export');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\n\n// `Promise.try` method\n// https://github.com/tc39/proposal-promise-try\n$({ target: 'Promise', stat: true }, {\n  'try': function (callbackfn) {\n    var promiseCapability = newPromiseCapabilityModule.f(this);\n    var result = perform(callbackfn);\n    (result.error ? promiseCapability.reject : promiseCapability.resolve)(result.value);\n    return promiseCapability.promise;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar getBuiltIn = require('../internals/get-built-in');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar iterate = require('../internals/iterate');\n\nvar PROMISE_ANY_ERROR = 'No one promise resolved';\n\n// `Promise.any` method\n// https://github.com/tc39/proposal-promise-any\n$({ target: 'Promise', stat: true }, {\n  any: function any(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var promiseResolve = aFunction(C.resolve);\n      var errors = [];\n      var counter = 0;\n      var remaining = 1;\n      var alreadyResolved = false;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyRejected = false;\n        errors.push(undefined);\n        remaining++;\n        promiseResolve.call(C, promise).then(function (value) {\n          if (alreadyRejected || alreadyResolved) return;\n          alreadyResolved = true;\n          resolve(value);\n        }, function (e) {\n          if (alreadyRejected || alreadyResolved) return;\n          alreadyRejected = true;\n          errors[index] = e;\n          --remaining || reject(new (getBuiltIn('AggregateError'))(errors, PROMISE_ANY_ERROR));\n        });\n      });\n      --remaining || reject(new (getBuiltIn('AggregateError'))(errors, PROMISE_ANY_ERROR));\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","import { extend } from './codeSnippet';\nimport Imagetracer from '@/helper/imagetracer';\nimport { isSupportFileApi, base64ToBlob, toInteger, isEmptyCropzone } from '@/util';\nimport { eventNames, historyNames, drawingModes, drawingMenuNames, zoomModes } from '@/consts';\n\nexport default {\n  /**\n   * Get ui actions\n   * @returns {Object} actions for ui\n   * @private\n   */\n  getActions() {\n    return {\n      main: this._mainAction(),\n      shape: this._shapeAction(),\n      crop: this._cropAction(),\n      flip: this._flipAction(),\n      rotate: this._rotateAction(),\n      text: this._textAction(),\n      mask: this._maskAction(),\n      draw: this._drawAction(),\n      icon: this._iconAction(),\n      filter: this._filterAction(),\n      history: this._historyAction(),\n    };\n  },\n\n  /**\n   * Main Action\n   * @returns {Object} actions for ui main\n   * @private\n   */\n  _mainAction() {\n    const exitCropOnAction = () => {\n      if (this.ui.submenu === 'crop') {\n        this.stopDrawingMode();\n        this.ui.changeMenu('crop');\n      }\n    };\n    const setAngleRangeBarOnAction = (angle) => {\n      if (this.ui.submenu === 'rotate') {\n        this.ui.rotate.setRangeBarAngle('setAngle', angle);\n      }\n    };\n    const setFilterStateRangeBarOnAction = (filterOptions) => {\n      if (this.ui.submenu === 'filter') {\n        this.ui.filter.setFilterState(filterOptions);\n      }\n    };\n    const onEndUndoRedo = (result) => {\n      setAngleRangeBarOnAction(result);\n      setFilterStateRangeBarOnAction(result);\n\n      return result;\n    };\n    const toggleZoomMode = () => {\n      const zoomMode = this._graphics.getZoomMode();\n\n      this.stopDrawingMode();\n      if (zoomMode !== zoomModes.ZOOM) {\n        this.startDrawingMode(drawingModes.ZOOM);\n        this._graphics.startZoomInMode();\n      } else {\n        this._graphics.endZoomInMode();\n      }\n    };\n    const toggleHandMode = () => {\n      const zoomMode = this._graphics.getZoomMode();\n\n      this.stopDrawingMode();\n      if (zoomMode !== zoomModes.HAND) {\n        this.startDrawingMode(drawingModes.ZOOM);\n        this._graphics.startHandMode();\n      } else {\n        this._graphics.endHandMode();\n      }\n    };\n    const initFilterState = () => {\n      if (this.ui.filter) {\n        this.ui.filter.initFilterCheckBoxState();\n      }\n    };\n\n    return extend(\n      {\n        initLoadImage: (imagePath, imageName) =>\n          this.loadImageFromURL(imagePath, imageName).then((sizeValue) => {\n            exitCropOnAction();\n            this.ui.initializeImgUrl = imagePath;\n            this.ui.resizeEditor({ imageSize: sizeValue });\n            this.clearUndoStack();\n            this._invoker.fire(eventNames.EXECUTE_COMMAND, historyNames.LOAD_IMAGE);\n          }),\n        undo: () => {\n          if (!this.isEmptyUndoStack()) {\n            exitCropOnAction();\n            this.deactivateAll();\n            this.undo().then(onEndUndoRedo);\n          }\n        },\n        redo: () => {\n          if (!this.isEmptyRedoStack()) {\n            exitCropOnAction();\n            this.deactivateAll();\n            this.redo().then(onEndUndoRedo);\n          }\n        },\n        reset: () => {\n          exitCropOnAction();\n          this.loadImageFromURL(this.ui.initializeImgUrl, 'resetImage').then((sizeValue) => {\n            exitCropOnAction();\n            initFilterState();\n            this.ui.resizeEditor({ imageSize: sizeValue });\n            this.clearUndoStack();\n            this._initHistory();\n          });\n        },\n        delete: () => {\n          this.ui.changeHelpButtonEnabled('delete', false);\n          exitCropOnAction();\n          this.removeActiveObject();\n          this.activeObjectId = null;\n        },\n        deleteAll: () => {\n          exitCropOnAction();\n          this.clearObjects();\n          this.ui.changeHelpButtonEnabled('delete', false);\n          this.ui.changeHelpButtonEnabled('deleteAll', false);\n        },\n        load: (file) => {\n          if (!isSupportFileApi()) {\n            alert('This browser does not support file-api');\n          }\n\n          this.ui.initializeImgUrl = URL.createObjectURL(file);\n          this.loadImageFromFile(file)\n            .then((sizeValue) => {\n              exitCropOnAction();\n              initFilterState();\n              this.clearUndoStack();\n              this.ui.activeMenuEvent();\n              this.ui.resizeEditor({ imageSize: sizeValue });\n              this._clearHistory();\n              this._invoker.fire(eventNames.EXECUTE_COMMAND, historyNames.LOAD_IMAGE);\n            })\n            ['catch']((message) => Promise.reject(message));\n        },\n        download: () => {\n          const dataURL = this.toDataURL();\n          let imageName = this.getImageName();\n          let blob, type, w;\n\n          if (isSupportFileApi() && window.saveAs) {\n            blob = base64ToBlob(dataURL);\n            type = blob.type.split('/')[1];\n            if (imageName.split('.').pop() !== type) {\n              imageName += `.${type}`;\n            }\n            saveAs(blob, imageName); // eslint-disable-line\n          } else {\n            w = window.open();\n            w.document.body.innerHTML = `<img src='${dataURL}'>`;\n          }\n        },\n        history: (event) => {\n          this.ui.toggleHistoryMenu(event);\n        },\n        zoomIn: () => {\n          this.ui.toggleZoomButtonStatus('zoomIn');\n          this.deactivateAll();\n          toggleZoomMode();\n        },\n        zoomOut: () => {\n          this._graphics.zoomOut();\n        },\n        hand: () => {\n          this.ui.offZoomInButtonStatus();\n          this.ui.toggleZoomButtonStatus('hand');\n          this.deactivateAll();\n          toggleHandMode();\n        },\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Icon Action\n   * @returns {Object} actions for ui icon\n   * @private\n   */\n  _iconAction() {\n    return extend(\n      {\n        changeColor: (color) => {\n          if (this.activeObjectId) {\n            this.changeIconColor(this.activeObjectId, color);\n          }\n        },\n        addIcon: (iconType, iconColor) => {\n          this.startDrawingMode('ICON');\n          this.setDrawingIcon(iconType, iconColor);\n        },\n        cancelAddIcon: () => {\n          this.ui.icon.clearIconType();\n          this.changeSelectableAll(true);\n          this.changeCursor('default');\n          this.stopDrawingMode();\n        },\n        registerDefaultIcons: (type, path) => {\n          const iconObj = {};\n          iconObj[type] = path;\n          this.registerIcons(iconObj);\n        },\n        registerCustomIcon: (imgUrl, file) => {\n          const imagetracer = new Imagetracer();\n          imagetracer.imageToSVG(\n            imgUrl,\n            (svgstr) => {\n              const [, svgPath] = svgstr.match(/path[^>]*d=\"([^\"]*)\"/);\n              const iconObj = {};\n              iconObj[file.name] = svgPath;\n              this.registerIcons(iconObj);\n              this.addIcon(file.name, {\n                left: 100,\n                top: 100,\n              });\n            },\n            Imagetracer.tracerDefaultOption()\n          );\n        },\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Draw Action\n   * @returns {Object} actions for ui draw\n   * @private\n   */\n  _drawAction() {\n    return extend(\n      {\n        setDrawMode: (type, settings) => {\n          this.stopDrawingMode();\n          if (type === 'free') {\n            this.startDrawingMode('FREE_DRAWING', settings);\n          } else {\n            this.startDrawingMode('LINE_DRAWING', settings);\n          }\n        },\n        setColor: (color) => {\n          this.setBrush({\n            color,\n          });\n        },\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Mask Action\n   * @returns {Object} actions for ui mask\n   * @private\n   */\n  _maskAction() {\n    return extend(\n      {\n        loadImageFromURL: (imgUrl, file) => {\n          return this.loadImageFromURL(this.toDataURL(), 'FilterImage').then(() => {\n            this.addImageObject(imgUrl).then(() => {\n              URL.revokeObjectURL(file);\n            });\n            this._invoker.fire(eventNames.EXECUTE_COMMAND, historyNames.LOAD_MASK_IMAGE);\n          });\n        },\n        applyFilter: () => {\n          this.applyFilter('mask', {\n            maskObjId: this.activeObjectId,\n          });\n        },\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Text Action\n   * @returns {Object} actions for ui text\n   * @private\n   */\n  _textAction() {\n    return extend(\n      {\n        changeTextStyle: (styleObj, isSilent) => {\n          if (this.activeObjectId) {\n            this.changeTextStyle(this.activeObjectId, styleObj, isSilent);\n          }\n        },\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Rotate Action\n   * @returns {Object} actions for ui rotate\n   * @private\n   */\n  _rotateAction() {\n    return extend(\n      {\n        rotate: (angle, isSilent) => {\n          this.rotate(angle, isSilent);\n          this.ui.resizeEditor();\n          this.ui.rotate.setRangeBarAngle('rotate', angle);\n        },\n        setAngle: (angle, isSilent) => {\n          this.setAngle(angle, isSilent);\n          this.ui.resizeEditor();\n          this.ui.rotate.setRangeBarAngle('setAngle', angle);\n        },\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Shape Action\n   * @returns {Object} actions for ui shape\n   * @private\n   */\n  _shapeAction() {\n    return extend(\n      {\n        changeShape: (changeShapeObject, isSilent) => {\n          if (this.activeObjectId) {\n            this.changeShape(this.activeObjectId, changeShapeObject, isSilent);\n          }\n        },\n        setDrawingShape: (shapeType) => {\n          this.setDrawingShape(shapeType);\n        },\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Crop Action\n   * @returns {Object} actions for ui crop\n   * @private\n   */\n  _cropAction() {\n    return extend(\n      {\n        crop: () => {\n          const cropRect = this.getCropzoneRect();\n          if (cropRect && !isEmptyCropzone(cropRect)) {\n            this.crop(cropRect)\n              .then(() => {\n                this.stopDrawingMode();\n                this.ui.resizeEditor();\n                this.ui.changeMenu('crop');\n                this._invoker.fire(eventNames.EXECUTE_COMMAND, historyNames.CROP);\n              })\n              ['catch']((message) => Promise.reject(message));\n          }\n        },\n        cancel: () => {\n          this.stopDrawingMode();\n          this.ui.changeMenu('crop');\n        },\n        /* eslint-disable */\n        preset: (presetType) => {\n          switch (presetType) {\n            case 'preset-square':\n              this.setCropzoneRect(1 / 1);\n              break;\n            case 'preset-3-2':\n              this.setCropzoneRect(3 / 2);\n              break;\n            case 'preset-4-3':\n              this.setCropzoneRect(4 / 3);\n              break;\n            case 'preset-5-4':\n              this.setCropzoneRect(5 / 4);\n              break;\n            case 'preset-7-5':\n              this.setCropzoneRect(7 / 5);\n              break;\n            case 'preset-16-9':\n              this.setCropzoneRect(16 / 9);\n              break;\n            default:\n              this.setCropzoneRect();\n              this.ui.crop.changeApplyButtonStatus(false);\n              break;\n          }\n        },\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Flip Action\n   * @returns {Object} actions for ui flip\n   * @private\n   */\n  _flipAction() {\n    return extend(\n      {\n        flip: (flipType) => this[flipType](),\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Filter Action\n   * @returns {Object} actions for ui filter\n   * @private\n   */\n  _filterAction() {\n    return extend(\n      {\n        applyFilter: (applying, type, options, isSilent) => {\n          if (applying) {\n            this.applyFilter(type, options, isSilent);\n          } else if (this.hasFilter(type)) {\n            this.removeFilter(type);\n          }\n        },\n      },\n      this._commonAction()\n    );\n  },\n\n  /**\n   * Image Editor Event Observer\n   */\n  setReAction() {\n    this.on({\n      undoStackChanged: (length) => {\n        if (length) {\n          this.ui.changeHelpButtonEnabled('undo', true);\n          this.ui.changeHelpButtonEnabled('reset', true);\n        } else {\n          this.ui.changeHelpButtonEnabled('undo', false);\n          this.ui.changeHelpButtonEnabled('reset', false);\n        }\n        this.ui.resizeEditor();\n      },\n      redoStackChanged: (length) => {\n        if (length) {\n          this.ui.changeHelpButtonEnabled('redo', true);\n        } else {\n          this.ui.changeHelpButtonEnabled('redo', false);\n        }\n        this.ui.resizeEditor();\n      },\n      /* eslint-disable complexity */\n      objectActivated: (obj) => {\n        this.activeObjectId = obj.id;\n\n        this.ui.changeHelpButtonEnabled('delete', true);\n        this.ui.changeHelpButtonEnabled('deleteAll', true);\n\n        if (obj.type === 'cropzone') {\n          this.ui.crop.changeApplyButtonStatus(true);\n        } else if (['rect', 'circle', 'triangle'].indexOf(obj.type) > -1) {\n          this.stopDrawingMode();\n          if (this.ui.submenu !== 'shape') {\n            this.ui.changeMenu('shape', false, false);\n          }\n          this.ui.shape.setShapeStatus({\n            strokeColor: obj.stroke,\n            strokeWidth: obj.strokeWidth,\n            fillColor: obj.fill,\n          });\n\n          this.ui.shape.setMaxStrokeValue(Math.min(obj.width, obj.height));\n        } else if (obj.type === 'path' || obj.type === 'line') {\n          if (this.ui.submenu !== 'draw') {\n            this.ui.changeMenu('draw', false, false);\n            this.ui.draw.changeStandbyMode();\n          }\n        } else if (['i-text', 'text'].indexOf(obj.type) > -1) {\n          if (this.ui.submenu !== 'text') {\n            this.ui.changeMenu('text', false, false);\n          }\n\n          this.ui.text.setTextStyleStateOnAction(obj);\n        } else if (obj.type === 'icon') {\n          this.stopDrawingMode();\n          if (this.ui.submenu !== 'icon') {\n            this.ui.changeMenu('icon', false, false);\n          }\n          this.ui.icon.setIconPickerColor(obj.fill);\n        }\n      },\n      /* eslint-enable complexity */\n      addText: (pos) => {\n        const { textColor: fill, fontSize, fontStyle, fontWeight, underline } = this.ui.text;\n        const fontFamily = 'Noto Sans';\n\n        this.addText('Double Click', {\n          position: pos.originPosition,\n          styles: { fill, fontSize, fontFamily, fontStyle, fontWeight, underline },\n        }).then(() => {\n          this.changeCursor('default');\n        });\n      },\n      addObjectAfter: (obj) => {\n        if (obj.type === 'icon') {\n          this.ui.icon.changeStandbyMode();\n        } else if (['rect', 'circle', 'triangle'].indexOf(obj.type) > -1) {\n          this.ui.shape.setMaxStrokeValue(Math.min(obj.width, obj.height));\n          this.ui.shape.changeStandbyMode();\n        }\n      },\n      objectScaled: (obj) => {\n        if (['i-text', 'text'].indexOf(obj.type) > -1) {\n          this.ui.text.fontSize = toInteger(obj.fontSize);\n        } else if (['rect', 'circle', 'triangle'].indexOf(obj.type) >= 0) {\n          const { width, height } = obj;\n          const strokeValue = this.ui.shape.getStrokeValue();\n\n          if (width < strokeValue) {\n            this.ui.shape.setStrokeValue(width);\n          }\n          if (height < strokeValue) {\n            this.ui.shape.setStrokeValue(height);\n          }\n        }\n      },\n      selectionCleared: () => {\n        this.activeObjectId = null;\n        if (this.ui.submenu === 'text') {\n          this.changeCursor('text');\n        } else if (this.ui.submenu !== 'draw' && this.ui.submenu !== 'crop') {\n          this.stopDrawingMode();\n        }\n      },\n    });\n  },\n\n  /**\n   * History Action\n   * @returns {Object} history actions for ui\n   * @private\n   */\n  _historyAction() {\n    return {\n      undo: (count) => this.undo(count),\n      redo: (count) => this.redo(count),\n    };\n  },\n\n  /**\n   * Common Action\n   * @returns {Object} common actions for ui\n   * @private\n   */\n  _commonAction() {\n    const { TEXT, CROPPER, SHAPE, ZOOM } = drawingModes;\n\n    return {\n      modeChange: (menu) => {\n        switch (menu) {\n          case drawingMenuNames.TEXT:\n            this._changeActivateMode(TEXT);\n            break;\n          case drawingMenuNames.CROP:\n            this.startDrawingMode(CROPPER);\n            break;\n          case drawingMenuNames.SHAPE:\n            this._changeActivateMode(SHAPE);\n            this.setDrawingShape(this.ui.shape.type, this.ui.shape.options);\n            break;\n          case drawingMenuNames.ZOOM:\n            this.startDrawingMode(ZOOM);\n            break;\n          default:\n            break;\n        }\n      },\n      deactivateAll: this.deactivateAll.bind(this),\n      changeSelectableAll: this.changeSelectableAll.bind(this),\n      discardSelection: this.discardSelection.bind(this),\n      stopDrawingMode: this.stopDrawingMode.bind(this),\n    };\n  },\n\n  /**\n   * Mixin\n   * @param {ImageEditor} ImageEditor instance\n   */\n  mixin(ImageEditor) {\n    extend(ImageEditor.prototype, this);\n  },\n};\n","/*\n  imagetracer.js version 1.2.4\n  Simple raster image tracer and vectorizer written in JavaScript.\n  andras@jankovics.net\n*/\n\n/*\n  The Unlicense / PUBLIC DOMAIN\n  This is free and unencumbered software released into the public domain.\n  Anyone is free to copy, modify, publish, use, compile, sell, or\n  distribute this software, either in source code form or as a compiled\n  binary, for any purpose, commercial or non-commercial, and by any\n  means.\n  In jurisdictions that recognize copyright laws, the author or authors\n  of this software dedicate any and all copyright interest in the\n  software to the public domain. We make this dedication for the benefit\n  of the public at large and to the detriment of our heirs and\n  successors. We intend this dedication to be an overt act of\n  relinquishment in perpetuity of all present and future rights to this\n  software under copyright law.\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n  IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n  OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n  ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n  OTHER DEALINGS IN THE SOFTWARE.\n  For more information, please refer to http://unlicense.org/\n*/\nexport default class ImageTracer {\n  static tracerDefaultOption() {\n    return {\n      pathomit: 100,\n      ltres: 0.1,\n      qtres: 1,\n\n      scale: 1,\n      strokewidth: 5,\n      viewbox: false,\n      linefilter: true,\n      desc: false,\n      rightangleenhance: false,\n      pal: [\n        {\n          r: 0,\n          g: 0,\n          b: 0,\n          a: 255,\n        },\n        {\n          r: 255,\n          g: 255,\n          b: 255,\n          a: 255,\n        },\n      ],\n    };\n  }\n  /* eslint-disable */\n  constructor() {\n    this.versionnumber = '1.2.4';\n    this.optionpresets = {\n      default: {\n        corsenabled: false,\n        ltres: 1,\n        qtres: 1,\n        pathomit: 8,\n        rightangleenhance: true,\n        colorsampling: 2,\n        numberofcolors: 16,\n        mincolorratio: 0,\n        colorquantcycles: 3,\n        layering: 0,\n        strokewidth: 1,\n        linefilter: false,\n        scale: 1,\n        roundcoords: 1,\n        viewbox: false,\n        desc: false,\n        lcpr: 0,\n        qcpr: 0,\n        blurradius: 0,\n        blurdelta: 20,\n      },\n      posterized1: {\n        colorsampling: 0,\n        numberofcolors: 2,\n      },\n      posterized2: {\n        numberofcolors: 4,\n        blurradius: 5,\n      },\n      curvy: {\n        ltres: 0.01,\n        linefilter: true,\n        rightangleenhance: false,\n      },\n      sharp: { qtres: 0.01, linefilter: false },\n      detailed: { pathomit: 0, roundcoords: 2, ltres: 0.5, qtres: 0.5, numberofcolors: 64 },\n      smoothed: { blurradius: 5, blurdelta: 64 },\n      grayscale: { colorsampling: 0, colorquantcycles: 1, numberofcolors: 7 },\n      fixedpalette: { colorsampling: 0, colorquantcycles: 1, numberofcolors: 27 },\n      randomsampling1: { colorsampling: 1, numberofcolors: 8 },\n      randomsampling2: { colorsampling: 1, numberofcolors: 64 },\n      artistic1: {\n        colorsampling: 0,\n        colorquantcycles: 1,\n        pathomit: 0,\n        blurradius: 5,\n        blurdelta: 64,\n        ltres: 0.01,\n        linefilter: true,\n        numberofcolors: 16,\n        strokewidth: 2,\n      },\n      artistic2: {\n        qtres: 0.01,\n        colorsampling: 0,\n        colorquantcycles: 1,\n        numberofcolors: 4,\n        strokewidth: 0,\n      },\n      artistic3: { qtres: 10, ltres: 10, numberofcolors: 8 },\n      artistic4: {\n        qtres: 10,\n        ltres: 10,\n        numberofcolors: 64,\n        blurradius: 5,\n        blurdelta: 256,\n        strokewidth: 2,\n      },\n      posterized3: {\n        ltres: 1,\n        qtres: 1,\n        pathomit: 20,\n        rightangleenhance: true,\n        colorsampling: 0,\n        numberofcolors: 3,\n        mincolorratio: 0,\n        colorquantcycles: 3,\n        blurradius: 3,\n        blurdelta: 20,\n        strokewidth: 0,\n        linefilter: false,\n        roundcoords: 1,\n        pal: [\n          { r: 0, g: 0, b: 100, a: 255 },\n          { r: 255, g: 255, b: 255, a: 255 },\n        ],\n      },\n    };\n\n    this.pathscan_combined_lookup = [\n      [\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n      ],\n      [\n        [0, 1, 0, -1],\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n        [0, 2, -1, 0],\n      ],\n      [\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n        [0, 1, 0, -1],\n        [0, 0, 1, 0],\n      ],\n      [\n        [0, 0, 1, 0],\n        [-1, -1, -1, -1],\n        [0, 2, -1, 0],\n        [-1, -1, -1, -1],\n      ],\n      [\n        [-1, -1, -1, -1],\n        [0, 0, 1, 0],\n        [0, 3, 0, 1],\n        [-1, -1, -1, -1],\n      ],\n      [\n        [13, 3, 0, 1],\n        [13, 2, -1, 0],\n        [7, 1, 0, -1],\n        [7, 0, 1, 0],\n      ],\n      [\n        [-1, -1, -1, -1],\n        [0, 1, 0, -1],\n        [-1, -1, -1, -1],\n        [0, 3, 0, 1],\n      ],\n      [\n        [0, 3, 0, 1],\n        [0, 2, -1, 0],\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n      ],\n      [\n        [0, 3, 0, 1],\n        [0, 2, -1, 0],\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n      ],\n      [\n        [-1, -1, -1, -1],\n        [0, 1, 0, -1],\n        [-1, -1, -1, -1],\n        [0, 3, 0, 1],\n      ],\n      [\n        [11, 1, 0, -1],\n        [14, 0, 1, 0],\n        [14, 3, 0, 1],\n        [11, 2, -1, 0],\n      ],\n      [\n        [-1, -1, -1, -1],\n        [0, 0, 1, 0],\n        [0, 3, 0, 1],\n        [-1, -1, -1, -1],\n      ],\n      [\n        [0, 0, 1, 0],\n        [-1, -1, -1, -1],\n        [0, 2, -1, 0],\n        [-1, -1, -1, -1],\n      ],\n      [\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n        [0, 1, 0, -1],\n        [0, 0, 1, 0],\n      ],\n      [\n        [0, 1, 0, -1],\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n        [0, 2, -1, 0],\n      ],\n      [\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n        [-1, -1, -1, -1],\n      ],\n    ];\n\n    this.gks = [\n      [0.27901, 0.44198, 0.27901],\n      [0.135336, 0.228569, 0.272192, 0.228569, 0.135336],\n      [0.086776, 0.136394, 0.178908, 0.195843, 0.178908, 0.136394, 0.086776],\n      [0.063327, 0.093095, 0.122589, 0.144599, 0.152781, 0.144599, 0.122589, 0.093095, 0.063327],\n      [\n        0.049692,\n        0.069304,\n        0.089767,\n        0.107988,\n        0.120651,\n        0.125194,\n        0.120651,\n        0.107988,\n        0.089767,\n        0.069304,\n        0.049692,\n      ],\n    ];\n\n    this.specpalette = [\n      { r: 0, g: 0, b: 0, a: 255 },\n      { r: 128, g: 128, b: 128, a: 255 },\n      { r: 0, g: 0, b: 128, a: 255 },\n      { r: 64, g: 64, b: 128, a: 255 },\n      { r: 192, g: 192, b: 192, a: 255 },\n      { r: 255, g: 255, b: 255, a: 255 },\n      { r: 128, g: 128, b: 192, a: 255 },\n      { r: 0, g: 0, b: 192, a: 255 },\n      { r: 128, g: 0, b: 0, a: 255 },\n      { r: 128, g: 64, b: 64, a: 255 },\n      { r: 128, g: 0, b: 128, a: 255 },\n      { r: 168, g: 168, b: 168, a: 255 },\n      { r: 192, g: 128, b: 128, a: 255 },\n      { r: 192, g: 0, b: 0, a: 255 },\n      { r: 255, g: 255, b: 255, a: 255 },\n      { r: 0, g: 128, b: 0, a: 255 },\n    ];\n  }\n\n  imageToSVG(url, callback, options) {\n    options = this.checkoptions(options);\n    this.loadImage(\n      url,\n      (canvas) => {\n        callback(this.imagedataToSVG(this.getImgdata(canvas), options));\n      },\n      options\n    );\n  }\n\n  imagedataToSVG(imgd, options) {\n    options = this.checkoptions(options);\n    const td = this.imagedataToTracedata(imgd, options);\n\n    return this.getsvgstring(td, options);\n  }\n\n  imageToTracedata(url, callback, options) {\n    options = this.checkoptions(options);\n    this.loadImage(\n      url,\n      (canvas) => {\n        callback(this.imagedataToTracedata(this.getImgdata(canvas), options));\n      },\n      options\n    );\n  }\n\n  imagedataToTracedata(imgd, options) {\n    options = this.checkoptions(options);\n    const ii = this.colorquantization(imgd, options);\n    let tracedata;\n    if (options.layering === 0) {\n      tracedata = {\n        layers: [],\n        palette: ii.palette,\n        width: ii.array[0].length - 2,\n        height: ii.array.length - 2,\n      };\n\n      for (let colornum = 0; colornum < ii.palette.length; colornum += 1) {\n        const tracedlayer = this.batchtracepaths(\n          this.internodes(\n            this.pathscan(this.layeringstep(ii, colornum), options.pathomit),\n            options\n          ),\n          options.ltres,\n          options.qtres\n        );\n        tracedata.layers.push(tracedlayer);\n      }\n    } else {\n      const ls = this.layering(ii);\n      if (options.layercontainerid) {\n        this.drawLayers(ls, this.specpalette, options.scale, options.layercontainerid);\n      }\n      const bps = this.batchpathscan(ls, options.pathomit);\n      const bis = this.batchinternodes(bps, options);\n      tracedata = {\n        layers: this.batchtracelayers(bis, options.ltres, options.qtres),\n        palette: ii.palette,\n        width: imgd.width,\n        height: imgd.height,\n      };\n    }\n\n    return tracedata;\n  }\n\n  checkoptions(options) {\n    options = options || {};\n    if (typeof options === 'string') {\n      options = options.toLowerCase();\n      if (this.optionpresets[options]) {\n        options = this.optionpresets[options];\n      } else {\n        options = {};\n      }\n    }\n    const ok = Object.keys(this.optionpresets['default']);\n    for (let k = 0; k < ok.length; k += 1) {\n      if (!options.hasOwnProperty(ok[k])) {\n        options[ok[k]] = this.optionpresets['default'][ok[k]];\n      }\n    }\n\n    return options;\n  }\n\n  colorquantization(imgd, options) {\n    const arr = [];\n    let idx = 0;\n    let cd;\n    let cdl;\n    let ci;\n    const paletteacc = [];\n    const pixelnum = imgd.width * imgd.height;\n    let i;\n    let j;\n    let k;\n    let cnt;\n    let palette;\n\n    for (j = 0; j < imgd.height + 2; j += 1) {\n      arr[j] = [];\n      for (i = 0; i < imgd.width + 2; i += 1) {\n        arr[j][i] = -1;\n      }\n    }\n    if (options.pal) {\n      palette = options.pal;\n    } else if (options.colorsampling === 0) {\n      palette = this.generatepalette(options.numberofcolors);\n    } else if (options.colorsampling === 1) {\n      palette = this.samplepalette(options.numberofcolors, imgd);\n    } else {\n      palette = this.samplepalette2(options.numberofcolors, imgd);\n    }\n    if (options.blurradius > 0) {\n      imgd = this.blur(imgd, options.blurradius, options.blurdelta);\n    }\n    for (cnt = 0; cnt < options.colorquantcycles; cnt += 1) {\n      if (cnt > 0) {\n        for (k = 0; k < palette.length; k += 1) {\n          if (paletteacc[k].n > 0) {\n            palette[k] = {\n              r: Math.floor(paletteacc[k].r / paletteacc[k].n),\n              g: Math.floor(paletteacc[k].g / paletteacc[k].n),\n              b: Math.floor(paletteacc[k].b / paletteacc[k].n),\n              a: Math.floor(paletteacc[k].a / paletteacc[k].n),\n            };\n          }\n\n          if (\n            paletteacc[k].n / pixelnum < options.mincolorratio &&\n            cnt < options.colorquantcycles - 1\n          ) {\n            palette[k] = {\n              r: Math.floor(Math.random() * 255),\n              g: Math.floor(Math.random() * 255),\n              b: Math.floor(Math.random() * 255),\n              a: Math.floor(Math.random() * 255),\n            };\n          }\n        }\n      }\n\n      for (i = 0; i < palette.length; i += 1) {\n        paletteacc[i] = { r: 0, g: 0, b: 0, a: 0, n: 0 };\n      }\n\n      for (j = 0; j < imgd.height; j += 1) {\n        for (i = 0; i < imgd.width; i += 1) {\n          idx = (j * imgd.width + i) * 4;\n\n          ci = 0;\n          cdl = 1024;\n          for (k = 0; k < palette.length; k += 1) {\n            cd =\n              Math.abs(palette[k].r - imgd.data[idx]) +\n              Math.abs(palette[k].g - imgd.data[idx + 1]) +\n              Math.abs(palette[k].b - imgd.data[idx + 2]) +\n              Math.abs(palette[k].a - imgd.data[idx + 3]);\n\n            if (cd < cdl) {\n              cdl = cd;\n              ci = k;\n            }\n          }\n\n          paletteacc[ci].r += imgd.data[idx];\n          paletteacc[ci].g += imgd.data[idx + 1];\n          paletteacc[ci].b += imgd.data[idx + 2];\n          paletteacc[ci].a += imgd.data[idx + 3];\n          paletteacc[ci].n += 1;\n\n          arr[j + 1][i + 1] = ci;\n        }\n      }\n    }\n\n    return { array: arr, palette };\n  }\n\n  samplepalette(numberofcolors, imgd) {\n    let idx;\n    const palette = [];\n    for (let i = 0; i < numberofcolors; i += 1) {\n      idx = Math.floor((Math.random() * imgd.data.length) / 4) * 4;\n      palette.push({\n        r: imgd.data[idx],\n        g: imgd.data[idx + 1],\n        b: imgd.data[idx + 2],\n        a: imgd.data[idx + 3],\n      });\n    }\n\n    return palette;\n  }\n\n  samplepalette2(numberofcolors, imgd) {\n    let idx;\n    const palette = [];\n    const ni = Math.ceil(Math.sqrt(numberofcolors));\n    const nj = Math.ceil(numberofcolors / ni);\n    const vx = imgd.width / (ni + 1);\n    const vy = imgd.height / (nj + 1);\n    for (let j = 0; j < nj; j += 1) {\n      for (let i = 0; i < ni; i += 1) {\n        if (palette.length === numberofcolors) {\n          break;\n        } else {\n          idx = Math.floor((j + 1) * vy * imgd.width + (i + 1) * vx) * 4;\n          palette.push({\n            r: imgd.data[idx],\n            g: imgd.data[idx + 1],\n            b: imgd.data[idx + 2],\n            a: imgd.data[idx + 3],\n          });\n        }\n      }\n    }\n\n    return palette;\n  }\n\n  generatepalette(numberofcolors) {\n    const palette = [];\n    let rcnt;\n    let gcnt;\n    let bcnt;\n    if (numberofcolors < 8) {\n      const graystep = Math.floor(255 / (numberofcolors - 1));\n      for (let i = 0; i < numberofcolors; i += 1) {\n        palette.push({ r: i * graystep, g: i * graystep, b: i * graystep, a: 255 });\n      }\n    } else {\n      const colorqnum = Math.floor(Math.pow(numberofcolors, 1 / 3));\n      const colorstep = Math.floor(255 / (colorqnum - 1));\n      const rndnum = numberofcolors - colorqnum * colorqnum * colorqnum;\n      for (rcnt = 0; rcnt < colorqnum; rcnt += 1) {\n        for (gcnt = 0; gcnt < colorqnum; gcnt += 1) {\n          for (bcnt = 0; bcnt < colorqnum; bcnt += 1) {\n            palette.push({ r: rcnt * colorstep, g: gcnt * colorstep, b: bcnt * colorstep, a: 255 });\n          }\n        }\n      }\n      for (rcnt = 0; rcnt < rndnum; rcnt += 1) {\n        palette.push({\n          r: Math.floor(Math.random() * 255),\n          g: Math.floor(Math.random() * 255),\n          b: Math.floor(Math.random() * 255),\n          a: Math.floor(Math.random() * 255),\n        });\n      }\n    }\n\n    return palette;\n  }\n\n  layering(ii) {\n    const layers = [];\n    let val = 0;\n    const ah = ii.array.length;\n    const aw = ii.array[0].length;\n    let n1;\n    let n2;\n    let n3;\n    let n4;\n    let n5;\n    let n6;\n    let n7;\n    let n8;\n    let i;\n    let j;\n    let k;\n    for (k = 0; k < ii.palette.length; k += 1) {\n      layers[k] = [];\n      for (j = 0; j < ah; j += 1) {\n        layers[k][j] = [];\n        for (i = 0; i < aw; i += 1) {\n          layers[k][j][i] = 0;\n        }\n      }\n    }\n    for (j = 1; j < ah - 1; j += 1) {\n      for (i = 1; i < aw - 1; i += 1) {\n        val = ii.array[j][i];\n\n        n1 = ii.array[j - 1][i - 1] === val ? 1 : 0;\n        n2 = ii.array[j - 1][i] === val ? 1 : 0;\n        n3 = ii.array[j - 1][i + 1] === val ? 1 : 0;\n        n4 = ii.array[j][i - 1] === val ? 1 : 0;\n        n5 = ii.array[j][i + 1] === val ? 1 : 0;\n        n6 = ii.array[j + 1][i - 1] === val ? 1 : 0;\n        n7 = ii.array[j + 1][i] === val ? 1 : 0;\n        n8 = ii.array[j + 1][i + 1] === val ? 1 : 0;\n\n        layers[val][j + 1][i + 1] = 1 + n5 * 2 + n8 * 4 + n7 * 8;\n        if (!n4) {\n          layers[val][j + 1][i] = 0 + 2 + n7 * 4 + n6 * 8;\n        }\n        if (!n2) {\n          layers[val][j][i + 1] = 0 + n3 * 2 + n5 * 4 + 8;\n        }\n        if (!n1) {\n          layers[val][j][i] = 0 + n2 * 2 + 4 + n4 * 8;\n        }\n      }\n    }\n\n    return layers;\n  }\n\n  layeringstep(ii, cnum) {\n    const layer = [];\n    const ah = ii.array.length;\n    const aw = ii.array[0].length;\n    let i;\n    let j;\n    for (j = 0; j < ah; j += 1) {\n      layer[j] = [];\n      for (i = 0; i < aw; i += 1) {\n        layer[j][i] = 0;\n      }\n    }\n    for (j = 1; j < ah; j += 1) {\n      for (i = 1; i < aw; i += 1) {\n        layer[j][i] =\n          (ii.array[j - 1][i - 1] === cnum ? 1 : 0) +\n          (ii.array[j - 1][i] === cnum ? 2 : 0) +\n          (ii.array[j][i - 1] === cnum ? 8 : 0) +\n          (ii.array[j][i] === cnum ? 4 : 0);\n      }\n    }\n\n    return layer;\n  }\n\n  pathscan(arr, pathomit) {\n    const paths = [];\n    let pacnt = 0;\n    let pcnt = 0;\n    let px = 0;\n    let py = 0;\n    const w = arr[0].length;\n    const h = arr.length;\n    let dir = 0;\n    let pathfinished = true;\n    let holepath = false;\n    let lookuprow;\n    for (let j = 0; j < h; j += 1) {\n      for (let i = 0; i < w; i += 1) {\n        if (arr[j][i] === 4 || arr[j][i] === 11) {\n          px = i;\n          py = j;\n          paths[pacnt] = {};\n          paths[pacnt].points = [];\n          paths[pacnt].boundingbox = [px, py, px, py];\n          paths[pacnt].holechildren = [];\n          pathfinished = false;\n          pcnt = 0;\n          holepath = arr[j][i] === 11;\n          dir = 1;\n\n          while (!pathfinished) {\n            paths[pacnt].points[pcnt] = {};\n            paths[pacnt].points[pcnt].x = px - 1;\n            paths[pacnt].points[pcnt].y = py - 1;\n            paths[pacnt].points[pcnt].t = arr[py][px];\n\n            if (px - 1 < paths[pacnt].boundingbox[0]) {\n              paths[pacnt].boundingbox[0] = px - 1;\n            }\n            if (px - 1 > paths[pacnt].boundingbox[2]) {\n              paths[pacnt].boundingbox[2] = px - 1;\n            }\n            if (py - 1 < paths[pacnt].boundingbox[1]) {\n              paths[pacnt].boundingbox[1] = py - 1;\n            }\n            if (py - 1 > paths[pacnt].boundingbox[3]) {\n              paths[pacnt].boundingbox[3] = py - 1;\n            }\n\n            lookuprow = this.pathscan_combined_lookup[arr[py][px]][dir];\n            arr[py][px] = lookuprow[0];\n            dir = lookuprow[1];\n            px += lookuprow[2];\n            py += lookuprow[3];\n\n            if (px - 1 === paths[pacnt].points[0].x && py - 1 === paths[pacnt].points[0].y) {\n              pathfinished = true;\n\n              if (paths[pacnt].points.length < pathomit) {\n                paths.pop();\n              } else {\n                paths[pacnt].isholepath = !!holepath;\n\n                if (holepath) {\n                  let parentidx = 0,\n                    parentbbox = [-1, -1, w + 1, h + 1];\n                  for (let parentcnt = 0; parentcnt < pacnt; parentcnt++) {\n                    if (\n                      !paths[parentcnt].isholepath &&\n                      this.boundingboxincludes(\n                        paths[parentcnt].boundingbox,\n                        paths[pacnt].boundingbox\n                      ) &&\n                      this.boundingboxincludes(parentbbox, paths[parentcnt].boundingbox)\n                    ) {\n                      parentidx = parentcnt;\n                      parentbbox = paths[parentcnt].boundingbox;\n                    }\n                  }\n                  paths[parentidx].holechildren.push(pacnt);\n                }\n                pacnt += 1;\n              }\n            }\n            pcnt += 1;\n          }\n        }\n      }\n    }\n\n    return paths;\n  }\n\n  boundingboxincludes(parentbbox, childbbox) {\n    return (\n      parentbbox[0] < childbbox[0] &&\n      parentbbox[1] < childbbox[1] &&\n      parentbbox[2] > childbbox[2] &&\n      parentbbox[3] > childbbox[3]\n    );\n  }\n\n  batchpathscan(layers, pathomit) {\n    const bpaths = [];\n    for (const k in layers) {\n      if (!layers.hasOwnProperty(k)) {\n        continue;\n      }\n      bpaths[k] = this.pathscan(layers[k], pathomit);\n    }\n\n    return bpaths;\n  }\n\n  internodes(paths, options) {\n    const ins = [];\n    let palen = 0;\n    let nextidx = 0;\n    let nextidx2 = 0;\n    let previdx = 0;\n    let previdx2 = 0;\n    let pacnt;\n    let pcnt;\n    for (pacnt = 0; pacnt < paths.length; pacnt += 1) {\n      ins[pacnt] = {};\n      ins[pacnt].points = [];\n      ins[pacnt].boundingbox = paths[pacnt].boundingbox;\n      ins[pacnt].holechildren = paths[pacnt].holechildren;\n      ins[pacnt].isholepath = paths[pacnt].isholepath;\n      palen = paths[pacnt].points.length;\n\n      for (pcnt = 0; pcnt < palen; pcnt += 1) {\n        nextidx = (pcnt + 1) % palen;\n        nextidx2 = (pcnt + 2) % palen;\n        previdx = (pcnt - 1 + palen) % palen;\n        previdx2 = (pcnt - 2 + palen) % palen;\n\n        if (\n          options.rightangleenhance &&\n          this.testrightangle(paths[pacnt], previdx2, previdx, pcnt, nextidx, nextidx2)\n        ) {\n          if (ins[pacnt].points.length > 0) {\n            ins[pacnt].points[ins[pacnt].points.length - 1].linesegment = this.getdirection(\n              ins[pacnt].points[ins[pacnt].points.length - 1].x,\n              ins[pacnt].points[ins[pacnt].points.length - 1].y,\n              paths[pacnt].points[pcnt].x,\n              paths[pacnt].points[pcnt].y\n            );\n          }\n\n          ins[pacnt].points.push({\n            x: paths[pacnt].points[pcnt].x,\n            y: paths[pacnt].points[pcnt].y,\n            linesegment: this.getdirection(\n              paths[pacnt].points[pcnt].x,\n              paths[pacnt].points[pcnt].y,\n              (paths[pacnt].points[pcnt].x + paths[pacnt].points[nextidx].x) / 2,\n              (paths[pacnt].points[pcnt].y + paths[pacnt].points[nextidx].y) / 2\n            ),\n          });\n        }\n\n        ins[pacnt].points.push({\n          x: (paths[pacnt].points[pcnt].x + paths[pacnt].points[nextidx].x) / 2,\n          y: (paths[pacnt].points[pcnt].y + paths[pacnt].points[nextidx].y) / 2,\n          linesegment: this.getdirection(\n            (paths[pacnt].points[pcnt].x + paths[pacnt].points[nextidx].x) / 2,\n            (paths[pacnt].points[pcnt].y + paths[pacnt].points[nextidx].y) / 2,\n            (paths[pacnt].points[nextidx].x + paths[pacnt].points[nextidx2].x) / 2,\n            (paths[pacnt].points[nextidx].y + paths[pacnt].points[nextidx2].y) / 2\n          ),\n        });\n      }\n    }\n\n    return ins;\n  }\n\n  testrightangle(path, idx1, idx2, idx3, idx4, idx5) {\n    return (\n      (path.points[idx3].x === path.points[idx1].x &&\n        path.points[idx3].x === path.points[idx2].x &&\n        path.points[idx3].y === path.points[idx4].y &&\n        path.points[idx3].y === path.points[idx5].y) ||\n      (path.points[idx3].y === path.points[idx1].y &&\n        path.points[idx3].y === path.points[idx2].y &&\n        path.points[idx3].x === path.points[idx4].x &&\n        path.points[idx3].x === path.points[idx5].x)\n    );\n  }\n\n  getdirection(x1, y1, x2, y2) {\n    let val = 8;\n    if (x1 < x2) {\n      if (y1 < y2) {\n        val = 1;\n      } else if (y1 > y2) {\n        val = 7;\n      } else {\n        val = 0;\n      }\n    } else if (x1 > x2) {\n      if (y1 < y2) {\n        val = 3;\n      } else if (y1 > y2) {\n        val = 5;\n      } else {\n        val = 4;\n      }\n    } else if (y1 < y2) {\n      val = 2;\n    } else if (y1 > y2) {\n      val = 6;\n    } else {\n      val = 8;\n    }\n\n    return val;\n  }\n\n  batchinternodes(bpaths, options) {\n    const binternodes = [];\n    for (const k in bpaths) {\n      if (!bpaths.hasOwnProperty(k)) {\n        continue;\n      }\n      binternodes[k] = this.internodes(bpaths[k], options);\n    }\n\n    return binternodes;\n  }\n\n  tracepath(path, ltres, qtres) {\n    let pcnt = 0;\n    let segtype1;\n    let segtype2;\n    let seqend;\n    const smp = {};\n    smp.segments = [];\n    smp.boundingbox = path.boundingbox;\n    smp.holechildren = path.holechildren;\n    smp.isholepath = path.isholepath;\n\n    while (pcnt < path.points.length) {\n      segtype1 = path.points[pcnt].linesegment;\n      segtype2 = -1;\n      seqend = pcnt + 1;\n      while (\n        (path.points[seqend].linesegment === segtype1 ||\n          path.points[seqend].linesegment === segtype2 ||\n          segtype2 === -1) &&\n        seqend < path.points.length - 1\n      ) {\n        if (path.points[seqend].linesegment !== segtype1 && segtype2 === -1) {\n          segtype2 = path.points[seqend].linesegment;\n        }\n        seqend += 1;\n      }\n      if (seqend === path.points.length - 1) {\n        seqend = 0;\n      }\n\n      smp.segments = smp.segments.concat(this.fitseq(path, ltres, qtres, pcnt, seqend));\n\n      if (seqend > 0) {\n        pcnt = seqend;\n      } else {\n        pcnt = path.points.length;\n      }\n    }\n\n    return smp;\n  }\n\n  fitseq(path, ltres, qtres, seqstart, seqend) {\n    if (seqend > path.points.length || seqend < 0) {\n      return [];\n    }\n    let errorpoint = seqstart,\n      errorval = 0,\n      curvepass = true,\n      px,\n      py,\n      dist2;\n    let tl = seqend - seqstart;\n    if (tl < 0) {\n      tl += path.points.length;\n    }\n    let vx = (path.points[seqend].x - path.points[seqstart].x) / tl,\n      vy = (path.points[seqend].y - path.points[seqstart].y) / tl;\n    let pcnt = (seqstart + 1) % path.points.length,\n      pl;\n    while (pcnt != seqend) {\n      pl = pcnt - seqstart;\n      if (pl < 0) {\n        pl += path.points.length;\n      }\n      px = path.points[seqstart].x + vx * pl;\n      py = path.points[seqstart].y + vy * pl;\n      dist2 =\n        (path.points[pcnt].x - px) * (path.points[pcnt].x - px) +\n        (path.points[pcnt].y - py) * (path.points[pcnt].y - py);\n      if (dist2 > ltres) {\n        curvepass = false;\n      }\n      if (dist2 > errorval) {\n        errorpoint = pcnt;\n        errorval = dist2;\n      }\n      pcnt = (pcnt + 1) % path.points.length;\n    }\n    if (curvepass) {\n      return [\n        {\n          type: 'L',\n          x1: path.points[seqstart].x,\n          y1: path.points[seqstart].y,\n          x2: path.points[seqend].x,\n          y2: path.points[seqend].y,\n        },\n      ];\n    }\n    const fitpoint = errorpoint;\n    curvepass = true;\n    errorval = 0;\n    let t = (fitpoint - seqstart) / tl,\n      t1 = (1 - t) * (1 - t),\n      t2 = 2 * (1 - t) * t,\n      t3 = t * t;\n    let cpx =\n        (t1 * path.points[seqstart].x + t3 * path.points[seqend].x - path.points[fitpoint].x) / -t2,\n      cpy =\n        (t1 * path.points[seqstart].y + t3 * path.points[seqend].y - path.points[fitpoint].y) / -t2;\n    pcnt = seqstart + 1;\n    while (pcnt != seqend) {\n      t = (pcnt - seqstart) / tl;\n      t1 = (1 - t) * (1 - t);\n      t2 = 2 * (1 - t) * t;\n      t3 = t * t;\n      px = t1 * path.points[seqstart].x + t2 * cpx + t3 * path.points[seqend].x;\n      py = t1 * path.points[seqstart].y + t2 * cpy + t3 * path.points[seqend].y;\n      dist2 =\n        (path.points[pcnt].x - px) * (path.points[pcnt].x - px) +\n        (path.points[pcnt].y - py) * (path.points[pcnt].y - py);\n      if (dist2 > qtres) {\n        curvepass = false;\n      }\n      if (dist2 > errorval) {\n        errorpoint = pcnt;\n        errorval = dist2;\n      }\n      pcnt = (pcnt + 1) % path.points.length;\n    }\n    if (curvepass) {\n      return [\n        {\n          type: 'Q',\n          x1: path.points[seqstart].x,\n          y1: path.points[seqstart].y,\n          x2: cpx,\n          y2: cpy,\n          x3: path.points[seqend].x,\n          y3: path.points[seqend].y,\n        },\n      ];\n    }\n    const splitpoint = fitpoint;\n\n    return this.fitseq(path, ltres, qtres, seqstart, splitpoint).concat(\n      this.fitseq(path, ltres, qtres, splitpoint, seqend)\n    );\n  }\n\n  batchtracepaths(internodepaths, ltres, qtres) {\n    const btracedpaths = [];\n    for (const k in internodepaths) {\n      if (!internodepaths.hasOwnProperty(k)) {\n        continue;\n      }\n      btracedpaths.push(this.tracepath(internodepaths[k], ltres, qtres));\n    }\n\n    return btracedpaths;\n  }\n\n  batchtracelayers(binternodes, ltres, qtres) {\n    const btbis = [];\n    for (const k in binternodes) {\n      if (!binternodes.hasOwnProperty(k)) {\n        continue;\n      }\n      btbis[k] = this.batchtracepaths(binternodes[k], ltres, qtres);\n    }\n\n    return btbis;\n  }\n\n  roundtodec(val, places) {\n    return Number(val.toFixed(places));\n  }\n\n  svgpathstring(tracedata, lnum, pathnum, options) {\n    let layer = tracedata.layers[lnum],\n      smp = layer[pathnum],\n      str = '',\n      pcnt;\n    if (options.linefilter && smp.segments.length < 3) {\n      return str;\n    }\n    str = `<path ${options.desc ? `desc=\"l ${lnum} p ${pathnum}\" ` : ''}${this.tosvgcolorstr(\n      tracedata.palette[lnum],\n      options\n    )}d=\"`;\n    if (options.roundcoords === -1) {\n      str += `M ${smp.segments[0].x1 * options.scale} ${smp.segments[0].y1 * options.scale} `;\n      for (pcnt = 0; pcnt < smp.segments.length; pcnt++) {\n        str += `${smp.segments[pcnt].type} ${smp.segments[pcnt].x2 * options.scale} ${\n          smp.segments[pcnt].y2 * options.scale\n        } `;\n        if (smp.segments[pcnt].hasOwnProperty('x3')) {\n          str += `${smp.segments[pcnt].x3 * options.scale} ${\n            smp.segments[pcnt].y3 * options.scale\n          } `;\n        }\n      }\n      str += 'Z ';\n    } else {\n      str += `M ${this.roundtodec(\n        smp.segments[0].x1 * options.scale,\n        options.roundcoords\n      )} ${this.roundtodec(smp.segments[0].y1 * options.scale, options.roundcoords)} `;\n      for (pcnt = 0; pcnt < smp.segments.length; pcnt++) {\n        str += `${smp.segments[pcnt].type} ${this.roundtodec(\n          smp.segments[pcnt].x2 * options.scale,\n          options.roundcoords\n        )} ${this.roundtodec(smp.segments[pcnt].y2 * options.scale, options.roundcoords)} `;\n        if (smp.segments[pcnt].hasOwnProperty('x3')) {\n          str += `${this.roundtodec(\n            smp.segments[pcnt].x3 * options.scale,\n            options.roundcoords\n          )} ${this.roundtodec(smp.segments[pcnt].y3 * options.scale, options.roundcoords)} `;\n        }\n      }\n      str += 'Z ';\n    }\n    for (var hcnt = 0; hcnt < smp.holechildren.length; hcnt++) {\n      var hsmp = layer[smp.holechildren[hcnt]];\n\n      if (options.roundcoords === -1) {\n        if (hsmp.segments[hsmp.segments.length - 1].hasOwnProperty('x3')) {\n          str += `M ${hsmp.segments[hsmp.segments.length - 1].x3 * options.scale} ${\n            hsmp.segments[hsmp.segments.length - 1].y3 * options.scale\n          } `;\n        } else {\n          str += `M ${hsmp.segments[hsmp.segments.length - 1].x2 * options.scale} ${\n            hsmp.segments[hsmp.segments.length - 1].y2 * options.scale\n          } `;\n        }\n        for (pcnt = hsmp.segments.length - 1; pcnt >= 0; pcnt--) {\n          str += `${hsmp.segments[pcnt].type} `;\n          if (hsmp.segments[pcnt].hasOwnProperty('x3')) {\n            str += `${hsmp.segments[pcnt].x2 * options.scale} ${\n              hsmp.segments[pcnt].y2 * options.scale\n            } `;\n          }\n          str += `${hsmp.segments[pcnt].x1 * options.scale} ${\n            hsmp.segments[pcnt].y1 * options.scale\n          } `;\n        }\n      } else {\n        if (hsmp.segments[hsmp.segments.length - 1].hasOwnProperty('x3')) {\n          str += `M ${this.roundtodec(\n            hsmp.segments[hsmp.segments.length - 1].x3 * options.scale\n          )} ${this.roundtodec(hsmp.segments[hsmp.segments.length - 1].y3 * options.scale)} `;\n        } else {\n          str += `M ${this.roundtodec(\n            hsmp.segments[hsmp.segments.length - 1].x2 * options.scale\n          )} ${this.roundtodec(hsmp.segments[hsmp.segments.length - 1].y2 * options.scale)} `;\n        }\n        for (pcnt = hsmp.segments.length - 1; pcnt >= 0; pcnt--) {\n          str += `${hsmp.segments[pcnt].type} `;\n          if (hsmp.segments[pcnt].hasOwnProperty('x3')) {\n            str += `${this.roundtodec(hsmp.segments[pcnt].x2 * options.scale)} ${this.roundtodec(\n              hsmp.segments[pcnt].y2 * options.scale\n            )} `;\n          }\n          str += `${this.roundtodec(hsmp.segments[pcnt].x1 * options.scale)} ${this.roundtodec(\n            hsmp.segments[pcnt].y1 * options.scale\n          )} `;\n        }\n      }\n      str += 'Z ';\n    }\n    str += '\" />';\n    if (options.lcpr || options.qcpr) {\n      for (pcnt = 0; pcnt < smp.segments.length; pcnt++) {\n        if (smp.segments[pcnt].hasOwnProperty('x3') && options.qcpr) {\n          str += `<circle cx=\"${smp.segments[pcnt].x2 * options.scale}\" cy=\"${\n            smp.segments[pcnt].y2 * options.scale\n          }\" r=\"${options.qcpr}\" fill=\"cyan\" stroke-width=\"${\n            options.qcpr * 0.2\n          }\" stroke=\"black\" />`;\n          str += `<circle cx=\"${smp.segments[pcnt].x3 * options.scale}\" cy=\"${\n            smp.segments[pcnt].y3 * options.scale\n          }\" r=\"${options.qcpr}\" fill=\"white\" stroke-width=\"${\n            options.qcpr * 0.2\n          }\" stroke=\"black\" />`;\n          str += `<line x1=\"${smp.segments[pcnt].x1 * options.scale}\" y1=\"${\n            smp.segments[pcnt].y1 * options.scale\n          }\" x2=\"${smp.segments[pcnt].x2 * options.scale}\" y2=\"${\n            smp.segments[pcnt].y2 * options.scale\n          }\" stroke-width=\"${options.qcpr * 0.2}\" stroke=\"cyan\" />`;\n          str += `<line x1=\"${smp.segments[pcnt].x2 * options.scale}\" y1=\"${\n            smp.segments[pcnt].y2 * options.scale\n          }\" x2=\"${smp.segments[pcnt].x3 * options.scale}\" y2=\"${\n            smp.segments[pcnt].y3 * options.scale\n          }\" stroke-width=\"${options.qcpr * 0.2}\" stroke=\"cyan\" />`;\n        }\n        if (!smp.segments[pcnt].hasOwnProperty('x3') && options.lcpr) {\n          str += `<circle cx=\"${smp.segments[pcnt].x2 * options.scale}\" cy=\"${\n            smp.segments[pcnt].y2 * options.scale\n          }\" r=\"${options.lcpr}\" fill=\"white\" stroke-width=\"${\n            options.lcpr * 0.2\n          }\" stroke=\"black\" />`;\n        }\n      }\n\n      for (var hcnt = 0; hcnt < smp.holechildren.length; hcnt++) {\n        var hsmp = layer[smp.holechildren[hcnt]];\n        for (pcnt = 0; pcnt < hsmp.segments.length; pcnt++) {\n          if (hsmp.segments[pcnt].hasOwnProperty('x3') && options.qcpr) {\n            str += `<circle cx=\"${hsmp.segments[pcnt].x2 * options.scale}\" cy=\"${\n              hsmp.segments[pcnt].y2 * options.scale\n            }\" r=\"${options.qcpr}\" fill=\"cyan\" stroke-width=\"${\n              options.qcpr * 0.2\n            }\" stroke=\"black\" />`;\n            str += `<circle cx=\"${hsmp.segments[pcnt].x3 * options.scale}\" cy=\"${\n              hsmp.segments[pcnt].y3 * options.scale\n            }\" r=\"${options.qcpr}\" fill=\"white\" stroke-width=\"${\n              options.qcpr * 0.2\n            }\" stroke=\"black\" />`;\n            str += `<line x1=\"${hsmp.segments[pcnt].x1 * options.scale}\" y1=\"${\n              hsmp.segments[pcnt].y1 * options.scale\n            }\" x2=\"${hsmp.segments[pcnt].x2 * options.scale}\" y2=\"${\n              hsmp.segments[pcnt].y2 * options.scale\n            }\" stroke-width=\"${options.qcpr * 0.2}\" stroke=\"cyan\" />`;\n            str += `<line x1=\"${hsmp.segments[pcnt].x2 * options.scale}\" y1=\"${\n              hsmp.segments[pcnt].y2 * options.scale\n            }\" x2=\"${hsmp.segments[pcnt].x3 * options.scale}\" y2=\"${\n              hsmp.segments[pcnt].y3 * options.scale\n            }\" stroke-width=\"${options.qcpr * 0.2}\" stroke=\"cyan\" />`;\n          }\n          if (!hsmp.segments[pcnt].hasOwnProperty('x3') && options.lcpr) {\n            str += `<circle cx=\"${hsmp.segments[pcnt].x2 * options.scale}\" cy=\"${\n              hsmp.segments[pcnt].y2 * options.scale\n            }\" r=\"${options.lcpr}\" fill=\"white\" stroke-width=\"${\n              options.lcpr * 0.2\n            }\" stroke=\"black\" />`;\n          }\n        }\n      }\n    }\n\n    return str;\n  }\n\n  getsvgstring(tracedata, options) {\n    options = this.checkoptions(options);\n    const w = tracedata.width * options.scale;\n    const h = tracedata.height * options.scale;\n\n    let svgstr = `<svg ${\n      options.viewbox ? `viewBox=\"0 0 ${w} ${h}\" ` : `width=\"${w}\" height=\"${h}\" `\n    }version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" desc=\"Created with imagetracer.js version ${\n      this.versionnumber\n    }\" >`;\n    for (let lcnt = 0; lcnt < tracedata.layers.length; lcnt += 1) {\n      for (let pcnt = 0; pcnt < tracedata.layers[lcnt].length; pcnt += 1) {\n        if (!tracedata.layers[lcnt][pcnt].isholepath) {\n          svgstr += this.svgpathstring(tracedata, lcnt, pcnt, options);\n        }\n      }\n    }\n    svgstr += '</svg>';\n\n    return svgstr;\n  }\n\n  compareNumbers(a, b) {\n    return a - b;\n  }\n\n  torgbastr(c) {\n    return `rgba(${c.r},${c.g},${c.b},${c.a})`;\n  }\n\n  tosvgcolorstr(c, options) {\n    return `fill=\"rgb(${c.r},${c.g},${c.b})\" stroke=\"rgb(${c.r},${c.g},${c.b})\" stroke-width=\"${\n      options.strokewidth\n    }\" opacity=\"${c.a / 255.0}\" `;\n  }\n\n  appendSVGString(svgstr, parentid) {\n    let div;\n    if (parentid) {\n      div = document.getElementById(parentid);\n      if (!div) {\n        div = document.createElement('div');\n        div.id = parentid;\n        document.body.appendChild(div);\n      }\n    } else {\n      div = document.createElement('div');\n      document.body.appendChild(div);\n    }\n    div.innerHTML += svgstr;\n  }\n\n  blur(imgd, radius, delta) {\n    let i, j, k, d, idx, racc, gacc, bacc, aacc, wacc;\n    const imgd2 = { width: imgd.width, height: imgd.height, data: [] };\n    radius = Math.floor(radius);\n    if (radius < 1) {\n      return imgd;\n    }\n    if (radius > 5) {\n      radius = 5;\n    }\n    delta = Math.abs(delta);\n    if (delta > 1024) {\n      delta = 1024;\n    }\n    const thisgk = this.gks[radius - 1];\n    for (j = 0; j < imgd.height; j++) {\n      for (i = 0; i < imgd.width; i++) {\n        racc = 0;\n        gacc = 0;\n        bacc = 0;\n        aacc = 0;\n        wacc = 0;\n\n        for (k = -radius; k < radius + 1; k++) {\n          if (i + k > 0 && i + k < imgd.width) {\n            idx = (j * imgd.width + i + k) * 4;\n            racc += imgd.data[idx] * thisgk[k + radius];\n            gacc += imgd.data[idx + 1] * thisgk[k + radius];\n            bacc += imgd.data[idx + 2] * thisgk[k + radius];\n            aacc += imgd.data[idx + 3] * thisgk[k + radius];\n            wacc += thisgk[k + radius];\n          }\n        }\n\n        idx = (j * imgd.width + i) * 4;\n        imgd2.data[idx] = Math.floor(racc / wacc);\n        imgd2.data[idx + 1] = Math.floor(gacc / wacc);\n        imgd2.data[idx + 2] = Math.floor(bacc / wacc);\n        imgd2.data[idx + 3] = Math.floor(aacc / wacc);\n      }\n    }\n    const himgd = new Uint8ClampedArray(imgd2.data);\n    for (j = 0; j < imgd.height; j++) {\n      for (i = 0; i < imgd.width; i++) {\n        racc = 0;\n        gacc = 0;\n        bacc = 0;\n        aacc = 0;\n        wacc = 0;\n\n        for (k = -radius; k < radius + 1; k++) {\n          if (j + k > 0 && j + k < imgd.height) {\n            idx = ((j + k) * imgd.width + i) * 4;\n            racc += himgd[idx] * thisgk[k + radius];\n            gacc += himgd[idx + 1] * thisgk[k + radius];\n            bacc += himgd[idx + 2] * thisgk[k + radius];\n            aacc += himgd[idx + 3] * thisgk[k + radius];\n            wacc += thisgk[k + radius];\n          }\n        }\n\n        idx = (j * imgd.width + i) * 4;\n        imgd2.data[idx] = Math.floor(racc / wacc);\n        imgd2.data[idx + 1] = Math.floor(gacc / wacc);\n        imgd2.data[idx + 2] = Math.floor(bacc / wacc);\n        imgd2.data[idx + 3] = Math.floor(aacc / wacc);\n      }\n    }\n    for (j = 0; j < imgd.height; j++) {\n      for (i = 0; i < imgd.width; i++) {\n        idx = (j * imgd.width + i) * 4;\n\n        d =\n          Math.abs(imgd2.data[idx] - imgd.data[idx]) +\n          Math.abs(imgd2.data[idx + 1] - imgd.data[idx + 1]) +\n          Math.abs(imgd2.data[idx + 2] - imgd.data[idx + 2]) +\n          Math.abs(imgd2.data[idx + 3] - imgd.data[idx + 3]);\n\n        if (d > delta) {\n          imgd2.data[idx] = imgd.data[idx];\n          imgd2.data[idx + 1] = imgd.data[idx + 1];\n          imgd2.data[idx + 2] = imgd.data[idx + 2];\n          imgd2.data[idx + 3] = imgd.data[idx + 3];\n        }\n      }\n    }\n\n    return imgd2;\n  }\n\n  loadImage(url, callback, options) {\n    const img = new Image();\n    if (options && options.corsenabled) {\n      img.crossOrigin = 'Anonymous';\n    }\n    img.src = url;\n    img.onload = function () {\n      const canvas = document.createElement('canvas');\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const context = canvas.getContext('2d');\n      context.drawImage(img, 0, 0);\n      callback(canvas);\n    };\n  }\n\n  getImgdata(canvas) {\n    const context = canvas.getContext('2d');\n\n    return context.getImageData(0, 0, canvas.width, canvas.height);\n  }\n\n  drawLayers(layers, palette, scale, parentid) {\n    scale = scale || 1;\n    let w, h, i, j, k;\n    let div;\n    if (parentid) {\n      div = document.getElementById(parentid);\n      if (!div) {\n        div = document.createElement('div');\n        div.id = parentid;\n        document.body.appendChild(div);\n      }\n    } else {\n      div = document.createElement('div');\n      document.body.appendChild(div);\n    }\n    for (k in layers) {\n      if (!layers.hasOwnProperty(k)) {\n        continue;\n      }\n\n      w = layers[k][0].length;\n      h = layers[k].length;\n\n      const canvas = document.createElement('canvas');\n      canvas.width = w * scale;\n      canvas.height = h * scale;\n      const context = canvas.getContext('2d');\n\n      for (j = 0; j < h; j += 1) {\n        for (i = 0; i < w; i += 1) {\n          context.fillStyle = this.torgbastr(palette[layers[k][j][i] % palette.length]);\n          context.fillRect(i * scale, j * scale, scale, scale);\n        }\n      }\n\n      div.appendChild(canvas);\n    }\n  }\n}\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Graphics module\n */\nimport snippet from './codeSnippet';\nimport fabric from 'fabric';\nimport ImageLoader from '@/component/imageLoader';\nimport Cropper from '@/component/cropper';\nimport Flip from '@/component/flip';\nimport Rotation from '@/component/rotation';\nimport FreeDrawing from '@/component/freeDrawing';\nimport Line from '@/component/line';\nimport Text from '@/component/text';\nimport Icon from '@/component/icon';\nimport Filter from '@/component/filter';\nimport Shape from '@/component/shape';\nimport Zoom from '@/component/zoom';\nimport CropperDrawingMode from '@/drawingMode/cropper';\nimport FreeDrawingMode from '@/drawingMode/freeDrawing';\nimport LineDrawingMode from '@/drawingMode/lineDrawing';\nimport ShapeDrawingMode from '@/drawingMode/shape';\nimport TextDrawingMode from '@/drawingMode/text';\nimport IconDrawingMode from '@/drawingMode/icon';\nimport ZoomDrawingMode from '@/drawingMode/zoom';\nimport {\n  makeSelectionUndoData,\n  makeSelectionUndoDatum,\n  setCachedUndoDataForDimension,\n} from '@/helper/selectionModifyHelper';\nimport { getProperties, includes, isShape, Promise } from '@/util';\nimport {\n  componentNames as components,\n  eventNames as events,\n  drawingModes,\n  fObjectOptions,\n  defaultPixelTargetTolerance,\n} from '@/consts';\nimport CustomEvents from './customEvent';\n\nconst { extend, stamp, isArray, isString, forEachArray, forEachOwnProperties } = snippet;\nconst DEFAULT_CSS_MAX_WIDTH = 1000;\nconst DEFAULT_CSS_MAX_HEIGHT = 800;\nconst EXTRA_PX_FOR_PASTE = 10;\n\nconst cssOnly = {\n  cssOnly: true,\n};\nconst backstoreOnly = {\n  backstoreOnly: true,\n};\n\n/**\n * Graphics class\n * @class\n * @param {string|HTMLElement} wrapper - Wrapper's element or selector\n * @param {Object} [option] - Canvas max width & height of css\n *  @param {number} option.cssMaxWidth - Canvas css-max-width\n *  @param {number} option.cssMaxHeight - Canvas css-max-height\n * @ignore\n */\nclass Graphics {\n  constructor(element, { cssMaxWidth, cssMaxHeight } = {}) {\n    /**\n     * Fabric image instance\n     * @type {fabric.Image}\n     */\n    this.canvasImage = null;\n\n    /**\n     * Max width of canvas elements\n     * @type {number}\n     */\n    this.cssMaxWidth = cssMaxWidth || DEFAULT_CSS_MAX_WIDTH;\n\n    /**\n     * Max height of canvas elements\n     * @type {number}\n     */\n    this.cssMaxHeight = cssMaxHeight || DEFAULT_CSS_MAX_HEIGHT;\n\n    /**\n     * cropper Selection Style\n     * @type {Object}\n     */\n    this.cropSelectionStyle = {};\n\n    /**\n     * target fabric object for copy paste feature\n     * @type {fabric.Object}\n     * @private\n     */\n    this.targetObjectForCopyPaste = null;\n\n    /**\n     * Image name\n     * @type {string}\n     */\n    this.imageName = '';\n\n    /**\n     * Object Map\n     * @type {Object}\n     * @private\n     */\n    this._objects = {};\n\n    /**\n     * Fabric-Canvas instance\n     * @type {fabric.Canvas}\n     * @private\n     */\n    this._canvas = null;\n\n    /**\n     * Drawing mode\n     * @type {string}\n     * @private\n     */\n    this._drawingMode = drawingModes.NORMAL;\n\n    /**\n     * DrawingMode map\n     * @type {Object.<string, DrawingMode>}\n     * @private\n     */\n    this._drawingModeMap = {};\n\n    /**\n     * Component map\n     * @type {Object.<string, Component>}\n     * @private\n     */\n    this._componentMap = {};\n\n    /**\n     * fabric event handlers\n     * @type {Object.<string, function>}\n     * @private\n     */\n    this._handler = {\n      onMouseDown: this._onMouseDown.bind(this),\n      onMouseUp: this._onMouseUp.bind(this),\n      onMouseMove: this._onMouseMove.bind(this),\n      onObjectAdded: this._onObjectAdded.bind(this),\n      onObjectRemoved: this._onObjectRemoved.bind(this),\n      onObjectMoved: this._onObjectMoved.bind(this),\n      onObjectScaled: this._onObjectScaled.bind(this),\n      onObjectModified: this._onObjectModified.bind(this),\n      onObjectRotated: this._onObjectRotated.bind(this),\n      onObjectSelected: this._onObjectSelected.bind(this),\n      onPathCreated: this._onPathCreated.bind(this),\n      onSelectionCleared: this._onSelectionCleared.bind(this),\n      onSelectionCreated: this._onSelectionCreated.bind(this),\n    };\n\n    this._setObjectCachingToFalse();\n    this._setCanvasElement(element);\n    this._createDrawingModeInstances();\n    this._createComponents();\n    this._attachCanvasEvents();\n    this._attachZoomEvents();\n  }\n\n  /**\n   * Destroy canvas element\n   */\n  destroy() {\n    const { wrapperEl } = this._canvas;\n\n    this._canvas.clear();\n\n    wrapperEl.parentNode.removeChild(wrapperEl);\n\n    this._detachZoomEvents();\n  }\n\n  /**\n   * Attach zoom events\n   */\n  _attachZoomEvents() {\n    const zoom = this.getComponent(components.ZOOM);\n\n    zoom.attachKeyboardZoomEvents();\n  }\n\n  /**\n   * Detach zoom events\n   */\n  _detachZoomEvents() {\n    const zoom = this.getComponent(components.ZOOM);\n\n    zoom.detachKeyboardZoomEvents();\n  }\n\n  /**\n   * Deactivates all objects on canvas\n   * @returns {Graphics} this\n   */\n  deactivateAll() {\n    this._canvas.discardActiveObject();\n\n    return this;\n  }\n\n  /**\n   * Renders all objects on canvas\n   * @returns {Graphics} this\n   */\n  renderAll() {\n    this._canvas.renderAll();\n\n    return this;\n  }\n\n  /**\n   * Adds objects on canvas\n   * @param {Object|Array} objects - objects\n   */\n  add(objects) {\n    let theArgs = [];\n    if (isArray(objects)) {\n      theArgs = objects;\n    } else {\n      theArgs.push(objects);\n    }\n\n    this._canvas.add(...theArgs);\n  }\n\n  /**\n   * Removes the object or group\n   * @param {Object} target - graphics object or group\n   * @returns {boolean} true if contains or false\n   */\n  contains(target) {\n    return this._canvas.contains(target);\n  }\n\n  /**\n   * Gets all objects or group\n   * @returns {Array} all objects, shallow copy\n   */\n  getObjects() {\n    return this._canvas.getObjects().slice();\n  }\n\n  /**\n   * Get an object by id\n   * @param {number} id - object id\n   * @returns {fabric.Object} object corresponding id\n   */\n  getObject(id) {\n    return this._objects[id];\n  }\n\n  /**\n   * Removes the object or group\n   * @param {Object} target - graphics object or group\n   */\n  remove(target) {\n    this._canvas.remove(target);\n  }\n\n  /**\n   * Removes all object or group\n   * @param {boolean} includesBackground - remove the background image or not\n   * @returns {Array} all objects array which is removed\n   */\n  removeAll(includesBackground) {\n    const canvas = this._canvas;\n    const objects = canvas.getObjects().slice();\n    canvas.remove(...this._canvas.getObjects());\n\n    if (includesBackground) {\n      canvas.clear();\n    }\n\n    return objects;\n  }\n\n  /**\n   * Removes an object or group by id\n   * @param {number} id - object id\n   * @returns {Array} removed objects\n   */\n  removeObjectById(id) {\n    const objects = [];\n    const canvas = this._canvas;\n    const target = this.getObject(id);\n    const isValidGroup = target && target.isType('group') && !target.isEmpty();\n\n    if (isValidGroup) {\n      canvas.discardActiveObject(); // restore states for each objects\n      target.forEachObject((obj) => {\n        objects.push(obj);\n        canvas.remove(obj);\n      });\n    } else if (canvas.contains(target)) {\n      objects.push(target);\n      canvas.remove(target);\n    }\n\n    return objects;\n  }\n\n  /**\n   * Get an id by object instance\n   * @param {fabric.Object} object object\n   * @returns {number} object id if it exists or null\n   */\n  getObjectId(object) {\n    let key = null;\n    for (key in this._objects) {\n      if (this._objects.hasOwnProperty(key)) {\n        if (object === this._objects[key]) {\n          return key;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Gets an active object or group\n   * @returns {Object} active object or group instance\n   */\n  getActiveObject() {\n    return this._canvas._activeObject;\n  }\n\n  /**\n   * Returns the object ID to delete the object.\n   * @returns {number} object id for remove\n   */\n  getActiveObjectIdForRemove() {\n    const activeObject = this.getActiveObject();\n    const { type, left, top } = activeObject;\n    const isSelection = type === 'activeSelection';\n\n    if (isSelection) {\n      const group = new fabric.Group([...activeObject.getObjects()], {\n        left,\n        top,\n      });\n\n      return this._addFabricObject(group);\n    }\n\n    return this.getObjectId(activeObject);\n  }\n\n  /**\n   * Verify that you are ready to erase the object.\n   * @returns {boolean} ready for object remove\n   */\n  isReadyRemoveObject() {\n    const activeObject = this.getActiveObject();\n\n    return activeObject && !activeObject.isEditing;\n  }\n\n  /**\n   * Gets an active group object\n   * @returns {Object} active group object instance\n   */\n  getActiveObjects() {\n    const activeObject = this._canvas._activeObject;\n\n    return activeObject && activeObject.type === 'activeSelection' ? activeObject : null;\n  }\n\n  /**\n   * Get Active object Selection from object ids\n   * @param {Array.<Object>} objects - fabric objects\n   * @returns {Object} target - target object group\n   */\n  getActiveSelectionFromObjects(objects) {\n    const canvas = this.getCanvas();\n\n    return new fabric.ActiveSelection(objects, { canvas });\n  }\n\n  /**\n   * Activates an object or group\n   * @param {Object} target - target object or group\n   */\n  setActiveObject(target) {\n    this._canvas.setActiveObject(target);\n  }\n\n  /**\n   * Set Crop selection style\n   * @param {Object} style - Selection styles\n   */\n  setCropSelectionStyle(style) {\n    this.cropSelectionStyle = style;\n  }\n\n  /**\n   * Get component\n   * @param {string} name - Component name\n   * @returns {Component}\n   */\n  getComponent(name) {\n    return this._componentMap[name];\n  }\n\n  /**\n   * Get current drawing mode\n   * @returns {string}\n   */\n  getDrawingMode() {\n    return this._drawingMode;\n  }\n\n  /**\n   * Start a drawing mode. If the current mode is not 'NORMAL', 'stopDrawingMode()' will be called first.\n   * @param {String} mode Can be one of <I>'CROPPER', 'FREE_DRAWING', 'LINE', 'TEXT', 'SHAPE'</I>\n   * @param {Object} [option] parameters of drawing mode, it's available with 'FREE_DRAWING', 'LINE_DRAWING'\n   *  @param {Number} [option.width] brush width\n   *  @param {String} [option.color] brush color\n   * @returns {boolean} true if success or false\n   */\n  startDrawingMode(mode, option) {\n    if (this._isSameDrawingMode(mode)) {\n      return true;\n    }\n\n    // If the current mode is not 'NORMAL', 'stopDrawingMode()' will be called first.\n    this.stopDrawingMode();\n\n    const drawingModeInstance = this._getDrawingModeInstance(mode);\n    if (drawingModeInstance && drawingModeInstance.start) {\n      drawingModeInstance.start(this, option);\n\n      this._drawingMode = mode;\n    }\n\n    return !!drawingModeInstance;\n  }\n\n  /**\n   * Stop the current drawing mode and back to the 'NORMAL' mode\n   */\n  stopDrawingMode() {\n    if (this._isSameDrawingMode(drawingModes.NORMAL)) {\n      return;\n    }\n\n    const drawingModeInstance = this._getDrawingModeInstance(this.getDrawingMode());\n    if (drawingModeInstance && drawingModeInstance.end) {\n      drawingModeInstance.end(this);\n    }\n    this._drawingMode = drawingModes.NORMAL;\n  }\n\n  /**\n   * Change zoom of canvas\n   * @param {{x: number, y: number}} center - center of zoom\n   * @param {number} zoomLevel - zoom level\n   */\n  zoom({ x, y }, zoomLevel) {\n    const zoom = this.getComponent(components.ZOOM);\n\n    zoom.zoom({ x, y }, zoomLevel);\n  }\n\n  /**\n   * Get zoom mode\n   * @returns {string}\n   */\n  getZoomMode() {\n    const zoom = this.getComponent(components.ZOOM);\n\n    return zoom.mode;\n  }\n\n  /**\n   * Start zoom-in mode\n   */\n  startZoomInMode() {\n    const zoom = this.getComponent(components.ZOOM);\n\n    zoom.startZoomInMode();\n  }\n\n  /**\n   * Stop zoom-in mode\n   */\n  endZoomInMode() {\n    const zoom = this.getComponent(components.ZOOM);\n\n    zoom.endZoomInMode();\n  }\n\n  /**\n   * Zoom out one step\n   */\n  zoomOut() {\n    const zoom = this.getComponent(components.ZOOM);\n\n    zoom.zoomOut();\n  }\n\n  /**\n   * Start hand mode\n   */\n  startHandMode() {\n    const zoom = this.getComponent(components.ZOOM);\n\n    zoom.startHandMode();\n  }\n\n  /**\n   * Stop hand mode\n   */\n  endHandMode() {\n    const zoom = this.getComponent(components.ZOOM);\n\n    zoom.endHandMode();\n  }\n\n  /**\n   * Zoom reset\n   */\n  resetZoom() {\n    const zoom = this.getComponent(components.ZOOM);\n\n    zoom.resetZoom();\n  }\n\n  /**\n   * To data url from canvas\n   * @param {Object} options - options for toDataURL\n   *   @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n   *   @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n   *   @param {Number} [options.multiplier=1] Multiplier to scale by\n   *   @param {Number} [options.left] Cropping left offset. Introduced in fabric v1.2.14\n   *   @param {Number} [options.top] Cropping top offset. Introduced in fabric v1.2.14\n   *   @param {Number} [options.width] Cropping width. Introduced in fabric v1.2.14\n   *   @param {Number} [options.height] Cropping height. Introduced in fabric v1.2.14\n   * @returns {string} A DOMString containing the requested data URI.\n   */\n  toDataURL(options) {\n    const cropper = this.getComponent(components.CROPPER);\n    cropper.changeVisibility(false);\n\n    const dataUrl = this._canvas && this._canvas.toDataURL(options);\n    cropper.changeVisibility(true);\n\n    return dataUrl;\n  }\n\n  /**\n   * Save image(background) of canvas\n   * @param {string} name - Name of image\n   * @param {?fabric.Image} canvasImage - Fabric image instance\n   */\n  setCanvasImage(name, canvasImage) {\n    if (canvasImage) {\n      stamp(canvasImage);\n    }\n    this.imageName = name;\n    this.canvasImage = canvasImage;\n  }\n\n  /**\n   * Set css max dimension\n   * @param {{width: number, height: number}} maxDimension - Max width & Max height\n   */\n  setCssMaxDimension(maxDimension) {\n    this.cssMaxWidth = maxDimension.width || this.cssMaxWidth;\n    this.cssMaxHeight = maxDimension.height || this.cssMaxHeight;\n  }\n\n  /**\n   * Adjust canvas dimension with scaling image\n   */\n  adjustCanvasDimension() {\n    const canvasImage = this.canvasImage.scale(1);\n    const { width, height } = canvasImage.getBoundingRect();\n    const maxDimension = this._calcMaxDimension(width, height);\n\n    this.setCanvasCssDimension({\n      width: '100%',\n      height: '100%', // Set height '' for IE9\n      'max-width': `${maxDimension.width}px`,\n      'max-height': `${maxDimension.height}px`,\n    });\n\n    this.setCanvasBackstoreDimension({\n      width: maxDimension.width,\n      height: maxDimension.height,\n    });\n  }\n\n  /**\n   * Adjust canvas dimension with scaling image for rotate\n   */\n  adjustCanvasDimensionForRotate() {\n    const canvasImage = this.canvasImage.scale(1);\n    const { width, height } = canvasImage.getBoundingRect();\n    const maxDimension = {\n      width: height,\n      height: width,\n    };\n\n    this.setCanvasCssDimension({\n      width: '100%',\n      height: '100%', // Set height '' for IE9\n      'max-width': `${maxDimension.width}px`,\n      'max-height': `${maxDimension.height}px`,\n    });\n\n    this.setCanvasBackstoreDimension({\n      width,\n      height,\n    });\n    this.canvasImage.viewportCenter();\n  }\n\n  /**\n   * Set canvas dimension - css only\n   *  {@link http://fabricjs.com/docs/fabric.Canvas.html#setDimensions}\n   * @param {Object} dimension - Canvas css dimension\n   */\n  setCanvasCssDimension(dimension) {\n    this._canvas.setDimensions(dimension, cssOnly);\n  }\n\n  /**\n   * Set canvas dimension - backstore only\n   *  {@link http://fabricjs.com/docs/fabric.Canvas.html#setDimensions}\n   * @param {Object} dimension - Canvas backstore dimension\n   */\n  setCanvasBackstoreDimension(dimension) {\n    this._canvas.setDimensions(dimension, backstoreOnly);\n  }\n\n  /**\n   * Set canvas zoom\n   * @param {number} zoom - zoom level\n   */\n  setCanvasZoom(zoom) {\n    this._canvas.setZoom(zoom);\n  }\n\n  /**\n   * Set image properties\n   * {@link http://fabricjs.com/docs/fabric.Image.html#set}\n   * @param {Object} setting - Image properties\n   * @param {boolean} [withRendering] - If true, The changed image will be reflected in the canvas\n   */\n  setImageProperties(setting, withRendering) {\n    const { canvasImage } = this;\n\n    if (!canvasImage) {\n      return;\n    }\n\n    canvasImage.set(setting).setCoords();\n    if (withRendering) {\n      this._canvas.renderAll();\n    }\n  }\n\n  /**\n   * Returns canvas element of fabric.Canvas[[lower-canvas]]\n   * @returns {HTMLCanvasElement}\n   */\n  getCanvasElement() {\n    return this._canvas.getElement();\n  }\n\n  /**\n   * Get fabric.Canvas instance\n   * @returns {fabric.Canvas}\n   */\n  getCanvas() {\n    return this._canvas;\n  }\n\n  /**\n   * Get canvasImage (fabric.Image instance)\n   * @returns {fabric.Image}\n   */\n  getCanvasImage() {\n    return this.canvasImage;\n  }\n\n  /**\n   * Get image name\n   * @returns {string}\n   */\n  getImageName() {\n    return this.imageName;\n  }\n\n  /**\n   * Add image object on canvas\n   * @param {string} imgUrl - Image url to make object\n   * @returns {Promise}\n   */\n  addImageObject(imgUrl) {\n    const callback = this._callbackAfterLoadingImageObject.bind(this);\n\n    return new Promise((resolve) => {\n      fabric.Image.fromURL(\n        imgUrl,\n        (image) => {\n          callback(image);\n          resolve(this.createObjectProperties(image));\n        },\n        {\n          crossOrigin: 'Anonymous',\n        }\n      );\n    });\n  }\n\n  /**\n   * Get center position of canvas\n   * @returns {Object} {left, top}\n   */\n  getCenter() {\n    return this._canvas.getCenter();\n  }\n\n  /**\n   * Get cropped rect\n   * @returns {Object} rect\n   */\n  getCropzoneRect() {\n    return this.getComponent(components.CROPPER).getCropzoneRect();\n  }\n\n  /**\n   * Get cropped rect\n   * @param {number} [mode] cropzone rect mode\n   */\n  setCropzoneRect(mode) {\n    this.getComponent(components.CROPPER).setCropzoneRect(mode);\n  }\n\n  /**\n   * Get cropped image data\n   * @param {Object} cropRect cropzone rect\n   *  @param {Number} cropRect.left left position\n   *  @param {Number} cropRect.top top position\n   *  @param {Number} cropRect.width width\n   *  @param {Number} cropRect.height height\n   * @returns {?{imageName: string, url: string}} cropped Image data\n   */\n  getCroppedImageData(cropRect) {\n    return this.getComponent(components.CROPPER).getCroppedImageData(cropRect);\n  }\n\n  /**\n   * Set brush option\n   * @param {Object} option brush option\n   *  @param {Number} option.width width\n   *  @param {String} option.color color like 'FFFFFF', 'rgba(0, 0, 0, 0.5)'\n   */\n  setBrush(option) {\n    const drawingMode = this._drawingMode;\n    let compName = components.FREE_DRAWING;\n\n    if (drawingMode === drawingModes.LINE_DRAWING) {\n      compName = components.LINE;\n    }\n\n    this.getComponent(compName).setBrush(option);\n  }\n\n  /**\n   * Set states of current drawing shape\n   * @param {string} type - Shape type (ex: 'rect', 'circle', 'triangle')\n   * @param {Object} [options] - Shape options\n   *      @param {(ShapeFillOption | string)} [options.fill] - {@link ShapeFillOption} or\n   *        Shape foreground color (ex: '#fff', 'transparent')\n   *      @param {string} [options.stoke] - Shape outline color\n   *      @param {number} [options.strokeWidth] - Shape outline width\n   *      @param {number} [options.width] - Width value (When type option is 'rect', this options can use)\n   *      @param {number} [options.height] - Height value (When type option is 'rect', this options can use)\n   *      @param {number} [options.rx] - Radius x value (When type option is 'circle', this options can use)\n   *      @param {number} [options.ry] - Radius y value (When type option is 'circle', this options can use)\n   *      @param {number} [options.isRegular] - Whether resizing shape has 1:1 ratio or not\n   */\n  setDrawingShape(type, options) {\n    this.getComponent(components.SHAPE).setStates(type, options);\n  }\n\n  /**\n   * Set style of current drawing icon\n   * @param {string} type - icon type (ex: 'icon-arrow', 'icon-star')\n   * @param {Object} [iconColor] - Icon color\n   */\n  setIconStyle(type, iconColor) {\n    this.getComponent(components.ICON).setStates(type, iconColor);\n  }\n\n  /**\n   * Register icon paths\n   * @param {Object} pathInfos - Path infos\n   *  @param {string} pathInfos.key - key\n   *  @param {string} pathInfos.value - value\n   */\n  registerPaths(pathInfos) {\n    this.getComponent(components.ICON).registerPaths(pathInfos);\n  }\n\n  /**\n   * Change cursor style\n   * @param {string} cursorType - cursor type\n   */\n  changeCursor(cursorType) {\n    const canvas = this.getCanvas();\n    canvas.defaultCursor = cursorType;\n    canvas.renderAll();\n  }\n\n  /**\n   * Whether it has the filter or not\n   * @param {string} type - Filter type\n   * @returns {boolean} true if it has the filter\n   */\n  hasFilter(type) {\n    return this.getComponent(components.FILTER).hasFilter(type);\n  }\n\n  /**\n   * Set selection style of fabric object by init option\n   * @param {Object} styles - Selection styles\n   */\n  setSelectionStyle(styles) {\n    extend(fObjectOptions.SELECTION_STYLE, styles);\n  }\n\n  /**\n   * Set object properties\n   * @param {number} id - object id\n   * @param {Object} props - props\n   *     @param {string} [props.fill] Color\n   *     @param {string} [props.fontFamily] Font type for text\n   *     @param {number} [props.fontSize] Size\n   *     @param {string} [props.fontStyle] Type of inclination (normal / italic)\n   *     @param {string} [props.fontWeight] Type of thicker or thinner looking (normal / bold)\n   *     @param {string} [props.textAlign] Type of text align (left / center / right)\n   *     @param {string} [props.textDecoration] Type of line (underline / line-through / overline)\n   * @returns {Object} applied properties\n   */\n  setObjectProperties(id, props) {\n    const object = this.getObject(id);\n    const clone = extend({}, props);\n\n    object.set(clone);\n\n    object.setCoords();\n\n    this.getCanvas().renderAll();\n\n    return clone;\n  }\n\n  /**\n   * Get object properties corresponding key\n   * @param {number} id - object id\n   * @param {Array<string>|ObjectProps|string} keys - property's key\n   * @returns {Object} properties\n   */\n  getObjectProperties(id, keys) {\n    const object = this.getObject(id);\n    const props = {};\n\n    if (isString(keys)) {\n      props[keys] = object[keys];\n    } else if (isArray(keys)) {\n      forEachArray(keys, (value) => {\n        props[value] = object[value];\n      });\n    } else {\n      forEachOwnProperties(keys, (value, key) => {\n        props[key] = object[key];\n      });\n    }\n\n    return props;\n  }\n\n  /**\n   * Get object position by originX, originY\n   * @param {number} id - object id\n   * @param {string} originX - can be 'left', 'center', 'right'\n   * @param {string} originY - can be 'top', 'center', 'bottom'\n   * @returns {Object} {{x:number, y: number}} position by origin if id is valid, or null\n   */\n  getObjectPosition(id, originX, originY) {\n    const targetObj = this.getObject(id);\n    if (!targetObj) {\n      return null;\n    }\n\n    return targetObj.getPointByOrigin(originX, originY);\n  }\n\n  /**\n   * Set object position  by originX, originY\n   * @param {number} id - object id\n   * @param {Object} posInfo - position object\n   *  @param {number} posInfo.x - x position\n   *  @param {number} posInfo.y - y position\n   *  @param {string} posInfo.originX - can be 'left', 'center', 'right'\n   *  @param {string} posInfo.originY - can be 'top', 'center', 'bottom'\n   * @returns {boolean} true if target id is valid or false\n   */\n  setObjectPosition(id, posInfo) {\n    const targetObj = this.getObject(id);\n    const { x, y, originX, originY } = posInfo;\n    if (!targetObj) {\n      return false;\n    }\n\n    const targetOrigin = targetObj.getPointByOrigin(originX, originY);\n    const centerOrigin = targetObj.getPointByOrigin('center', 'center');\n    const diffX = centerOrigin.x - targetOrigin.x;\n    const diffY = centerOrigin.y - targetOrigin.y;\n\n    targetObj.set({\n      left: x + diffX,\n      top: y + diffY,\n    });\n\n    targetObj.setCoords();\n\n    return true;\n  }\n\n  /**\n   * Get the canvas size\n   * @returns {Object} {{width: number, height: number}} image size\n   */\n  getCanvasSize() {\n    const image = this.getCanvasImage();\n\n    return {\n      width: image ? image.width : 0,\n      height: image ? image.height : 0,\n    };\n  }\n\n  /**\n   * Get the canvas zoom level\n   * @returns {number} canvas zoom level\n   */\n  getCanvasZoom() {\n    return this._canvas.getZoom();\n  }\n\n  /**\n   * Create fabric static canvas\n   * @returns {Object} {{width: number, height: number}} image size\n   */\n  createStaticCanvas() {\n    const staticCanvas = new fabric.StaticCanvas();\n\n    staticCanvas.set({\n      enableRetinaScaling: false,\n    });\n\n    return staticCanvas;\n  }\n\n  /**\n   * Get a DrawingMode instance\n   * @param {string} modeName - DrawingMode Class Name\n   * @returns {DrawingMode} DrawingMode instance\n   * @private\n   */\n  _getDrawingModeInstance(modeName) {\n    return this._drawingModeMap[modeName];\n  }\n\n  /**\n   * Set object caching to false. This brought many bugs when draw Shape & cropzone\n   * @see http://fabricjs.com/fabric-object-caching\n   * @private\n   */\n  _setObjectCachingToFalse() {\n    fabric.Object.prototype.objectCaching = false;\n  }\n\n  /**\n   * Set canvas element to fabric.Canvas\n   * @param {Element|string} element - Wrapper or canvas element or selector\n   * @private\n   */\n  _setCanvasElement(element) {\n    let selectedElement;\n    let canvasElement;\n\n    if (element.nodeType) {\n      selectedElement = element;\n    } else {\n      selectedElement = document.querySelector(element);\n    }\n\n    if (selectedElement.nodeName.toUpperCase() !== 'CANVAS') {\n      canvasElement = document.createElement('canvas');\n      selectedElement.appendChild(canvasElement);\n    }\n\n    this._canvas = new fabric.Canvas(canvasElement, {\n      containerClass: 'tui-image-editor-canvas-container',\n      enableRetinaScaling: false,\n      targetFindTolerance: defaultPixelTargetTolerance,\n      rotationCursor:\n        'url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAD3ElEQVRIS5WWbUyVZRjH//+ewxhsraNrAQVZk7b0NI5tUrAgHGy2rIQDBL6cc8CWQxYyEIXVigQzJnYqczN5EcHsg+gH7UVdBLodjjleRKCXrQ/MHBsbK2E12ALPrnY/yCPneM7hdH97dv+v63dd133d1/0QYSwRKQQQTfJkGHIfCcMxEJFiAMp5C4DdJP8Nx05p/hdgeHgYVqt1AEA+yT/CgYQL2Amg+dnEZ1Dz3rso3rHjDsktJLuWgywLEJE1AH5VjhKfelr3l5mViUaXS8xmcy2AgyQlGCgoQETWARjyer3o7+vDiZZWXOnpMfzExcVhu9OBXaWl3wFwkpwKBAkIEJFyAEfaWlvx5bFjmLoT0BaaSUNlVZWCjAGwkRzxhzwAEJF9ABq3FhSgv68/ZIljYmPhuf6T0vwOIJfkLyEBIpIF4Mfc7GyMDPsGYzabMT09bdi/nJGBto529X0OwFsk/wlZIhExAfjtUENDYktTs6Fda7HgwMcHVXvqh6xpGir36mVRmkqSn4dK0yiRiLw5MTHRmZWxAXNzc7pN8gvJaOvomI+KiroIIPullFQcOXoU65PXq+00kp6w21REzrY0NecfamjQbSIjI9F99Spi42IdAB4F8Nk9Z1cAqDswuZxzn5ssIreLHY6EXnevbmfLy8Vhl+s6yVQRqbgHUPQPSHoXnYvIIyqeYMClJZKNmVkYG1MdB73uW7dtqyV5QEScAKZIfusftYiUAfjCb+zcIqnfSh/AhrR0jI+P6z4Ou1wqixqSjaFKISLfNx9v2lRSusuQiUhAwFS+Ldd8c2hIF6ou2VtT3UlSjeqAS0QeBvD3qxtfweWuHxYyr6vD+7W1F0jm+GfQ/VF9fWZ728LIj09IQFdPtzciImIdyZ8DEURk/+jI6Ie2zZuN7favTiEtPb2EpN7rS0tUeWNw8NOCvHxDXFa+GxV79qix/AbJ0aUQESkBcFw5Hx1Z2HosJgbua555TdMeJ/mnP2AlgL+c2+245rnf3uUVFXinrMyrmbRvAPSplw3A6wCeL7Lb4em9r91fXwe70/k1SftiMD6zSESqAHxitTyHmZkZI+AnV61Cjs2G1YmrcXf+LgYHBnDh/HkfzYspKTh1+vSsZtLWkLwdDPAQABXpa0kWC2ZnZkM1kLGXZE3CiZPtWLFyRSHJzqVGgaapKsFZAJvysnOgnslgiyQcRU7sq672RkVH7wz0UxDsPVCZqHI19rrduHzpEm7eGMLk5CRMJhOeiI9HSmoqCrcUqm5TJ/w2SXU+D6yQT6aIqBlUtHioANRYUOsWADeAMwAuhnoy/wO8rHIopxJHwwAAAABJRU5ErkJggg==) 6 6, alias',\n    });\n  }\n\n  /**\n   * Creates DrawingMode instances\n   * @private\n   */\n  _createDrawingModeInstances() {\n    this._register(this._drawingModeMap, new CropperDrawingMode());\n    this._register(this._drawingModeMap, new FreeDrawingMode());\n    this._register(this._drawingModeMap, new LineDrawingMode());\n    this._register(this._drawingModeMap, new ShapeDrawingMode());\n    this._register(this._drawingModeMap, new TextDrawingMode());\n    this._register(this._drawingModeMap, new IconDrawingMode());\n    this._register(this._drawingModeMap, new ZoomDrawingMode());\n  }\n\n  /**\n   * Create components\n   * @private\n   */\n  _createComponents() {\n    this._register(this._componentMap, new ImageLoader(this));\n    this._register(this._componentMap, new Cropper(this));\n    this._register(this._componentMap, new Flip(this));\n    this._register(this._componentMap, new Rotation(this));\n    this._register(this._componentMap, new FreeDrawing(this));\n    this._register(this._componentMap, new Line(this));\n    this._register(this._componentMap, new Text(this));\n    this._register(this._componentMap, new Icon(this));\n    this._register(this._componentMap, new Filter(this));\n    this._register(this._componentMap, new Shape(this));\n    this._register(this._componentMap, new Zoom(this));\n  }\n\n  /**\n   * Register component\n   * @param {Object} map - map object\n   * @param {Object} module - module which has getName method\n   * @private\n   */\n  _register(map, module) {\n    map[module.getName()] = module;\n  }\n\n  /**\n   * Get the current drawing mode is same with given mode\n   * @param {string} mode drawing mode\n   * @returns {boolean} true if same or false\n   */\n  _isSameDrawingMode(mode) {\n    return this.getDrawingMode() === mode;\n  }\n\n  /**\n   * Calculate max dimension of canvas\n   * The css-max dimension is dynamically decided with maintaining image ratio\n   * The css-max dimension is lower than canvas dimension (attribute of canvas, not css)\n   * @param {number} width - Canvas width\n   * @param {number} height - Canvas height\n   * @returns {{width: number, height: number}} - Max width & Max height\n   * @private\n   */\n  _calcMaxDimension(width, height) {\n    const wScaleFactor = this.cssMaxWidth / width;\n    const hScaleFactor = this.cssMaxHeight / height;\n    let cssMaxWidth = Math.min(width, this.cssMaxWidth);\n    let cssMaxHeight = Math.min(height, this.cssMaxHeight);\n\n    if (wScaleFactor < 1 && wScaleFactor < hScaleFactor) {\n      cssMaxWidth = width * wScaleFactor;\n      cssMaxHeight = height * wScaleFactor;\n    } else if (hScaleFactor < 1 && hScaleFactor < wScaleFactor) {\n      cssMaxWidth = width * hScaleFactor;\n      cssMaxHeight = height * hScaleFactor;\n    }\n\n    return {\n      width: Math.floor(cssMaxWidth),\n      height: Math.floor(cssMaxHeight),\n    };\n  }\n\n  /**\n   * Callback function after loading image\n   * @param {fabric.Image} obj - Fabric image object\n   * @private\n   */\n  _callbackAfterLoadingImageObject(obj) {\n    const centerPos = this.getCanvasImage().getCenterPoint();\n\n    obj.set(fObjectOptions.SELECTION_STYLE);\n    obj.set({\n      left: centerPos.x,\n      top: centerPos.y,\n      crossOrigin: 'Anonymous',\n    });\n\n    this.getCanvas().add(obj).setActiveObject(obj);\n  }\n\n  /**\n   * Attach canvas's events\n   */\n  _attachCanvasEvents() {\n    const canvas = this._canvas;\n    const handler = this._handler;\n    canvas.on({\n      'mouse:down': handler.onMouseDown,\n      'mouse:up': handler.onMouseUp,\n      'mouse:move': handler.onMouseMove,\n      'object:added': handler.onObjectAdded,\n      'object:removed': handler.onObjectRemoved,\n      'object:moving': handler.onObjectMoved,\n      'object:scaling': handler.onObjectScaled,\n      'object:modified': handler.onObjectModified,\n      'object:rotating': handler.onObjectRotated,\n      'path:created': handler.onPathCreated,\n      'selection:cleared': handler.onSelectionCleared,\n      'selection:created': handler.onSelectionCreated,\n      'selection:updated': handler.onObjectSelected,\n    });\n  }\n\n  /**\n   * \"mouse:down\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onMouseDown(fEvent) {\n    const { e: event, target } = fEvent;\n    const originPointer = this._canvas.getPointer(event);\n\n    if (target) {\n      const { type } = target;\n      const undoData = makeSelectionUndoData(target, (item) =>\n        makeSelectionUndoDatum(this.getObjectId(item), item, type === 'activeSelection')\n      );\n\n      setCachedUndoDataForDimension(undoData);\n    }\n\n    this.fire(events.MOUSE_DOWN, event, originPointer);\n  }\n\n  /**\n   * \"mouse:up\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onMouseUp(fEvent) {\n    const originPointer = this._canvas.getPointer(fEvent.e);\n    this.fire(events.MOUSE_UP, fEvent.e, originPointer);\n  }\n\n  /**\n   * \"mouse:move\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onMouseMove(fEvent) {\n    const originPointer = this._canvas.getPointer(fEvent.e);\n    this.fire(events.MOUSE_MOVE, fEvent.e, originPointer);\n  }\n\n  /**\n   * \"object:added\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onObjectAdded(fEvent) {\n    const obj = fEvent.target;\n    if (obj.isType('cropzone')) {\n      return;\n    }\n\n    this._addFabricObject(obj);\n  }\n\n  /**\n   * \"object:removed\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onObjectRemoved(fEvent) {\n    const obj = fEvent.target;\n    const params = this.createObjectProperties(obj);\n\n    this._removeFabricObject(stamp(obj));\n    this.fire(events.OBJECT_REMOVED, params);\n  }\n\n  /**\n   * \"object:moving\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onObjectMoved(fEvent) {\n    this._lazyFire(\n      events.OBJECT_MOVED,\n      (object) => this.createObjectProperties(object),\n      fEvent.target\n    );\n  }\n\n  /**\n   * \"object:scaling\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onObjectScaled(fEvent) {\n    this._lazyFire(\n      events.OBJECT_SCALED,\n      (object) => this.createObjectProperties(object),\n      fEvent.target\n    );\n  }\n\n  /**\n   * \"object:modified\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onObjectModified(fEvent) {\n    const { target } = fEvent;\n    if (target.type === 'activeSelection') {\n      const items = target.getObjects();\n\n      items.forEach((item) => item.fire('modifiedInGroup', target));\n    }\n\n    this.fire(events.OBJECT_MODIFIED, target, this.getObjectId(target));\n  }\n\n  /**\n   * \"object:rotating\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onObjectRotated(fEvent) {\n    this._lazyFire(\n      events.OBJECT_ROTATED,\n      (object) => this.createObjectProperties(object),\n      fEvent.target\n    );\n  }\n\n  /**\n   * Lazy event emitter\n   * @param {string} eventName - event name\n   * @param {Function} paramsMaker - make param function\n   * @param {Object} [target] - Object of the event owner.\n   * @private\n   */\n  _lazyFire(eventName, paramsMaker, target) {\n    const existEventDelegation = target && target.canvasEventDelegation;\n    const delegationState = existEventDelegation ? target.canvasEventDelegation(eventName) : 'none';\n\n    if (delegationState === 'unregistered') {\n      target.canvasEventRegister(eventName, (object) => {\n        this.fire(eventName, paramsMaker(object));\n      });\n    }\n\n    if (delegationState === 'none') {\n      this.fire(eventName, paramsMaker(target));\n    }\n  }\n\n  /**\n   * \"object:selected\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onObjectSelected(fEvent) {\n    const { target } = fEvent;\n    const params = this.createObjectProperties(target);\n    this._canvas.bringToFront(target);\n\n    this.fire(events.OBJECT_ACTIVATED, params);\n  }\n\n  /**\n   * \"path:created\" canvas event handler\n   * @param {{path: fabric.Path}} obj - Path object\n   * @private\n   */\n  _onPathCreated(obj) {\n    const { x: left, y: top } = obj.path.getCenterPoint();\n    obj.path.set(\n      extend(\n        {\n          left,\n          top,\n        },\n        fObjectOptions.SELECTION_STYLE\n      )\n    );\n\n    const params = this.createObjectProperties(obj.path);\n\n    this.fire(events.ADD_OBJECT, params);\n  }\n\n  /**\n   * \"selction:cleared\" canvas event handler\n   * @private\n   */\n  _onSelectionCleared() {\n    this.fire(events.SELECTION_CLEARED);\n  }\n\n  /**\n   * \"selction:created\" canvas event handler\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onSelectionCreated(fEvent) {\n    const { target } = fEvent;\n    const params = this.createObjectProperties(target);\n\n    this.fire(events.OBJECT_ACTIVATED, params);\n    this.fire(events.SELECTION_CREATED, fEvent.target);\n  }\n\n  /**\n   * Canvas discard selection all\n   */\n  discardSelection() {\n    this._canvas.discardActiveObject();\n    this._canvas.renderAll();\n  }\n\n  /**\n   * Canvas Selectable status change\n   * @param {boolean} selectable - expect status\n   */\n  changeSelectableAll(selectable) {\n    this._canvas.forEachObject((obj) => {\n      obj.selectable = selectable;\n      obj.evented = selectable;\n      obj.hoverCursor = selectable ? 'move' : 'crosshair';\n    });\n  }\n\n  /**\n   * Return object's properties\n   * @param {fabric.Object} obj - fabric object\n   * @returns {Object} properties object\n   */\n  createObjectProperties(obj) {\n    const predefinedKeys = [\n      'left',\n      'top',\n      'width',\n      'height',\n      'fill',\n      'stroke',\n      'strokeWidth',\n      'opacity',\n      'angle',\n    ];\n    const props = {\n      id: stamp(obj),\n      type: obj.type,\n    };\n\n    extend(props, getProperties(obj, predefinedKeys));\n\n    if (includes(['i-text', 'text'], obj.type)) {\n      extend(props, this._createTextProperties(obj, props));\n    } else if (includes(['rect', 'triangle', 'circle'], obj.type)) {\n      const shapeComp = this.getComponent(components.SHAPE);\n      extend(props, {\n        fill: shapeComp.makeFillPropertyForUserEvent(obj),\n      });\n    }\n\n    return props;\n  }\n\n  /**\n   * Get text object's properties\n   * @param {fabric.Object} obj - fabric text object\n   * @param {Object} props - properties\n   * @returns {Object} properties object\n   */\n  _createTextProperties(obj) {\n    const predefinedKeys = [\n      'text',\n      'fontFamily',\n      'fontSize',\n      'fontStyle',\n      'fontWeight',\n      'textAlign',\n      'textDecoration',\n      'fontWeight',\n    ];\n    const props = {};\n    extend(props, getProperties(obj, predefinedKeys));\n\n    return props;\n  }\n\n  /**\n   * Add object array by id\n   * @param {fabric.Object} obj - fabric object\n   * @returns {number} object id\n   */\n  _addFabricObject(obj) {\n    const id = stamp(obj);\n    this._objects[id] = obj;\n\n    return id;\n  }\n\n  /**\n   * Remove an object in array yb id\n   * @param {number} id - object id\n   */\n  _removeFabricObject(id) {\n    delete this._objects[id];\n  }\n\n  /**\n   * Reset targetObjectForCopyPaste value from activeObject\n   */\n  resetTargetObjectForCopyPaste() {\n    const activeObject = this.getActiveObject();\n\n    if (activeObject) {\n      this.targetObjectForCopyPaste = activeObject;\n    }\n  }\n\n  /**\n   * Paste fabric object\n   * @returns {Promise}\n   */\n  pasteObject() {\n    if (!this.targetObjectForCopyPaste) {\n      return Promise.resolve([]);\n    }\n\n    const targetObject = this.targetObjectForCopyPaste;\n    const isGroupSelect = targetObject.type === 'activeSelection';\n    const targetObjects = isGroupSelect ? targetObject.getObjects() : [targetObject];\n    let newTargetObject = null;\n\n    this.discardSelection();\n\n    return this._cloneObject(targetObjects).then((addedObjects) => {\n      if (addedObjects.length > 1) {\n        newTargetObject = this.getActiveSelectionFromObjects(addedObjects);\n      } else {\n        [newTargetObject] = addedObjects;\n      }\n      this.targetObjectForCopyPaste = newTargetObject;\n      this.setActiveObject(newTargetObject);\n    });\n  }\n\n  /**\n   * Clone object\n   * @param {fabric.Object} targetObjects - fabric object\n   * @returns {Promise}\n   * @private\n   */\n  _cloneObject(targetObjects) {\n    const addedObjects = snippet.map(targetObjects, (targetObject) =>\n      this._cloneObjectItem(targetObject)\n    );\n\n    return Promise.all(addedObjects);\n  }\n\n  /**\n   * Clone object one item\n   * @param {fabric.Object} targetObject - fabric object\n   * @returns {Promise}\n   * @private\n   */\n  _cloneObjectItem(targetObject) {\n    return this._copyFabricObjectForPaste(targetObject).then((clonedObject) => {\n      const objectProperties = this.createObjectProperties(clonedObject);\n      this.add(clonedObject);\n\n      this.fire(events.ADD_OBJECT, objectProperties);\n\n      return clonedObject;\n    });\n  }\n\n  /**\n   * Copy fabric object with Changed position for copy and paste\n   * @param {fabric.Object} targetObject - fabric object\n   * @returns {Promise}\n   * @private\n   */\n  _copyFabricObjectForPaste(targetObject) {\n    const addExtraPx = (value, isReverse) =>\n      isReverse ? value - EXTRA_PX_FOR_PASTE : value + EXTRA_PX_FOR_PASTE;\n\n    return this._copyFabricObject(targetObject).then((clonedObject) => {\n      const { left, top, width, height } = clonedObject;\n      const { width: canvasWidth, height: canvasHeight } = this.getCanvasSize();\n      const rightEdge = left + width / 2;\n      const bottomEdge = top + height / 2;\n\n      clonedObject.set(\n        snippet.extend(\n          {\n            left: addExtraPx(left, rightEdge + EXTRA_PX_FOR_PASTE > canvasWidth),\n            top: addExtraPx(top, bottomEdge + EXTRA_PX_FOR_PASTE > canvasHeight),\n          },\n          fObjectOptions.SELECTION_STYLE\n        )\n      );\n\n      return clonedObject;\n    });\n  }\n\n  /**\n   * Copy fabric object\n   * @param {fabric.Object} targetObject - fabric object\n   * @returns {Promise}\n   * @private\n   */\n  _copyFabricObject(targetObject) {\n    return new Promise((resolve) => {\n      targetObject.clone((cloned) => {\n        const shapeComp = this.getComponent(components.SHAPE);\n        if (isShape(cloned)) {\n          shapeComp.processForCopiedObject(cloned, targetObject);\n        }\n\n        resolve(cloned);\n      });\n    });\n  }\n}\n\nCustomEvents.mixin(Graphics);\n\nexport default Graphics;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Image loader\n */\nimport Component from '@/interface/component';\nimport { Promise } from '@/util';\nimport { componentNames, rejectMessages } from '@/consts';\n\nconst imageOption = {\n  padding: 0,\n  crossOrigin: 'Anonymous',\n};\n\n/**\n * ImageLoader components\n * @extends {Component}\n * @class ImageLoader\n * @param {Graphics} graphics - Graphics instance\n * @ignore\n */\nclass ImageLoader extends Component {\n  constructor(graphics) {\n    super(componentNames.IMAGE_LOADER, graphics);\n  }\n\n  /**\n   * Load image from url\n   * @param {?string} imageName - File name\n   * @param {?(fabric.Image|string)} img - fabric.Image instance or URL of an image\n   * @returns {Promise}\n   */\n  load(imageName, img) {\n    let promise;\n\n    if (!imageName && !img) {\n      // Back to the initial state, not error.\n      const canvas = this.getCanvas();\n\n      canvas.backgroundImage = null;\n      canvas.renderAll();\n\n      promise = new Promise((resolve) => {\n        this.setCanvasImage('', null);\n        resolve();\n      });\n    } else {\n      promise = this._setBackgroundImage(img).then((oImage) => {\n        this.setCanvasImage(imageName, oImage);\n        this.adjustCanvasDimension();\n\n        return oImage;\n      });\n    }\n\n    return promise;\n  }\n\n  /**\n   * Set background image\n   * @param {?(fabric.Image|String)} img fabric.Image instance or URL of an image to set background to\n   * @returns {Promise}\n   * @private\n   */\n  _setBackgroundImage(img) {\n    if (!img) {\n      return Promise.reject(rejectMessages.loadImage);\n    }\n\n    return new Promise((resolve, reject) => {\n      const canvas = this.getCanvas();\n\n      canvas.setBackgroundImage(\n        img,\n        () => {\n          const oImage = canvas.backgroundImage;\n\n          if (oImage && oImage.getElement()) {\n            resolve(oImage);\n          } else {\n            reject(rejectMessages.loadingImageFailed);\n          }\n        },\n        imageOption\n      );\n    });\n  }\n}\n\nexport default ImageLoader;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Image crop module (start cropping, end cropping)\n */\nimport snippet from '../codeSnippet';\nimport fabric from 'fabric';\nimport Component from '@/interface/component';\nimport Cropzone from '@/extension/cropzone';\nimport { keyCodes, componentNames, CROPZONE_DEFAULT_OPTIONS } from '@/consts';\nimport { clamp, fixFloatingPoint } from '@/util';\n\nconst MOUSE_MOVE_THRESHOLD = 10;\nconst DEFAULT_OPTION = {\n  presetRatio: null,\n  top: -10,\n  left: -10,\n  height: 1,\n  width: 1,\n};\n\n/**\n * Cropper components\n * @param {Graphics} graphics - Graphics instance\n * @extends {Component}\n * @class Cropper\n * @ignore\n */\nclass Cropper extends Component {\n  constructor(graphics) {\n    super(componentNames.CROPPER, graphics);\n\n    /**\n     * Cropzone\n     * @type {Cropzone}\n     * @private\n     */\n    this._cropzone = null;\n\n    /**\n     * StartX of Cropzone\n     * @type {number}\n     * @private\n     */\n    this._startX = null;\n\n    /**\n     * StartY of Cropzone\n     * @type {number}\n     * @private\n     */\n    this._startY = null;\n\n    /**\n     * State whether shortcut key is pressed or not\n     * @type {boolean}\n     * @private\n     */\n    this._withShiftKey = false;\n\n    /**\n     * Listeners\n     * @type {object.<string, function>}\n     * @private\n     */\n    this._listeners = {\n      keydown: this._onKeyDown.bind(this),\n      keyup: this._onKeyUp.bind(this),\n      mousedown: this._onFabricMouseDown.bind(this),\n      mousemove: this._onFabricMouseMove.bind(this),\n      mouseup: this._onFabricMouseUp.bind(this),\n    };\n  }\n\n  /**\n   * Start cropping\n   */\n  start() {\n    if (this._cropzone) {\n      return;\n    }\n    const canvas = this.getCanvas();\n\n    canvas.forEachObject((obj) => {\n      // {@link http://fabricjs.com/docs/fabric.Object.html#evented}\n      obj.evented = false;\n    });\n\n    this._cropzone = new Cropzone(\n      canvas,\n      snippet.extend(\n        {\n          left: 0,\n          top: 0,\n          width: 0.5,\n          height: 0.5,\n          strokeWidth: 0, // {@link https://github.com/kangax/fabric.js/issues/2860}\n          cornerSize: 10,\n          cornerColor: 'black',\n          fill: 'transparent',\n        },\n        CROPZONE_DEFAULT_OPTIONS,\n        this.graphics.cropSelectionStyle\n      )\n    );\n\n    canvas.discardActiveObject();\n    canvas.add(this._cropzone);\n    canvas.on('mouse:down', this._listeners.mousedown);\n    canvas.selection = false;\n    canvas.defaultCursor = 'crosshair';\n\n    fabric.util.addListener(document, 'keydown', this._listeners.keydown);\n    fabric.util.addListener(document, 'keyup', this._listeners.keyup);\n  }\n\n  /**\n   * End cropping\n   */\n  end() {\n    const canvas = this.getCanvas();\n    const cropzone = this._cropzone;\n\n    if (!cropzone) {\n      return;\n    }\n    canvas.remove(cropzone);\n    canvas.selection = true;\n    canvas.defaultCursor = 'default';\n    canvas.off('mouse:down', this._listeners.mousedown);\n    canvas.forEachObject((obj) => {\n      obj.evented = true;\n    });\n\n    this._cropzone = null;\n\n    fabric.util.removeListener(document, 'keydown', this._listeners.keydown);\n    fabric.util.removeListener(document, 'keyup', this._listeners.keyup);\n  }\n\n  /**\n   * Change cropzone visible\n   * @param {boolean} visible - cropzone visible state\n   */\n  changeVisibility(visible) {\n    if (this._cropzone) {\n      this._cropzone.set({ visible });\n    }\n  }\n\n  /**\n   * onMousedown handler in fabric canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onFabricMouseDown(fEvent) {\n    const canvas = this.getCanvas();\n\n    if (fEvent.target) {\n      return;\n    }\n\n    canvas.selection = false;\n    const coord = canvas.getPointer(fEvent.e);\n\n    this._startX = coord.x;\n    this._startY = coord.y;\n\n    canvas.on({\n      'mouse:move': this._listeners.mousemove,\n      'mouse:up': this._listeners.mouseup,\n    });\n  }\n\n  /**\n   * onMousemove handler in fabric canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onFabricMouseMove(fEvent) {\n    const canvas = this.getCanvas();\n    const pointer = canvas.getPointer(fEvent.e);\n    const { x, y } = pointer;\n    const cropzone = this._cropzone;\n\n    if (Math.abs(x - this._startX) + Math.abs(y - this._startY) > MOUSE_MOVE_THRESHOLD) {\n      canvas.remove(cropzone);\n      cropzone.set(this._calcRectDimensionFromPoint(x, y));\n\n      canvas.add(cropzone);\n      canvas.setActiveObject(cropzone);\n    }\n  }\n\n  /**\n   * Get rect dimension setting from Canvas-Mouse-Position(x, y)\n   * @param {number} x - Canvas-Mouse-Position x\n   * @param {number} y - Canvas-Mouse-Position Y\n   * @returns {{left: number, top: number, width: number, height: number}}\n   * @private\n   */\n  _calcRectDimensionFromPoint(x, y) {\n    const canvas = this.getCanvas();\n    const zoomLevel = canvas.getZoom();\n    const canvasWidth = canvas.getWidth() / zoomLevel;\n    const canvasHeight = canvas.getHeight() / zoomLevel;\n    const startX = this._startX;\n    const startY = this._startY;\n    let left = clamp(x, 0, startX);\n    let top = clamp(y, 0, startY);\n    let width = clamp(x, startX, canvasWidth) - left; // (startX <= x(mouse) <= canvasWidth) - left\n    let height = clamp(y, startY, canvasHeight) - top; // (startY <= y(mouse) <= canvasHeight) - top\n\n    if (this._withShiftKey) {\n      // make fixed ratio cropzone\n      if (width > height) {\n        height = width;\n      } else if (height > width) {\n        width = height;\n      }\n\n      if (startX >= x) {\n        left = startX - width;\n      }\n\n      if (startY >= y) {\n        top = startY - height;\n      }\n    }\n\n    return {\n      left,\n      top,\n      width,\n      height,\n    };\n  }\n\n  /**\n   * onMouseup handler in fabric canvas\n   * @private\n   */\n  _onFabricMouseUp() {\n    const cropzone = this._cropzone;\n    const listeners = this._listeners;\n    const canvas = this.getCanvas();\n\n    canvas.setActiveObject(cropzone);\n    canvas.requestRenderAll();\n    canvas.off({\n      'mouse:move': listeners.mousemove,\n      'mouse:up': listeners.mouseup,\n    });\n  }\n\n  /**\n   * Get cropped image data\n   * @param {Object} cropRect cropzone rect\n   *  @param {Number} cropRect.left left position\n   *  @param {Number} cropRect.top top position\n   *  @param {Number} cropRect.width width\n   *  @param {Number} cropRect.height height\n   * @returns {?{imageName: string, url: string}} cropped Image data\n   */\n  getCroppedImageData(cropRect) {\n    const canvas = this.getCanvas();\n    const containsCropzone = canvas.contains(this._cropzone);\n    if (!cropRect) {\n      return null;\n    }\n\n    if (containsCropzone) {\n      canvas.remove(this._cropzone);\n    }\n\n    const imageData = {\n      imageName: this.getImageName(),\n      url: canvas.toDataURL(cropRect),\n    };\n\n    if (containsCropzone) {\n      canvas.add(this._cropzone);\n    }\n\n    return imageData;\n  }\n\n  /**\n   * Get cropped rect\n   * @returns {Object} rect\n   */\n  getCropzoneRect() {\n    const cropzone = this._cropzone;\n\n    if (!cropzone.isValid()) {\n      return null;\n    }\n\n    return {\n      left: cropzone.left,\n      top: cropzone.top,\n      width: cropzone.width,\n      height: cropzone.height,\n    };\n  }\n\n  /**\n   * Set a cropzone square\n   * @param {number} [presetRatio] - preset ratio\n   */\n  setCropzoneRect(presetRatio) {\n    const canvas = this.getCanvas();\n    const cropzone = this._cropzone;\n\n    canvas.discardActiveObject();\n    canvas.selection = false;\n    canvas.remove(cropzone);\n\n    cropzone.set(presetRatio ? this._getPresetPropertiesForCropSize(presetRatio) : DEFAULT_OPTION);\n\n    canvas.add(cropzone);\n    canvas.selection = true;\n\n    if (presetRatio) {\n      canvas.setActiveObject(cropzone);\n    }\n  }\n\n  /**\n   * get a cropzone square info\n   * @param {number} presetRatio - preset ratio\n   * @returns {{presetRatio: number, left: number, top: number, width: number, height: number}}\n   * @private\n   */\n  _getPresetPropertiesForCropSize(presetRatio) {\n    const canvas = this.getCanvas();\n    const originalWidth = canvas.getWidth();\n    const originalHeight = canvas.getHeight();\n\n    const standardSize = originalWidth >= originalHeight ? originalWidth : originalHeight;\n    const getScale = (value, orignalValue) => (value > orignalValue ? orignalValue / value : 1);\n\n    let width = standardSize * presetRatio;\n    let height = standardSize;\n\n    const scaleWidth = getScale(width, originalWidth);\n    [width, height] = snippet.map([width, height], (sizeValue) => sizeValue * scaleWidth);\n\n    const scaleHeight = getScale(height, originalHeight);\n    [width, height] = snippet.map([width, height], (sizeValue) =>\n      fixFloatingPoint(sizeValue * scaleHeight)\n    );\n\n    return {\n      presetRatio,\n      top: (originalHeight - height) / 2,\n      left: (originalWidth - width) / 2,\n      width,\n      height,\n    };\n  }\n\n  /**\n   * Keydown event handler\n   * @param {KeyboardEvent} e - Event object\n   * @private\n   */\n  _onKeyDown(e) {\n    if (e.keyCode === keyCodes.SHIFT) {\n      this._withShiftKey = true;\n    }\n  }\n\n  /**\n   * Keyup event handler\n   * @param {KeyboardEvent} e - Event object\n   * @private\n   */\n  _onKeyUp(e) {\n    if (e.keyCode === keyCodes.SHIFT) {\n      this._withShiftKey = false;\n    }\n  }\n}\n\nexport default Cropper;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Cropzone extending fabric.Rect\n */\nimport snippet from '../codeSnippet';\nimport fabric from 'fabric';\nimport { clamp } from '@/util';\nimport { eventNames as events, keyCodes } from '@/consts';\n\nconst CORNER_TYPE_TOP_LEFT = 'tl';\nconst CORNER_TYPE_TOP_RIGHT = 'tr';\nconst CORNER_TYPE_MIDDLE_TOP = 'mt';\nconst CORNER_TYPE_MIDDLE_LEFT = 'ml';\nconst CORNER_TYPE_MIDDLE_RIGHT = 'mr';\nconst CORNER_TYPE_MIDDLE_BOTTOM = 'mb';\nconst CORNER_TYPE_BOTTOM_LEFT = 'bl';\nconst CORNER_TYPE_BOTTOM_RIGHT = 'br';\nconst CORNER_TYPE_LIST = [\n  CORNER_TYPE_TOP_LEFT,\n  CORNER_TYPE_TOP_RIGHT,\n  CORNER_TYPE_MIDDLE_TOP,\n  CORNER_TYPE_MIDDLE_LEFT,\n  CORNER_TYPE_MIDDLE_RIGHT,\n  CORNER_TYPE_MIDDLE_BOTTOM,\n  CORNER_TYPE_BOTTOM_LEFT,\n  CORNER_TYPE_BOTTOM_RIGHT,\n];\nconst NOOP_FUNCTION = () => {};\n\n/**\n * Align with cropzone ratio\n * @param {string} selectedCorner - selected corner type\n * @returns {{width: number, height: number}}\n * @private\n */\nfunction cornerTypeValid(selectedCorner) {\n  return CORNER_TYPE_LIST.indexOf(selectedCorner) >= 0;\n}\n\n/**\n * return scale basis type\n * @param {number} diffX - X distance of the cursor and corner.\n * @param {number} diffY - Y distance of the cursor and corner.\n * @returns {string}\n * @private\n */\nfunction getScaleBasis(diffX, diffY) {\n  return diffX > diffY ? 'width' : 'height';\n}\n\n/**\n * Cropzone object\n * Issue: IE7, 8(with excanvas)\n *  - Cropzone is a black zone without transparency.\n * @class Cropzone\n * @extends {fabric.Rect}\n * @ignore\n */\nconst Cropzone = fabric.util.createClass(\n  fabric.Rect,\n  /** @lends Cropzone.prototype */ {\n    /**\n     * Constructor\n     * @param {Object} canvas canvas\n     * @param {Object} options Options object\n     * @param {Object} extendsOptions object for extends \"options\"\n     * @override\n     */\n    initialize(canvas, options, extendsOptions) {\n      options = snippet.extend(options, extendsOptions);\n      options.type = 'cropzone';\n\n      this.callSuper('initialize', options);\n      this._addEventHandler();\n\n      this.canvas = canvas;\n      this.options = options;\n\n      // Hide rotate control since the cropzone can't be rotated\n      this.setControlVisible('mtr', false);\n    },\n    canvasEventDelegation(eventName) {\n      let delegationState = 'unregistered';\n      const isRegistered = this.canvasEventTrigger[eventName] !== NOOP_FUNCTION;\n      if (isRegistered) {\n        delegationState = 'registered';\n      } else if ([events.OBJECT_MOVED, events.OBJECT_SCALED].indexOf(eventName) < 0) {\n        delegationState = 'none';\n      }\n\n      return delegationState;\n    },\n    canvasEventRegister(eventName, eventTrigger) {\n      this.canvasEventTrigger[eventName] = eventTrigger;\n    },\n    _addEventHandler() {\n      this.canvasEventTrigger = {\n        [events.OBJECT_MOVED]: NOOP_FUNCTION,\n        [events.OBJECT_SCALED]: NOOP_FUNCTION,\n      };\n      this.on({\n        moving: this._onMoving.bind(this),\n        scaling: this._onScaling.bind(this),\n      });\n      fabric.util.addListener(document, 'keydown', this._onKeyDown.bind(this));\n      fabric.util.addListener(document, 'keyup', this._onKeyUp.bind(this));\n    },\n    _renderCropzone(ctx) {\n      const cropzoneDashLineWidth = 7;\n      const cropzoneDashLineOffset = 7;\n\n      // Calc original scale\n      const originalFlipX = this.flipX ? -1 : 1;\n      const originalFlipY = this.flipY ? -1 : 1;\n      const originalScaleX = originalFlipX / this.scaleX;\n      const originalScaleY = originalFlipY / this.scaleY;\n\n      // Set original scale\n      ctx.scale(originalScaleX, originalScaleY);\n\n      // Render outer rect\n      this._fillOuterRect(ctx, 'rgba(0, 0, 0, 0.5)');\n\n      if (this.options.lineWidth) {\n        this._strokeBorder(ctx, 'rgb(255, 255, 255)', {\n          lineWidth: this.options.lineWidth,\n        });\n      } else {\n        // Black dash line\n        this._strokeBorder(ctx, 'rgb(0, 0, 0)', {\n          lineDashWidth: cropzoneDashLineWidth,\n        });\n\n        // White dash line\n        this._strokeBorder(ctx, 'rgb(255, 255, 255)', {\n          lineDashWidth: cropzoneDashLineWidth,\n          lineDashOffset: cropzoneDashLineOffset,\n        });\n      }\n\n      // Reset scale\n      ctx.scale(1 / originalScaleX, 1 / originalScaleY);\n    },\n\n    /**\n     * Render Crop-zone\n     * @private\n     * @override\n     */\n    _render(ctx) {\n      this.callSuper('_render', ctx);\n\n      this._renderCropzone(ctx);\n    },\n\n    /**\n     * Cropzone-coordinates with outer rectangle\n     *\n     *     x0     x1         x2      x3\n     *  y0 +--------------------------+\n     *     |///////|//////////|///////|    // <--- \"Outer-rectangle\"\n     *     |///////|//////////|///////|\n     *  y1 +-------+----------+-------+\n     *     |///////| Cropzone |///////|    Cropzone is the \"Inner-rectangle\"\n     *     |///////|  (0, 0)  |///////|    Center point (0, 0)\n     *  y2 +-------+----------+-------+\n     *     |///////|//////////|///////|\n     *     |///////|//////////|///////|\n     *  y3 +--------------------------+\n     *\n     * @typedef {{x: Array<number>, y: Array<number>}} cropzoneCoordinates\n     * @ignore\n     */\n\n    /**\n     * Fill outer rectangle\n     * @param {CanvasRenderingContext2D} ctx - Context\n     * @param {string|CanvasGradient|CanvasPattern} fillStyle - Fill-style\n     * @private\n     */\n    _fillOuterRect(ctx, fillStyle) {\n      const { x, y } = this._getCoordinates();\n\n      ctx.save();\n      ctx.fillStyle = fillStyle;\n      ctx.beginPath();\n\n      // Outer rectangle\n      // Numbers are +/-1 so that overlay edges don't get blurry.\n      ctx.moveTo(x[0] - 1, y[0] - 1);\n      ctx.lineTo(x[3] + 1, y[0] - 1);\n      ctx.lineTo(x[3] + 1, y[3] + 1);\n      ctx.lineTo(x[0] - 1, y[3] + 1);\n      ctx.lineTo(x[0] - 1, y[0] - 1);\n      ctx.closePath();\n\n      // Inner rectangle\n      ctx.moveTo(x[1], y[1]);\n      ctx.lineTo(x[1], y[2]);\n      ctx.lineTo(x[2], y[2]);\n      ctx.lineTo(x[2], y[1]);\n      ctx.lineTo(x[1], y[1]);\n      ctx.closePath();\n\n      ctx.fill();\n      ctx.restore();\n    },\n\n    /**\n     * Draw Inner grid line\n     * @param {CanvasRenderingContext2D} ctx - Context\n     * @private\n     */\n    _fillInnerRect(ctx) {\n      const { x: outerX, y: outerY } = this._getCoordinates();\n      const x = this._caculateInnerPosition(outerX, (outerX[2] - outerX[1]) / 3);\n      const y = this._caculateInnerPosition(outerY, (outerY[2] - outerY[1]) / 3);\n\n      ctx.save();\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.7)';\n      ctx.lineWidth = this.options.lineWidth;\n      ctx.beginPath();\n\n      ctx.moveTo(x[0], y[1]);\n      ctx.lineTo(x[3], y[1]);\n\n      ctx.moveTo(x[0], y[2]);\n      ctx.lineTo(x[3], y[2]);\n\n      ctx.moveTo(x[1], y[0]);\n      ctx.lineTo(x[1], y[3]);\n\n      ctx.moveTo(x[2], y[0]);\n      ctx.lineTo(x[2], y[3]);\n      ctx.stroke();\n      ctx.closePath();\n\n      ctx.restore();\n    },\n\n    /**\n     * Calculate Inner Position\n     * @param {Array} outer - outer position\n     * @param {number} size - interval for calculate\n     * @returns {Array} - inner position\n     * @private\n     */\n    _caculateInnerPosition(outer, size) {\n      const position = [];\n      position[0] = outer[1];\n      position[1] = outer[1] + size;\n      position[2] = outer[1] + size * 2;\n      position[3] = outer[2];\n\n      return position;\n    },\n\n    /**\n     * Get coordinates\n     * @returns {cropzoneCoordinates} - {@link cropzoneCoordinates}\n     * @private\n     */\n    _getCoordinates() {\n      const { canvas, width, height, left, top } = this;\n      const halfWidth = width / 2;\n      const halfHeight = height / 2;\n      const zoomLevel = canvas.getZoom();\n      const canvasWidth = canvas.getWidth() / zoomLevel; // Convert from HTML dimensions to fabric object dimensions\n      const canvasHeight = canvas.getHeight() / zoomLevel; // Convert from HTML dimensions to fabric object dimensions\n\n      return {\n        x: snippet.map(\n          [\n            -(halfWidth + left), // x0\n            -halfWidth, // x1\n            halfWidth, // x2\n            halfWidth + (canvasWidth - left - width), // x3\n          ],\n          Math.ceil\n        ),\n        y: snippet.map(\n          [\n            -(halfHeight + top), // y0\n            -halfHeight, // y1\n            halfHeight, // y2\n            halfHeight + (canvasHeight - top - height), // y3\n          ],\n          Math.ceil\n        ),\n      };\n    },\n\n    /**\n     * Stroke border\n     * @param {CanvasRenderingContext2D} ctx - Context\n     * @param {string|CanvasGradient|CanvasPattern} strokeStyle - Stroke-style\n     * @param {number} lineDashWidth - Dash width\n     * @param {number} [lineDashOffset] - Dash offset\n     * @param {number} [lineWidth] - line width\n     * @private\n     */\n    _strokeBorder(ctx, strokeStyle, { lineDashWidth, lineDashOffset, lineWidth }) {\n      const halfWidth = this.width / 2;\n      const halfHeight = this.height / 2;\n\n      ctx.save();\n      ctx.strokeStyle = strokeStyle;\n\n      if (ctx.setLineDash) {\n        ctx.setLineDash([lineDashWidth, lineDashWidth]);\n      }\n      if (lineDashOffset) {\n        ctx.lineDashOffset = lineDashOffset;\n      }\n      if (lineWidth) {\n        ctx.lineWidth = lineWidth;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(-halfWidth, -halfHeight);\n      ctx.lineTo(halfWidth, -halfHeight);\n      ctx.lineTo(halfWidth, halfHeight);\n      ctx.lineTo(-halfWidth, halfHeight);\n      ctx.lineTo(-halfWidth, -halfHeight);\n      ctx.stroke();\n\n      ctx.restore();\n    },\n\n    /**\n     * onMoving event listener\n     * @private\n     */\n    _onMoving() {\n      const { height, width, left, top } = this;\n      const zoomLevel = this.canvas.getZoom();\n      const maxLeft = this.canvas.getWidth() / zoomLevel - width;\n      const maxTop = this.canvas.getHeight() / zoomLevel - height;\n\n      this.left = clamp(left, 0, maxLeft);\n      this.top = clamp(top, 0, maxTop);\n\n      this.canvasEventTrigger[events.OBJECT_MOVED](this);\n    },\n\n    /**\n     * onScaling event listener\n     * @param {{e: MouseEvent}} fEvent - Fabric event\n     * @private\n     */\n    _onScaling(fEvent) {\n      const selectedCorner = fEvent.transform.corner;\n      const pointer = this.canvas.getPointer(fEvent.e);\n\n      // Due to how the crop zone works, we don't want fabric to do the scaling.\n      // We need to reset the scale before calculating our new position to avoid resize jankiness\n      this.scale(1);\n\n      const settings = this._calcScalingSizeFromPointer(pointer, selectedCorner);\n      this.set(settings);\n\n      this.canvasEventTrigger[events.OBJECT_SCALED](this);\n    },\n\n    /**\n     * Calc scaled size from mouse pointer with selected corner\n     * @param {{x: number, y: number}} pointer - Mouse position\n     * @param {string} selectedCorner - selected corner type\n     * @returns {Object} Having left or(and) top or(and) width or(and) height.\n     * @private\n     */\n    _calcScalingSizeFromPointer(pointer, selectedCorner) {\n      const isCornerTypeValid = cornerTypeValid(selectedCorner);\n\n      return isCornerTypeValid && this._resizeCropZone(pointer, selectedCorner);\n    },\n\n    /**\n     * Align with cropzone ratio\n     * @param {number} width - cropzone width\n     * @param {number} height - cropzone height\n     * @param {number} maxWidth - limit max width\n     * @param {number} maxHeight - limit max height\n     * @param {number} scaleTo - cropzone ratio\n     * @returns {{width: number, height: number}}\n     * @private\n     */\n    adjustRatioCropzoneSize({ width, height, leftMaker, topMaker, maxWidth, maxHeight, scaleTo }) {\n      width = maxWidth ? clamp(width, 1, maxWidth) : width;\n      height = maxHeight ? clamp(height, 1, maxHeight) : height;\n\n      if (!this.presetRatio) {\n        if (this._withShiftKey) {\n          // make fixed ratio cropzone\n          if (width > height) {\n            height = width;\n          } else if (height > width) {\n            width = height;\n          }\n        }\n\n        return {\n          width,\n          height,\n          left: leftMaker(width),\n          top: topMaker(height),\n        };\n      }\n\n      if (scaleTo === 'width') {\n        height = width / this.presetRatio;\n      } else {\n        width = height * this.presetRatio;\n      }\n\n      const maxScaleFactor = Math.min(maxWidth / width, maxHeight / height);\n      if (maxScaleFactor <= 1) {\n        [width, height] = [width, height].map((v) => v * maxScaleFactor);\n      }\n\n      return {\n        width,\n        height,\n        left: leftMaker(width),\n        top: topMaker(height),\n      };\n    },\n\n    /**\n     * Get dimension last state cropzone\n     * @returns {{rectTop: number, rectLeft: number, rectWidth: number, rectHeight: number}}\n     * @private\n     */\n    _getCropzoneRectInfo() {\n      const zoomLevel = this.canvas.getZoom();\n      const canvasWidth = this.canvas.getWidth() / zoomLevel; // Convert from HTML dimensions to fabric object dimensions\n      const canvasHeight = this.canvas.getHeight() / zoomLevel; // Convert from HTML dimensions to fabric object dimensions\n      const {\n        top: rectTop,\n        left: rectLeft,\n        width: rectWidth,\n        height: rectHeight,\n      } = this.getBoundingRect(true, true); // Use absolute dimensions to work with zooming\n\n      return {\n        rectTop,\n        rectLeft,\n        rectWidth,\n        rectHeight,\n        rectRight: rectLeft + rectWidth,\n        rectBottom: rectTop + rectHeight,\n        canvasWidth,\n        canvasHeight,\n      };\n    },\n\n    /**\n     * Calc scaling dimension\n     * @param {Object} position - Mouse position\n     * @param {string} corner - corner type\n     * @returns {{left: number, top: number, width: number, height: number}}\n     * @private\n     */\n    _resizeCropZone({ x, y }, corner) {\n      const {\n        rectWidth,\n        rectHeight,\n        rectTop,\n        rectLeft,\n        rectBottom,\n        rectRight,\n        canvasWidth,\n        canvasHeight,\n      } = this._getCropzoneRectInfo();\n\n      const resizeInfoMap = {\n        tl: {\n          width: rectRight - x,\n          height: rectBottom - y,\n          leftMaker: (newWidth) => rectRight - newWidth,\n          topMaker: (newHeight) => rectBottom - newHeight,\n          maxWidth: rectRight,\n          maxHeight: rectBottom,\n          scaleTo: getScaleBasis(rectLeft - x, rectTop - y),\n        },\n        tr: {\n          width: x - rectLeft,\n          height: rectBottom - y,\n          leftMaker: () => rectLeft,\n          topMaker: (newHeight) => rectBottom - newHeight,\n          maxWidth: canvasWidth - rectLeft,\n          maxHeight: rectBottom,\n          scaleTo: getScaleBasis(x - rectRight, rectTop - y),\n        },\n        mt: {\n          width: rectWidth,\n          height: rectBottom - y,\n          leftMaker: () => rectLeft,\n          topMaker: (newHeight) => rectBottom - newHeight,\n          maxWidth: canvasWidth - rectLeft,\n          maxHeight: rectBottom,\n          scaleTo: 'height',\n        },\n        ml: {\n          width: rectRight - x,\n          height: rectHeight,\n          leftMaker: (newWidth) => rectRight - newWidth,\n          topMaker: () => rectTop,\n          maxWidth: rectRight,\n          maxHeight: canvasHeight - rectTop,\n          scaleTo: 'width',\n        },\n        mr: {\n          width: x - rectLeft,\n          height: rectHeight,\n          leftMaker: () => rectLeft,\n          topMaker: () => rectTop,\n          maxWidth: canvasWidth - rectLeft,\n          maxHeight: canvasHeight - rectTop,\n          scaleTo: 'width',\n        },\n        mb: {\n          width: rectWidth,\n          height: y - rectTop,\n          leftMaker: () => rectLeft,\n          topMaker: () => rectTop,\n          maxWidth: canvasWidth - rectLeft,\n          maxHeight: canvasHeight - rectTop,\n          scaleTo: 'height',\n        },\n        bl: {\n          width: rectRight - x,\n          height: y - rectTop,\n          leftMaker: (newWidth) => rectRight - newWidth,\n          topMaker: () => rectTop,\n          maxWidth: rectRight,\n          maxHeight: canvasHeight - rectTop,\n          scaleTo: getScaleBasis(rectLeft - x, y - rectBottom),\n        },\n        br: {\n          width: x - rectLeft,\n          height: y - rectTop,\n          leftMaker: () => rectLeft,\n          topMaker: () => rectTop,\n          maxWidth: canvasWidth - rectLeft,\n          maxHeight: canvasHeight - rectTop,\n          scaleTo: getScaleBasis(x - rectRight, y - rectBottom),\n        },\n      };\n\n      return this.adjustRatioCropzoneSize(resizeInfoMap[corner]);\n    },\n\n    /**\n     * Return the whether this cropzone is valid\n     * @returns {boolean}\n     */\n    isValid() {\n      return this.left >= 0 && this.top >= 0 && this.width > 0 && this.height > 0;\n    },\n\n    /**\n     * Keydown event handler\n     * @param {{number}} keyCode - Event keyCode\n     * @private\n     */\n    _onKeyDown({ keyCode }) {\n      if (keyCode === keyCodes.SHIFT) {\n        this._withShiftKey = true;\n      }\n    },\n\n    /**\n     * Keyup event handler\n     * @param {{number}} keyCode - Event keyCode\n     * @private\n     */\n    _onKeyUp({ keyCode }) {\n      if (keyCode === keyCodes.SHIFT) {\n        this._withShiftKey = false;\n      }\n    },\n  }\n);\n\nexport default Cropzone;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Image flip module\n */\nimport snippet from '../codeSnippet';\nimport Component from '@/interface/component';\nimport { Promise } from '@/util';\nimport { componentNames, rejectMessages } from '@/consts';\n\n/**\n * Flip\n * @class Flip\n * @param {Graphics} graphics - Graphics instance\n * @extends {Component}\n * @ignore\n */\nclass Flip extends Component {\n  constructor(graphics) {\n    super(componentNames.FLIP, graphics);\n  }\n\n  /**\n   * Get current flip settings\n   * @returns {{flipX: Boolean, flipY: Boolean}}\n   */\n  getCurrentSetting() {\n    const canvasImage = this.getCanvasImage();\n\n    return {\n      flipX: canvasImage.flipX,\n      flipY: canvasImage.flipY,\n    };\n  }\n\n  /**\n   * Set flipX, flipY\n   * @param {{flipX: Boolean, flipY: Boolean}} newSetting - Flip setting\n   * @returns {Promise}\n   */\n  set(newSetting) {\n    const setting = this.getCurrentSetting();\n    const isChangingFlipX = setting.flipX !== newSetting.flipX;\n    const isChangingFlipY = setting.flipY !== newSetting.flipY;\n\n    if (!isChangingFlipX && !isChangingFlipY) {\n      return Promise.reject(rejectMessages.flip);\n    }\n\n    snippet.extend(setting, newSetting);\n    this.setImageProperties(setting, true);\n    this._invertAngle(isChangingFlipX, isChangingFlipY);\n    this._flipObjects(isChangingFlipX, isChangingFlipY);\n\n    return Promise.resolve({\n      flipX: setting.flipX,\n      flipY: setting.flipY,\n      angle: this.getCanvasImage().angle,\n    });\n  }\n\n  /**\n   * Invert image angle for flip\n   * @param {boolean} isChangingFlipX - Change flipX\n   * @param {boolean} isChangingFlipY - Change flipY\n   */\n  _invertAngle(isChangingFlipX, isChangingFlipY) {\n    const canvasImage = this.getCanvasImage();\n    let { angle } = canvasImage;\n\n    if (isChangingFlipX) {\n      angle *= -1;\n    }\n    if (isChangingFlipY) {\n      angle *= -1;\n    }\n    canvasImage.rotate(parseFloat(angle)).setCoords(); // parseFloat for -0 to 0\n  }\n\n  /**\n   * Flip objects\n   * @param {boolean} isChangingFlipX - Change flipX\n   * @param {boolean} isChangingFlipY - Change flipY\n   * @private\n   */\n  _flipObjects(isChangingFlipX, isChangingFlipY) {\n    const canvas = this.getCanvas();\n\n    if (isChangingFlipX) {\n      canvas.forEachObject((obj) => {\n        obj\n          .set({\n            angle: parseFloat(obj.angle * -1), // parseFloat for -0 to 0\n            flipX: !obj.flipX,\n            left: canvas.width - obj.left,\n          })\n          .setCoords();\n      });\n    }\n    if (isChangingFlipY) {\n      canvas.forEachObject((obj) => {\n        obj\n          .set({\n            angle: parseFloat(obj.angle * -1), // parseFloat for -0 to 0\n            flipY: !obj.flipY,\n            top: canvas.height - obj.top,\n          })\n          .setCoords();\n      });\n    }\n    canvas.renderAll();\n  }\n\n  /**\n   * Reset flip settings\n   * @returns {Promise}\n   */\n  reset() {\n    return this.set({\n      flipX: false,\n      flipY: false,\n    });\n  }\n\n  /**\n   * Flip x\n   * @returns {Promise}\n   */\n  flipX() {\n    const current = this.getCurrentSetting();\n\n    return this.set({\n      flipX: !current.flipX,\n      flipY: current.flipY,\n    });\n  }\n\n  /**\n   * Flip y\n   * @returns {Promise}\n   */\n  flipY() {\n    const current = this.getCurrentSetting();\n\n    return this.set({\n      flipX: current.flipX,\n      flipY: !current.flipY,\n    });\n  }\n}\n\nexport default Flip;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Image rotation module\n */\nimport fabric from 'fabric';\nimport Component from '@/interface/component';\nimport { Promise } from '@/util';\nimport { componentNames } from '@/consts';\n\n/**\n * Image Rotation component\n * @class Rotation\n * @extends {Component}\n * @param {Graphics} graphics - Graphics instance\n * @ignore\n */\nclass Rotation extends Component {\n  constructor(graphics) {\n    super(componentNames.ROTATION, graphics);\n  }\n\n  /**\n   * Get current angle\n   * @returns {Number}\n   */\n  getCurrentAngle() {\n    return this.getCanvasImage().angle;\n  }\n\n  /**\n   * Set angle of the image\n   *\n   *  Do not call \"this.setImageProperties\" for setting angle directly.\n   *  Before setting angle, The originX,Y of image should be set to center.\n   *      See \"http://fabricjs.com/docs/fabric.Object.html#setAngle\"\n   *\n   * @param {number} angle - Angle value\n   * @returns {Promise}\n   */\n  setAngle(angle) {\n    const oldAngle = this.getCurrentAngle() % 360; // The angle is lower than 2*PI(===360 degrees)\n\n    angle %= 360;\n\n    const canvasImage = this.getCanvasImage();\n    const oldImageCenter = canvasImage.getCenterPoint();\n    canvasImage.set({ angle }).setCoords();\n    this.adjustCanvasDimensionForRotate();\n    const newImageCenter = canvasImage.getCenterPoint();\n    this._rotateForEachObject(oldImageCenter, newImageCenter, angle - oldAngle);\n\n    return Promise.resolve(angle);\n  }\n\n  /**\n   * Rotate for each object\n   * @param {fabric.Point} oldImageCenter - Image center point before rotation\n   * @param {fabric.Point} newImageCenter - Image center point after rotation\n   * @param {number} angleDiff - Image angle difference after rotation\n   * @private\n   */\n  _rotateForEachObject(oldImageCenter, newImageCenter, angleDiff) {\n    const canvas = this.getCanvas();\n    const centerDiff = {\n      x: oldImageCenter.x - newImageCenter.x,\n      y: oldImageCenter.y - newImageCenter.y,\n    };\n\n    canvas.forEachObject((obj) => {\n      const objCenter = obj.getCenterPoint();\n      const radian = fabric.util.degreesToRadians(angleDiff);\n      const newObjCenter = fabric.util.rotatePoint(objCenter, oldImageCenter, radian);\n\n      obj.set({\n        left: newObjCenter.x - centerDiff.x,\n        top: newObjCenter.y - centerDiff.y,\n        angle: (obj.angle + angleDiff) % 360,\n      });\n      obj.setCoords();\n    });\n    canvas.renderAll();\n  }\n\n  /**\n   * Rotate the image\n   * @param {number} additionalAngle - Additional angle\n   * @returns {Promise}\n   */\n  rotate(additionalAngle) {\n    const current = this.getCurrentAngle();\n\n    return this.setAngle(current + additionalAngle);\n  }\n}\n\nexport default Rotation;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Free drawing module, Set brush\n */\nimport fabric from 'fabric';\nimport Component from '@/interface/component';\nimport { componentNames } from '@/consts';\n\n/**\n * FreeDrawing\n * @class FreeDrawing\n * @param {Graphics} graphics - Graphics instance\n * @extends {Component}\n * @ignore\n */\nclass FreeDrawing extends Component {\n  constructor(graphics) {\n    super(componentNames.FREE_DRAWING, graphics);\n\n    /**\n     * Brush width\n     * @type {number}\n     */\n    this.width = 12;\n\n    /**\n     * fabric.Color instance for brush color\n     * @type {fabric.Color}\n     */\n    this.oColor = new fabric.Color('rgba(0, 0, 0, 0.5)');\n\n    /**\n     * Listeners\n     * @type {object.<string, function>}\n     * @private\n     */\n    this._listeners = {\n      mousedown: this._onFabricMouseDown.bind(this),\n      mouseup: this._onFabricMouseUp.bind(this),\n    };\n  }\n\n  /**\n   * Start free drawing mode\n   * @param {{width: ?number, color: ?string}} [setting] - Brush width & color\n   */\n  start(setting) {\n    const canvas = this.getCanvas();\n\n    canvas.isDrawingMode = true;\n    this.setBrush(setting);\n\n    canvas.on({\n      'mouse:down': this._listeners.mousedown,\n    });\n  }\n\n  /**\n   * Set brush\n   * @param {{width: ?number, color: ?string}} [setting] - Brush width & color\n   */\n  setBrush(setting) {\n    const brush = this.getCanvas().freeDrawingBrush;\n\n    setting = setting || {};\n    this.width = setting.width || this.width;\n    if (setting.color) {\n      this.oColor = new fabric.Color(setting.color);\n    }\n    brush.width = this.width;\n    brush.color = this.oColor.toRgba();\n  }\n\n  /**\n   * End free drawing mode\n   */\n  end() {\n    const canvas = this.getCanvas();\n\n    canvas.isDrawingMode = false;\n    canvas.off('mouse:down', this._listeners.mousedown);\n  }\n\n  /**\n   * Mousedown event handler in fabric canvas\n   * @private\n   */\n  _onFabricMouseDown() {\n    const canvas = this.getCanvas();\n    canvas.isDrawingMode = true;\n\n    canvas.on({\n      'mouse:up': this._listeners.mouseup,\n    });\n  }\n\n  /**\n   * Mouseup event handler in fabric canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event object\n   * @private\n   */\n  _onFabricMouseUp(fEvent) {\n    const canvas = this.getCanvas();\n\n    const target = canvas.findTarget(fEvent.e);\n    if (target) {\n      target.set({\n        perPixelTargetFind: false,\n      });\n\n      canvas.setActiveObject(target);\n    }\n\n    canvas.off({\n      'mouse:up': this._listeners.mouseup,\n    });\n\n    canvas.isDrawingMode = false;\n  }\n}\n\nexport default FreeDrawing;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Free drawing module, Set brush\n */\nimport snippet from '../codeSnippet';\nimport fabric from 'fabric';\nimport Component from '@/interface/component';\nimport ArrowLine from '@/extension/arrowLine';\nimport { eventNames, componentNames, fObjectOptions, defaultPixelTargetTolerance } from '@/consts';\n\n/**\n * Line\n * @class Line\n * @param {Graphics} graphics - Graphics instance\n * @extends {Component}\n * @ignore\n */\nclass Line extends Component {\n  constructor(graphics) {\n    super(componentNames.LINE, graphics);\n\n    /**\n     * Brush width\n     * @type {number}\n     * @private\n     */\n    this._width = 12;\n\n    /**\n     * fabric.Color instance for brush color\n     * @type {fabric.Color}\n     * @private\n     */\n    this._oColor = new fabric.Color('rgba(0, 0, 0, 0.5)');\n\n    /**\n     * Listeners\n     * @type {object.<string, function>}\n     * @private\n     */\n    this._listeners = {\n      mousedown: this._onFabricMouseDown.bind(this),\n      mousemove: this._onFabricMouseMove.bind(this),\n      mouseup: this._onFabricMouseUp.bind(this),\n    };\n  }\n\n  /**\n   * Start drawing line mode\n   * @param {{width: ?number, color: ?string}} [setting] - Brush width & color\n   */\n  setHeadOption(setting) {\n    const {\n      arrowType = {\n        head: null,\n        tail: null,\n      },\n    } = setting;\n\n    this._arrowType = arrowType;\n  }\n\n  /**\n   * Start drawing line mode\n   * @param {{width: ?number, color: ?string}} [setting] - Brush width & color\n   */\n  start(setting = {}) {\n    const canvas = this.getCanvas();\n\n    canvas.defaultCursor = 'crosshair';\n    canvas.selection = false;\n\n    this.setHeadOption(setting);\n    this.setBrush(setting);\n\n    canvas.forEachObject((obj) => {\n      obj.set({\n        evented: false,\n      });\n    });\n\n    canvas.on({\n      'mouse:down': this._listeners.mousedown,\n    });\n  }\n\n  /**\n   * Set brush\n   * @param {{width: ?number, color: ?string}} [setting] - Brush width & color\n   */\n  setBrush(setting) {\n    const brush = this.getCanvas().freeDrawingBrush;\n\n    setting = setting || {};\n    this._width = setting.width || this._width;\n\n    if (setting.color) {\n      this._oColor = new fabric.Color(setting.color);\n    }\n    brush.width = this._width;\n    brush.color = this._oColor.toRgba();\n  }\n\n  /**\n   * End drawing line mode\n   */\n  end() {\n    const canvas = this.getCanvas();\n\n    canvas.defaultCursor = 'default';\n    canvas.selection = true;\n\n    canvas.forEachObject((obj) => {\n      obj.set({\n        evented: true,\n      });\n    });\n\n    canvas.off('mouse:down', this._listeners.mousedown);\n  }\n\n  /**\n   * Mousedown event handler in fabric canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event object\n   * @private\n   */\n  _onFabricMouseDown(fEvent) {\n    const canvas = this.getCanvas();\n    const { x, y } = canvas.getPointer(fEvent.e);\n    const points = [x, y, x, y];\n\n    this._line = new ArrowLine(points, {\n      stroke: this._oColor.toRgba(),\n      strokeWidth: this._width,\n      arrowType: this._arrowType,\n      evented: false,\n      perPixelTargetFind: true,\n      targetFindTolerance: defaultPixelTargetTolerance,\n    });\n\n    this._line.set(fObjectOptions.SELECTION_STYLE);\n\n    canvas.add(this._line);\n\n    canvas.on({\n      'mouse:move': this._listeners.mousemove,\n      'mouse:up': this._listeners.mouseup,\n    });\n\n    this.fire(eventNames.ADD_OBJECT, this._createLineEventObjectProperties());\n  }\n\n  /**\n   * Mousemove event handler in fabric canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event object\n   * @private\n   */\n  _onFabricMouseMove(fEvent) {\n    const canvas = this.getCanvas();\n    const pointer = canvas.getPointer(fEvent.e);\n\n    this._line.set({\n      x2: pointer.x,\n      y2: pointer.y,\n    });\n\n    this._line.setCoords();\n\n    canvas.renderAll();\n  }\n\n  /**\n   * Mouseup event handler in fabric canvas\n   * @private\n   */\n  _onFabricMouseUp() {\n    const canvas = this.getCanvas();\n\n    this.fire(eventNames.OBJECT_ADDED, this._createLineEventObjectProperties());\n\n    canvas.forEachObject(function (obj) { // eslint-disable-line\n      obj.set({\n        evented: true,\n      });\n    });\n\n    canvas.setActiveObject(this._line);\n    canvas.requestRenderAll();\n\n    this._line = null;\n\n    canvas.off({\n      'mouse:move': this._listeners.mousemove,\n      'mouse:up': this._listeners.mouseup,\n    });\n  }\n\n  /**\n   * create line event object properties\n   * @returns {Object} properties line object\n   * @private\n   */\n  _createLineEventObjectProperties() {\n    const params = this.graphics.createObjectProperties(this._line);\n    const { x1, x2, y1, y2 } = this._line;\n\n    return snippet.extend({}, params, {\n      startPosition: {\n        x: x1,\n        y: y1,\n      },\n      endPosition: {\n        x: x2,\n        y: y2,\n      },\n    });\n  }\n}\n\nexport default Line;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Blur extending fabric.Image.filters.Convolute\n */\nimport fabric from 'fabric';\n\nconst ARROW_ANGLE = 30;\nconst CHEVRON_SIZE_RATIO = 2.7;\nconst TRIANGLE_SIZE_RATIO = 1.7;\nconst RADIAN_CONVERSION_VALUE = 180;\n\nconst ArrowLine = fabric.util.createClass(\n  fabric.Line,\n  /** @lends Convolute.prototype */ {\n    /**\n     * Line type\n     * @param {String} type\n     * @default\n     */\n    type: 'line',\n\n    /**\n     * Constructor\n     * @param {Array} [points] Array of points\n     * @param {Object} [options] Options object\n     * @override\n     */\n    initialize(points, options = {}) {\n      this.callSuper('initialize', points, options);\n\n      this.arrowType = options.arrowType;\n    },\n\n    /**\n     * Render ArrowLine\n     * @private\n     * @override\n     */\n    _render(ctx) {\n      const { x1: fromX, y1: fromY, x2: toX, y2: toY } = this.calcLinePoints();\n      const linePosition = {\n        fromX,\n        fromY,\n        toX,\n        toY,\n      };\n      this.ctx = ctx;\n      ctx.lineWidth = this.strokeWidth;\n\n      this._renderBasicLinePath(linePosition);\n      this._drawDecoratorPath(linePosition);\n\n      this._renderStroke(ctx);\n    },\n\n    /**\n     * Render Basic line path\n     * @param {Object} linePosition - line position\n     *  @param {number} option.fromX - line start position x\n     *  @param {number} option.fromY - line start position y\n     *  @param {number} option.toX - line end position x\n     *  @param {number} option.toY - line end position y\n     * @private\n     */\n    _renderBasicLinePath({ fromX, fromY, toX, toY }) {\n      this.ctx.beginPath();\n      this.ctx.moveTo(fromX, fromY);\n      this.ctx.lineTo(toX, toY);\n    },\n\n    /**\n     * Render Arrow Head\n     * @param {Object} linePosition - line position\n     *  @param {number} option.fromX - line start position x\n     *  @param {number} option.fromY - line start position y\n     *  @param {number} option.toX - line end position x\n     *  @param {number} option.toY - line end position y\n     * @private\n     */\n    _drawDecoratorPath(linePosition) {\n      this._drawDecoratorPathType('head', linePosition);\n      this._drawDecoratorPathType('tail', linePosition);\n    },\n\n    /**\n     * Render Arrow Head\n     * @param {string} type - 'head' or 'tail'\n     * @param {Object} linePosition - line position\n     *  @param {number} option.fromX - line start position x\n     *  @param {number} option.fromY - line start position y\n     *  @param {number} option.toX - line end position x\n     *  @param {number} option.toY - line end position y\n     * @private\n     */\n    _drawDecoratorPathType(type, linePosition) {\n      switch (this.arrowType[type]) {\n        case 'triangle':\n          this._drawTrianglePath(type, linePosition);\n          break;\n        case 'chevron':\n          this._drawChevronPath(type, linePosition);\n          break;\n        default:\n          break;\n      }\n    },\n\n    /**\n     * Render Triangle Head\n     * @param {string} type - 'head' or 'tail'\n     * @param {Object} linePosition - line position\n     *  @param {number} option.fromX - line start position x\n     *  @param {number} option.fromY - line start position y\n     *  @param {number} option.toX - line end position x\n     *  @param {number} option.toY - line end position y\n     * @private\n     */\n    _drawTrianglePath(type, linePosition) {\n      const decorateSize = this.ctx.lineWidth * TRIANGLE_SIZE_RATIO;\n\n      this._drawChevronPath(type, linePosition, decorateSize);\n      this.ctx.closePath();\n    },\n\n    /**\n     * Render Chevron Head\n     * @param {string} type - 'head' or 'tail'\n     * @param {Object} linePosition - line position\n     *  @param {number} option.fromX - line start position x\n     *  @param {number} option.fromY - line start position y\n     *  @param {number} option.toX - line end position x\n     *  @param {number} option.toY - line end position y\n     * @param {number} decorateSize - decorate size\n     * @private\n     */\n    _drawChevronPath(type, { fromX, fromY, toX, toY }, decorateSize) {\n      const { ctx } = this;\n      if (!decorateSize) {\n        decorateSize = this.ctx.lineWidth * CHEVRON_SIZE_RATIO;\n      }\n\n      const [standardX, standardY] = type === 'head' ? [fromX, fromY] : [toX, toY];\n      const [compareX, compareY] = type === 'head' ? [toX, toY] : [fromX, fromY];\n\n      const angle =\n        (Math.atan2(compareY - standardY, compareX - standardX) * RADIAN_CONVERSION_VALUE) /\n        Math.PI;\n      const rotatedPosition = (changeAngle) =>\n        this.getRotatePosition(decorateSize, changeAngle, {\n          x: standardX,\n          y: standardY,\n        });\n\n      ctx.moveTo(...rotatedPosition(angle + ARROW_ANGLE));\n      ctx.lineTo(standardX, standardY);\n      ctx.lineTo(...rotatedPosition(angle - ARROW_ANGLE));\n    },\n\n    /**\n     * return position from change angle.\n     * @param {number} distance - change distance\n     * @param {number} angle - change angle\n     * @param {Object} referencePosition - reference position\n     * @returns {Array}\n     * @private\n     */\n    getRotatePosition(distance, angle, referencePosition) {\n      const radian = (angle * Math.PI) / RADIAN_CONVERSION_VALUE;\n      const { x, y } = referencePosition;\n\n      return [distance * Math.cos(radian) + x, distance * Math.sin(radian) + y];\n    },\n  }\n);\n\nexport default ArrowLine;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Text module\n */\nimport snippet from '../codeSnippet';\nimport fabric from 'fabric';\nimport Component from '@/interface/component';\nimport { Promise } from '@/util';\nimport { componentNames, eventNames as events, fObjectOptions } from '@/consts';\n\nconst defaultStyles = {\n  fill: '#000000',\n  left: 0,\n  top: 0,\n};\nconst resetStyles = {\n  fill: '#000000',\n  fontStyle: 'normal',\n  fontWeight: 'normal',\n  textAlign: 'left',\n  underline: false,\n};\nconst DBCLICK_TIME = 500;\n\n/**\n * Text\n * @class Text\n * @param {Graphics} graphics - Graphics instance\n * @extends {Component}\n * @ignore\n */\nclass Text extends Component {\n  constructor(graphics) {\n    super(componentNames.TEXT, graphics);\n\n    /**\n     * Default text style\n     * @type {Object}\n     */\n    this._defaultStyles = defaultStyles;\n\n    /**\n     * Selected state\n     * @type {boolean}\n     */\n    this._isSelected = false;\n\n    /**\n     * Selected text object\n     * @type {Object}\n     */\n    this._selectedObj = {};\n\n    /**\n     * Editing text object\n     * @type {Object}\n     */\n    this._editingObj = {};\n\n    /**\n     * Listeners for fabric event\n     * @type {Object}\n     */\n    this._listeners = {\n      mousedown: this._onFabricMouseDown.bind(this),\n      select: this._onFabricSelect.bind(this),\n      selectClear: this._onFabricSelectClear.bind(this),\n      scaling: this._onFabricScaling.bind(this),\n      textChanged: this._onFabricTextChanged.bind(this),\n    };\n\n    /**\n     * Textarea element for editing\n     * @type {HTMLElement}\n     */\n    this._textarea = null;\n\n    /**\n     * Ratio of current canvas\n     * @type {number}\n     */\n    this._ratio = 1;\n\n    /**\n     * Last click time\n     * @type {Date}\n     */\n    this._lastClickTime = new Date().getTime();\n\n    /**\n     * Text object infos before editing\n     * @type {Object}\n     */\n    this._editingObjInfos = {};\n\n    /**\n     * Previous state of editing\n     * @type {boolean}\n     */\n    this.isPrevEditing = false;\n  }\n\n  /**\n   * Start input text mode\n   */\n  start() {\n    const canvas = this.getCanvas();\n\n    this.isPrevEditing = false;\n    canvas.selection = false;\n    canvas.defaultCursor = 'text';\n    canvas.on({\n      'mouse:down': this._listeners.mousedown,\n      'selection:created': this._listeners.select,\n      'selection:updated': this._listeners.select,\n      'before:selection:cleared': this._listeners.selectClear,\n      'object:scaling': this._listeners.scaling,\n      'text:changed': this._listeners.textChanged,\n    });\n\n    this.setCanvasRatio();\n  }\n\n  /**\n   * End input text mode\n   */\n  end() {\n    const canvas = this.getCanvas();\n\n    canvas.selection = true;\n    canvas.defaultCursor = 'default';\n\n    canvas.forEachObject((obj) => {\n      if (obj.type === 'i-text') {\n        if (obj.text === '') {\n          canvas.remove(obj);\n        }\n      }\n    });\n\n    canvas.off({\n      'mouse:down': this._listeners.mousedown,\n      'selection:created': this._listeners.select,\n      'selection:updated': this._listeners.select,\n      'before:selection:cleared': this._listeners.selectClear,\n      'object:selected': this._listeners.select,\n      'object:scaling': this._listeners.scaling,\n      'text:changed': this._listeners.textChanged,\n    });\n  }\n\n  /**\n   * Adjust the origin position\n   * @param {fabric.Object} text - text object\n   * @param {string} editStatus - 'start' or 'end'\n   */\n  adjustOriginPosition(text, editStatus) {\n    let [originX, originY] = ['center', 'center'];\n    if (editStatus === 'start') {\n      [originX, originY] = ['left', 'top'];\n    }\n\n    const { x: left, y: top } = text.getPointByOrigin(originX, originY);\n    text.set({\n      left,\n      top,\n      originX,\n      originY,\n    });\n    text.setCoords();\n  }\n\n  /**\n   * Add new text on canvas image\n   * @param {string} text - Initial input text\n   * @param {Object} options - Options for generating text\n   *     @param {Object} [options.styles] Initial styles\n   *         @param {string} [options.styles.fill] Color\n   *         @param {string} [options.styles.fontFamily] Font type for text\n   *         @param {number} [options.styles.fontSize] Size\n   *         @param {string} [options.styles.fontStyle] Type of inclination (normal / italic)\n   *         @param {string} [options.styles.fontWeight] Type of thicker or thinner looking (normal / bold)\n   *         @param {string} [options.styles.textAlign] Type of text align (left / center / right)\n   *         @param {string} [options.styles.textDecoration] Type of line (underline / line-through / overline)\n   *     @param {{x: number, y: number}} [options.position] - Initial position\n   * @returns {Promise}\n   */\n  add(text, options) {\n    return new Promise((resolve) => {\n      const canvas = this.getCanvas();\n      let newText = null;\n      let selectionStyle = fObjectOptions.SELECTION_STYLE;\n      let styles = this._defaultStyles;\n\n      this._setInitPos(options.position);\n\n      if (options.styles) {\n        styles = snippet.extend(styles, options.styles);\n      }\n\n      if (!snippet.isExisty(options.autofocus)) {\n        options.autofocus = true;\n      }\n\n      newText = new fabric.IText(text, styles);\n      selectionStyle = snippet.extend({}, selectionStyle);\n\n      newText.set(selectionStyle);\n      newText.on({\n        mouseup: this._onFabricMouseUp.bind(this),\n      });\n\n      canvas.add(newText);\n\n      if (options.autofocus) {\n        newText.enterEditing();\n        newText.selectAll();\n      }\n\n      if (!canvas.getActiveObject()) {\n        canvas.setActiveObject(newText);\n      }\n\n      this.isPrevEditing = true;\n      resolve(this.graphics.createObjectProperties(newText));\n    });\n  }\n\n  /**\n   * Change text of activate object on canvas image\n   * @param {Object} activeObj - Current selected text object\n   * @param {string} text - Changed text\n   * @returns {Promise}\n   */\n  change(activeObj, text) {\n    return new Promise((resolve) => {\n      activeObj.set('text', text);\n\n      this.getCanvas().renderAll();\n      resolve();\n    });\n  }\n\n  /**\n   * Set style\n   * @param {Object} activeObj - Current selected text object\n   * @param {Object} styleObj - Initial styles\n   *     @param {string} [styleObj.fill] Color\n   *     @param {string} [styleObj.fontFamily] Font type for text\n   *     @param {number} [styleObj.fontSize] Size\n   *     @param {string} [styleObj.fontStyle] Type of inclination (normal / italic)\n   *     @param {string} [styleObj.fontWeight] Type of thicker or thinner looking (normal / bold)\n   *     @param {string} [styleObj.textAlign] Type of text align (left / center / right)\n   *     @param {string} [styleObj.textDecoration] Type of line (underline / line-through / overline)\n   * @returns {Promise}\n   */\n  setStyle(activeObj, styleObj) {\n    return new Promise((resolve) => {\n      snippet.forEach(\n        styleObj,\n        (val, key) => {\n          if (activeObj[key] === val && key !== 'fontSize') {\n            styleObj[key] = resetStyles[key] || '';\n          }\n        },\n        this\n      );\n\n      if ('textDecoration' in styleObj) {\n        snippet.extend(styleObj, this._getTextDecorationAdaptObject(styleObj.textDecoration));\n      }\n\n      activeObj.set(styleObj);\n\n      this.getCanvas().renderAll();\n      resolve();\n    });\n  }\n\n  /**\n   * Get the text\n   * @param {Object} activeObj - Current selected text object\n   * @returns {String} text\n   */\n  getText(activeObj) {\n    return activeObj.text;\n  }\n\n  /**\n   * Set infos of the current selected object\n   * @param {fabric.Text} obj - Current selected text object\n   * @param {boolean} state - State of selecting\n   */\n  setSelectedInfo(obj, state) {\n    this._selectedObj = obj;\n    this._isSelected = state;\n  }\n\n  /**\n   * Whether object is selected or not\n   * @returns {boolean} State of selecting\n   */\n  isSelected() {\n    return this._isSelected;\n  }\n\n  /**\n   * Get current selected text object\n   * @returns {fabric.Text} Current selected text object\n   */\n  getSelectedObj() {\n    return this._selectedObj;\n  }\n\n  /**\n   * Set ratio value of canvas\n   */\n  setCanvasRatio() {\n    const canvasElement = this.getCanvasElement();\n    const cssWidth = parseInt(canvasElement.style.maxWidth, 10);\n    const originWidth = canvasElement.width;\n\n    this._ratio = originWidth / cssWidth;\n  }\n\n  /**\n   * Get ratio value of canvas\n   * @returns {number} Ratio value\n   */\n  getCanvasRatio() {\n    return this._ratio;\n  }\n\n  /**\n   * Get text decoration adapt object\n   * @param {string} textDecoration - text decoration option string\n   * @returns {object} adapt object for override\n   */\n  _getTextDecorationAdaptObject(textDecoration) {\n    return {\n      underline: textDecoration === 'underline',\n      linethrough: textDecoration === 'line-through',\n      overline: textDecoration === 'overline',\n    };\n  }\n\n  /**\n   * Set initial position on canvas image\n   * @param {{x: number, y: number}} [position] - Selected position\n   * @private\n   */\n  _setInitPos(position) {\n    position = position || this.getCanvasImage().getCenterPoint();\n\n    this._defaultStyles.left = position.x;\n    this._defaultStyles.top = position.y;\n  }\n\n  /**\n   * Input event handler\n   * @private\n   */\n  _onInput() {\n    const ratio = this.getCanvasRatio();\n    const obj = this._editingObj;\n    const textareaStyle = this._textarea.style;\n\n    textareaStyle.width = `${Math.ceil(obj.width / ratio)}px`;\n    textareaStyle.height = `${Math.ceil(obj.height / ratio)}px`;\n  }\n\n  /**\n   * Keydown event handler\n   * @private\n   */\n  _onKeyDown() {\n    const ratio = this.getCanvasRatio();\n    const obj = this._editingObj;\n    const textareaStyle = this._textarea.style;\n\n    setTimeout(() => {\n      obj.text(this._textarea.value);\n\n      textareaStyle.width = `${Math.ceil(obj.width / ratio)}px`;\n      textareaStyle.height = `${Math.ceil(obj.height / ratio)}px`;\n    }, 0);\n  }\n\n  /**\n   * Blur event handler\n   * @private\n   */\n  _onBlur() {\n    const ratio = this.getCanvasRatio();\n    const editingObj = this._editingObj;\n    const editingObjInfos = this._editingObjInfos;\n    const textContent = this._textarea.value;\n    let transWidth = editingObj.width / ratio - editingObjInfos.width / ratio;\n    let transHeight = editingObj.height / ratio - editingObjInfos.height / ratio;\n\n    if (ratio === 1) {\n      transWidth /= 2;\n      transHeight /= 2;\n    }\n\n    this._textarea.style.display = 'none';\n\n    editingObj.set({\n      left: editingObjInfos.left + transWidth,\n      top: editingObjInfos.top + transHeight,\n    });\n\n    if (textContent.length) {\n      this.getCanvas().add(editingObj);\n\n      const params = {\n        id: snippet.stamp(editingObj),\n        type: editingObj.type,\n        text: textContent,\n      };\n\n      this.fire(events.TEXT_CHANGED, params);\n    }\n  }\n\n  /**\n   * Scroll event handler\n   * @private\n   */\n  _onScroll() {\n    this._textarea.scrollLeft = 0;\n    this._textarea.scrollTop = 0;\n  }\n\n  /**\n   * Fabric scaling event handler\n   * @param {fabric.Event} fEvent - Current scaling event on selected object\n   * @private\n   */\n  _onFabricScaling(fEvent) {\n    const obj = fEvent.target;\n\n    obj.fontSize = obj.fontSize * obj.scaleY;\n    obj.scaleX = 1;\n    obj.scaleY = 1;\n  }\n\n  /**\n   * textChanged event handler\n   * @param {{target: fabric.Object}} props - changed text object\n   * @private\n   */\n  _onFabricTextChanged(props) {\n    this.fire(events.TEXT_CHANGED, props.target);\n  }\n\n  /**\n   * onSelectClear handler in fabric canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onFabricSelectClear(fEvent) {\n    const obj = this.getSelectedObj();\n\n    this.isPrevEditing = true;\n\n    this.setSelectedInfo(fEvent.target, false);\n\n    if (obj) {\n      // obj is empty object at initial time, will be set fabric object\n      if (obj.text === '') {\n        this.getCanvas().remove(obj);\n      }\n    }\n  }\n\n  /**\n   * onSelect handler in fabric canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onFabricSelect(fEvent) {\n    this.isPrevEditing = true;\n\n    this.setSelectedInfo(fEvent.target, true);\n  }\n\n  /**\n   * Fabric 'mousedown' event handler\n   * @param {fabric.Event} fEvent - Current mousedown event on selected object\n   * @private\n   */\n  _onFabricMouseDown(fEvent) {\n    const obj = fEvent.target;\n\n    if (obj && !obj.isType('text')) {\n      return;\n    }\n\n    if (this.isPrevEditing) {\n      this.isPrevEditing = false;\n\n      return;\n    }\n\n    this._fireAddText(fEvent);\n  }\n\n  /**\n   * Fire 'addText' event if object is not selected.\n   * @param {fabric.Event} fEvent - Current mousedown event on selected object\n   * @private\n   */\n  _fireAddText(fEvent) {\n    const obj = fEvent.target;\n    const e = fEvent.e || {};\n    const originPointer = this.getCanvas().getPointer(e);\n\n    if (!obj) {\n      this.fire(events.ADD_TEXT, {\n        originPosition: {\n          x: originPointer.x,\n          y: originPointer.y,\n        },\n        clientPosition: {\n          x: e.clientX || 0,\n          y: e.clientY || 0,\n        },\n      });\n    }\n  }\n\n  /**\n   * Fabric mouseup event handler\n   * @param {fabric.Event} fEvent - Current mousedown event on selected object\n   * @private\n   */\n  _onFabricMouseUp(fEvent) {\n    const { target } = fEvent;\n    const newClickTime = new Date().getTime();\n\n    if (this._isDoubleClick(newClickTime) && !target.isEditing) {\n      target.enterEditing();\n    }\n\n    if (target.isEditing) {\n      this.fire(events.TEXT_EDITING); // fire editing text event\n    }\n\n    this._lastClickTime = newClickTime;\n  }\n\n  /**\n   * Get state of firing double click event\n   * @param {Date} newClickTime - Current clicked time\n   * @returns {boolean} Whether double clicked or not\n   * @private\n   */\n  _isDoubleClick(newClickTime) {\n    return newClickTime - this._lastClickTime < DBCLICK_TIME;\n  }\n}\n\nexport default Text;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Add icon module\n */\nimport snippet from '../codeSnippet';\nimport fabric from 'fabric';\nimport Component from '@/interface/component';\nimport { Promise } from '@/util';\nimport { eventNames as events, rejectMessages, componentNames, fObjectOptions } from '@/consts';\n\nconst pathMap = {\n  arrow: 'M 0 9 H 11 V 12 L 18 7 L 11 2 V 5 H 0 Z',\n  arrow2: 'M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z',\n  cancel:\n    'M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 ' +\n    'L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z',\n};\n\n/**\n * Icon\n * @class Icon\n * @param {Graphics} graphics - Graphics instance\n * @extends {Component}\n * @ignore\n */\nclass Icon extends Component {\n  constructor(graphics) {\n    super(componentNames.ICON, graphics);\n\n    /**\n     * Default icon color\n     * @type {string}\n     */\n    this._oColor = '#000000';\n\n    /**\n     * Path value of each icon type\n     * @type {Object}\n     */\n    this._pathMap = pathMap;\n\n    /**\n     * Type of the drawing icon\n     * @type {string}\n     * @private\n     */\n    this._type = null;\n\n    /**\n     * Color of the drawing icon\n     * @type {string}\n     * @private\n     */\n    this._iconColor = null;\n\n    /**\n     * Event handler list\n     * @type {Object}\n     * @private\n     */\n    this._handlers = {\n      mousedown: this._onFabricMouseDown.bind(this),\n      mousemove: this._onFabricMouseMove.bind(this),\n      mouseup: this._onFabricMouseUp.bind(this),\n    };\n  }\n\n  /**\n   * Set states of the current drawing shape\n   * @ignore\n   * @param {string} type - Icon type ('arrow', 'cancel', custom icon name)\n   * @param {string} iconColor - Icon foreground color\n   */\n  setStates(type, iconColor) {\n    this._type = type;\n    this._iconColor = iconColor;\n  }\n\n  /**\n   * Start to draw the icon on canvas\n   * @ignore\n   */\n  start() {\n    const canvas = this.getCanvas();\n    canvas.selection = false;\n    canvas.on('mouse:down', this._handlers.mousedown);\n  }\n\n  /**\n   * End to draw the icon on canvas\n   * @ignore\n   */\n  end() {\n    const canvas = this.getCanvas();\n\n    canvas.selection = true;\n    canvas.off({\n      'mouse:down': this._handlers.mousedown,\n    });\n  }\n\n  /**\n   * Add icon\n   * @param {string} type - Icon type\n   * @param {Object} options - Icon options\n   *      @param {string} [options.fill] - Icon foreground color\n   *      @param {string} [options.left] - Icon x position\n   *      @param {string} [options.top] - Icon y position\n   * @returns {Promise}\n   */\n  add(type, options) {\n    return new Promise((resolve, reject) => {\n      const canvas = this.getCanvas();\n      const path = this._pathMap[type];\n      const selectionStyle = fObjectOptions.SELECTION_STYLE;\n      const icon = path ? this._createIcon(path) : null;\n      this._icon = icon;\n\n      if (!icon) {\n        reject(rejectMessages.invalidParameters);\n      }\n\n      icon.set(\n        snippet.extend(\n          {\n            type: 'icon',\n            fill: this._oColor,\n          },\n          selectionStyle,\n          options,\n          this.graphics.controlStyle\n        )\n      );\n\n      canvas.add(icon).setActiveObject(icon);\n\n      resolve(this.graphics.createObjectProperties(icon));\n    });\n  }\n\n  /**\n   * Register icon paths\n   * @param {{key: string, value: string}} pathInfos - Path infos\n   */\n  registerPaths(pathInfos) {\n    snippet.forEach(\n      pathInfos,\n      (path, type) => {\n        this._pathMap[type] = path;\n      },\n      this\n    );\n  }\n\n  /**\n   * Set icon object color\n   * @param {string} color - Color to set\n   * @param {fabric.Path}[obj] - Current activated path object\n   */\n  setColor(color, obj) {\n    this._oColor = color;\n\n    if (obj && obj.get('type') === 'icon') {\n      obj.set({ fill: this._oColor });\n      this.getCanvas().renderAll();\n    }\n  }\n\n  /**\n   * Get icon color\n   * @param {fabric.Path}[obj] - Current activated path object\n   * @returns {string} color\n   */\n  getColor(obj) {\n    return obj.fill;\n  }\n\n  /**\n   * Create icon object\n   * @param {string} path - Path value to create icon\n   * @returns {fabric.Path} Path object\n   */\n  _createIcon(path) {\n    return new fabric.Path(path);\n  }\n\n  /**\n   * MouseDown event handler on canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event object\n   * @private\n   */\n  _onFabricMouseDown(fEvent) {\n    const canvas = this.getCanvas();\n\n    this._startPoint = canvas.getPointer(fEvent.e);\n    const { x: left, y: top } = this._startPoint;\n\n    this.add(this._type, {\n      left,\n      top,\n      fill: this._iconColor,\n    }).then(() => {\n      this.fire(events.ADD_OBJECT, this.graphics.createObjectProperties(this._icon));\n      canvas.on('mouse:move', this._handlers.mousemove);\n      canvas.on('mouse:up', this._handlers.mouseup);\n    });\n  }\n\n  /**\n   * MouseMove event handler on canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event object\n   * @private\n   */\n  _onFabricMouseMove(fEvent) {\n    const canvas = this.getCanvas();\n\n    if (!this._icon) {\n      return;\n    }\n    const moveOriginPointer = canvas.getPointer(fEvent.e);\n\n    const scaleX = (moveOriginPointer.x - this._startPoint.x) / this._icon.width;\n    const scaleY = (moveOriginPointer.y - this._startPoint.y) / this._icon.height;\n\n    this._icon.set({\n      scaleX: Math.abs(scaleX * 2),\n      scaleY: Math.abs(scaleY * 2),\n    });\n\n    this._icon.setCoords();\n    canvas.renderAll();\n  }\n\n  /**\n   * MouseUp event handler on canvas\n   * @private\n   */\n  _onFabricMouseUp() {\n    const canvas = this.getCanvas();\n\n    this.fire(events.OBJECT_ADDED, this.graphics.createObjectProperties(this._icon));\n\n    this._icon = null;\n\n    canvas.off('mouse:down', this._handlers.mousedown);\n    canvas.off('mouse:move', this._handlers.mousemove);\n    canvas.off('mouse:up', this._handlers.mouseup);\n  }\n}\n\nexport default Icon;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Add filter module\n */\nimport { isUndefined, extend, forEach, filter } from '../codeSnippet';\nimport fabric from 'fabric';\nimport Component from '@/interface/component';\nimport { Promise } from '@/util';\nimport { rejectMessages, componentNames } from '@/consts';\nimport Mask from '@/extension/mask';\nimport Sharpen from '@/extension/sharpen';\nimport Emboss from '@/extension/emboss';\nimport ColorFilter from '@/extension/colorFilter';\n\nconst { filters } = fabric.Image;\n\nfilters.Mask = Mask;\nfilters.Sharpen = Sharpen;\nfilters.Emboss = Emboss;\nfilters.ColorFilter = ColorFilter;\n\n/**\n * Filter\n * @class Filter\n * @param {Graphics} graphics - Graphics instance\n * @extends {Component}\n * @ignore\n */\nclass Filter extends Component {\n  constructor(graphics) {\n    super(componentNames.FILTER, graphics);\n  }\n\n  /**\n   * Add filter to source image (a specific filter is added on fabric.js)\n   * @param {string} type - Filter type\n   * @param {Object} [options] - Options of filter\n   * @returns {Promise}\n   */\n  add(type, options) {\n    return new Promise((resolve, reject) => {\n      const sourceImg = this._getSourceImage();\n      const canvas = this.getCanvas();\n      let imgFilter = this._getFilter(sourceImg, type);\n      if (!imgFilter) {\n        imgFilter = this._createFilter(sourceImg, type, options);\n      }\n\n      if (!imgFilter) {\n        reject(rejectMessages.invalidParameters);\n      }\n\n      this._changeFilterValues(imgFilter, options);\n\n      this._apply(sourceImg, () => {\n        canvas.renderAll();\n        resolve({\n          type,\n          action: 'add',\n          options,\n        });\n      });\n    });\n  }\n\n  /**\n   * Remove filter to source image\n   * @param {string} type - Filter type\n   * @returns {Promise}\n   */\n  remove(type) {\n    return new Promise((resolve, reject) => {\n      const sourceImg = this._getSourceImage();\n      const canvas = this.getCanvas();\n      const options = this.getOptions(type);\n\n      if (!sourceImg.filters.length) {\n        reject(rejectMessages.unsupportedOperation);\n      }\n\n      this._removeFilter(sourceImg, type);\n\n      this._apply(sourceImg, () => {\n        canvas.renderAll();\n        resolve({\n          type,\n          action: 'remove',\n          options,\n        });\n      });\n    });\n  }\n\n  /**\n   * Whether this has the filter or not\n   * @param {string} type - Filter type\n   * @returns {boolean} true if it has the filter\n   */\n  hasFilter(type) {\n    return !!this._getFilter(this._getSourceImage(), type);\n  }\n\n  /**\n   * Get a filter options\n   * @param {string} type - Filter type\n   * @returns {Object} filter options or null if there is no that filter\n   */\n  getOptions(type) {\n    const sourceImg = this._getSourceImage();\n    const imgFilter = this._getFilter(sourceImg, type);\n    if (!imgFilter) {\n      return null;\n    }\n\n    return extend({}, imgFilter.options);\n  }\n\n  /**\n   * Change filter values\n   * @param {Object} imgFilter object of filter\n   * @param {Object} options object\n   * @private\n   */\n  _changeFilterValues(imgFilter, options) {\n    forEach(options, (value, key) => {\n      if (!isUndefined(imgFilter[key])) {\n        imgFilter[key] = value;\n      }\n    });\n    forEach(imgFilter.options, (value, key) => {\n      if (!isUndefined(options[key])) {\n        imgFilter.options[key] = options[key];\n      }\n    });\n  }\n\n  /**\n   * Apply filter\n   * @param {fabric.Image} sourceImg - Source image to apply filter\n   * @param {function} callback - Executed function after applying filter\n   * @private\n   */\n  _apply(sourceImg, callback) {\n    sourceImg.filters.push();\n    const result = sourceImg.applyFilters();\n    if (result) {\n      callback();\n    }\n  }\n\n  /**\n   * Get source image on canvas\n   * @returns {fabric.Image} Current source image on canvas\n   * @private\n   */\n  _getSourceImage() {\n    return this.getCanvasImage();\n  }\n\n  /**\n   * Create filter instance\n   * @param {fabric.Image} sourceImg - Source image to apply filter\n   * @param {string} type - Filter type\n   * @param {Object} [options] - Options of filter\n   * @returns {Object} Fabric object of filter\n   * @private\n   */\n  _createFilter(sourceImg, type, options) {\n    let filterObj;\n    // capitalize first letter for matching with fabric image filter name\n    const fabricType = this._getFabricFilterType(type);\n    const ImageFilter = fabric.Image.filters[fabricType];\n    if (ImageFilter) {\n      filterObj = new ImageFilter(options);\n      filterObj.options = options;\n      sourceImg.filters.push(filterObj);\n    }\n\n    return filterObj;\n  }\n\n  /**\n   * Get applied filter instance\n   * @param {fabric.Image} sourceImg - Source image to apply filter\n   * @param {string} type - Filter type\n   * @returns {Object} Fabric object of filter\n   * @private\n   */\n  _getFilter(sourceImg, type) {\n    let imgFilter = null;\n\n    if (sourceImg) {\n      const fabricType = this._getFabricFilterType(type);\n      const { length } = sourceImg.filters;\n      let item, i;\n\n      for (i = 0; i < length; i += 1) {\n        item = sourceImg.filters[i];\n        if (item.type === fabricType) {\n          imgFilter = item;\n          break;\n        }\n      }\n    }\n\n    return imgFilter;\n  }\n\n  /**\n   * Remove applied filter instance\n   * @param {fabric.Image} sourceImg - Source image to apply filter\n   * @param {string} type - Filter type\n   * @private\n   */\n  _removeFilter(sourceImg, type) {\n    const fabricType = this._getFabricFilterType(type);\n    sourceImg.filters = filter(sourceImg.filters, (value) => value.type !== fabricType);\n  }\n\n  /**\n   * Change filter class name to fabric's, especially capitalizing first letter\n   * @param {string} type - Filter type\n   * @example\n   * 'grayscale' -> 'Grayscale'\n   * @returns {string} Fabric filter class name\n   */\n  _getFabricFilterType(type) {\n    return type.charAt(0).toUpperCase() + type.slice(1);\n  }\n}\n\nexport default Filter;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Mask extending fabric.Image.filters.Mask\n */\nimport fabric from 'fabric';\n\n/**\n * Mask object\n * @class Mask\n * @extends {fabric.Image.filters.BlendImage}\n * @ignore\n */\nconst Mask = fabric.util.createClass(\n  fabric.Image.filters.BlendImage,\n  /** @lends Mask.prototype */ {\n    /**\n     * Apply filter to canvas element\n     * @param {Object} pipelineState - Canvas element to apply filter\n     * @override\n     */\n    applyTo(pipelineState) {\n      if (!this.mask) {\n        return;\n      }\n\n      const canvas = pipelineState.canvasEl;\n      const { width, height } = canvas;\n      const maskCanvasEl = this._createCanvasOfMask(width, height);\n      const ctx = canvas.getContext('2d');\n      const maskCtx = maskCanvasEl.getContext('2d');\n      const imageData = ctx.getImageData(0, 0, width, height);\n\n      this._drawMask(maskCtx, canvas, ctx);\n      this._mapData(maskCtx, imageData, width, height);\n\n      pipelineState.imageData = imageData;\n    },\n\n    /**\n     * Create canvas of mask image\n     * @param {number} width - Width of main canvas\n     * @param {number} height - Height of main canvas\n     * @returns {HTMLElement} Canvas element\n     * @private\n     */\n    _createCanvasOfMask(width, height) {\n      const maskCanvasEl = fabric.util.createCanvasElement();\n\n      maskCanvasEl.width = width;\n      maskCanvasEl.height = height;\n\n      return maskCanvasEl;\n    },\n\n    /**\n     * Draw mask image on canvas element\n     * @param {Object} maskCtx - Context of mask canvas\n     * @private\n     */\n    _drawMask(maskCtx) {\n      const { mask } = this;\n      const maskImg = mask.getElement();\n      const { angle, left, scaleX, scaleY, top } = mask;\n\n      maskCtx.save();\n      maskCtx.translate(left, top);\n      maskCtx.rotate((angle * Math.PI) / 180);\n      maskCtx.scale(scaleX, scaleY);\n      maskCtx.drawImage(maskImg, -maskImg.width / 2, -maskImg.height / 2);\n      maskCtx.restore();\n    },\n\n    /**\n     * Map mask image data to source image data\n     * @param {Object} maskCtx - Context of mask canvas\n     * @param {Object} imageData - Data of source image\n     * @param {number} width - Width of main canvas\n     * @param {number} height - Height of main canvas\n     * @private\n     */\n    _mapData(maskCtx, imageData, width, height) {\n      const { data, height: imgHeight, width: imgWidth } = imageData;\n      const sourceData = data;\n      const len = imgWidth * imgHeight * 4;\n      const maskData = maskCtx.getImageData(0, 0, width, height).data;\n\n      for (let i = 0; i < len; i += 4) {\n        sourceData[i + 3] = maskData[i]; // adjust value of alpha data\n      }\n    },\n  }\n);\n\nexport default Mask;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Sharpen extending fabric.Image.filters.Convolute\n */\nimport fabric from 'fabric';\n\n/**\n * Sharpen object\n * @class Sharpen\n * @extends {fabric.Image.filters.Convolute}\n * @ignore\n */\nconst Sharpen = fabric.util.createClass(\n  fabric.Image.filters.Convolute,\n  /** @lends Convolute.prototype */ {\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Sharpen',\n\n    /**\n     * constructor\n     * @override\n     */\n    initialize() {\n      this.matrix = [0, -1, 0, -1, 5, -1, 0, -1, 0];\n    },\n  }\n);\n\nexport default Sharpen;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Emboss extending fabric.Image.filters.Convolute\n */\nimport fabric from 'fabric';\n\n/**\n * Emboss object\n * @class Emboss\n * @extends {fabric.Image.filters.Convolute}\n * @ignore\n */\nconst Emboss = fabric.util.createClass(\n  fabric.Image.filters.Convolute,\n  /** @lends Convolute.prototype */ {\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Emboss',\n\n    /**\n     * constructor\n     * @override\n     */\n    initialize() {\n      this.matrix = [1, 1, 1, 1, 0.7, -1, -1, -1, -1];\n    },\n  }\n);\n\nexport default Emboss;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview ColorFilter extending fabric.Image.filters.BaseFilter\n */\nimport fabric from 'fabric';\n\n/**\n * ColorFilter object\n * @class ColorFilter\n * @extends {fabric.Image.filters.BaseFilter}\n * @ignore\n */\nconst ColorFilter = fabric.util.createClass(\n  fabric.Image.filters.BaseFilter,\n  /** @lends BaseFilter.prototype */ {\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'ColorFilter',\n\n    /**\n     * Constructor\n     * @member fabric.Image.filters.ColorFilter.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.color='#FFFFFF'] Value of color (0...255)\n     * @param {Number} [options.threshold=45] Value of threshold (0...255)\n     * @override\n     */\n    initialize(options) {\n      if (!options) {\n        options = {};\n      }\n      this.color = options.color || '#FFFFFF';\n      this.threshold = options.threshold || 45;\n      this.x = options.x || null;\n      this.y = options.y || null;\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvas Canvas object passed by fabric\n     */\n    // eslint-disable-next-line complexity\n    applyTo(canvas) {\n      const { canvasEl } = canvas;\n      const context = canvasEl.getContext('2d');\n      const imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height);\n      const { data } = imageData;\n      const { threshold } = this;\n      let filterColor = fabric.Color.sourceFromHex(this.color);\n      let i, len;\n\n      if (this.x && this.y) {\n        filterColor = this._getColor(imageData, this.x, this.y);\n      }\n\n      for (i = 0, len = data.length; i < len; i += 4) {\n        if (\n          this._isOutsideThreshold(data[i], filterColor[0], threshold) ||\n          this._isOutsideThreshold(data[i + 1], filterColor[1], threshold) ||\n          this._isOutsideThreshold(data[i + 2], filterColor[2], threshold)\n        ) {\n          continue;\n        }\n        data[i] = data[i + 1] = data[i + 2] = data[i + 3] = 0;\n      }\n      context.putImageData(imageData, 0, 0);\n    },\n\n    /**\n     * Check color if it is within threshold\n     * @param {Number} color1 source color\n     * @param {Number} color2 filtering color\n     * @param {Number} threshold threshold\n     * @returns {boolean} true if within threshold or false\n     */\n    _isOutsideThreshold(color1, color2, threshold) {\n      const diff = color1 - color2;\n\n      return Math.abs(diff) > threshold;\n    },\n\n    /**\n     * Get color at (x, y)\n     * @param {Object} imageData of canvas\n     * @param {Number} x left position\n     * @param {Number} y top position\n     * @returns {Array} color array\n     */\n    _getColor(imageData, x, y) {\n      const color = [0, 0, 0, 0];\n      const { data, width } = imageData;\n      const bytes = 4;\n      const position = (width * y + x) * bytes;\n\n      color[0] = data[position];\n      color[1] = data[position + 1];\n      color[2] = data[position + 2];\n      color[3] = data[position + 3];\n\n      return color;\n    },\n  }\n);\n\nexport default ColorFilter;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Shape component\n */\nimport { extend } from '../codeSnippet';\nimport fabric from 'fabric';\nimport Component from '@/interface/component';\nimport resizeHelper from '@/helper/shapeResizeHelper';\nimport {\n  getFillImageFromShape,\n  rePositionFilterTypeFillImage,\n  reMakePatternImageSource,\n  makeFillPatternForFilter,\n  makeFilterOptionFromFabricImage,\n  resetFillPatternCanvas,\n} from '@/helper/shapeFilterFillHelper';\nimport {\n  Promise,\n  changeOrigin,\n  getCustomProperty,\n  getFillTypeFromOption,\n  getFillTypeFromObject,\n  isShape,\n} from '@/util';\nimport {\n  rejectMessages,\n  eventNames,\n  keyCodes as KEY_CODES,\n  componentNames,\n  fObjectOptions,\n  SHAPE_DEFAULT_OPTIONS,\n  SHAPE_FILL_TYPE,\n} from '@/consts';\n\nconst SHAPE_INIT_OPTIONS = extend(\n  {\n    strokeWidth: 1,\n    stroke: '#000000',\n    fill: '#ffffff',\n    width: 1,\n    height: 1,\n    rx: 0,\n    ry: 0,\n  },\n  SHAPE_DEFAULT_OPTIONS\n);\nconst DEFAULT_TYPE = 'rect';\nconst DEFAULT_WIDTH = 20;\nconst DEFAULT_HEIGHT = 20;\nconst MOUSE_MOVE_THRESHOLD = 5;\n\n/**\n * Make fill option\n * @param {Object} options - Options to create the shape\n * @param {Object.Image} canvasImage - canvas background image\n * @param {Function} createStaticCanvas - static canvas creater\n * @returns {Object} - shape option\n * @private\n */\nfunction makeFabricFillOption(options, canvasImage, createStaticCanvas) {\n  const fillOption = options.fill;\n  const fillType = getFillTypeFromOption(options.fill);\n  let fill = fillOption;\n\n  if (fillOption.color) {\n    fill = fillOption.color;\n  }\n\n  let extOption = null;\n  if (fillType === 'filter') {\n    const newStaticCanvas = createStaticCanvas();\n    extOption = makeFillPatternForFilter(canvasImage, fillOption.filter, newStaticCanvas);\n  } else {\n    extOption = { fill };\n  }\n\n  return extend({}, options, extOption);\n}\n\n/**\n * Shape\n * @class Shape\n * @param {Graphics} graphics - Graphics instance\n * @extends {Component}\n * @ignore\n */\nexport default class Shape extends Component {\n  constructor(graphics) {\n    super(componentNames.SHAPE, graphics);\n\n    /**\n     * Object of The drawing shape\n     * @type {fabric.Object}\n     * @private\n     */\n    this._shapeObj = null;\n\n    /**\n     * Type of the drawing shape\n     * @type {string}\n     * @private\n     */\n    this._type = DEFAULT_TYPE;\n\n    /**\n     * Options to draw the shape\n     * @type {Object}\n     * @private\n     */\n    this._options = extend({}, SHAPE_INIT_OPTIONS);\n\n    /**\n     * Whether the shape object is selected or not\n     * @type {boolean}\n     * @private\n     */\n    this._isSelected = false;\n\n    /**\n     * Pointer for drawing shape (x, y)\n     * @type {Object}\n     * @private\n     */\n    this._startPoint = {};\n\n    /**\n     * Using shortcut on drawing shape\n     * @type {boolean}\n     * @private\n     */\n    this._withShiftKey = false;\n\n    /**\n     * Has the mouse moved past the threshold\n     * @type {boolean}\n     * @private\n     */\n    this._mouseMoved = false;\n\n    /**\n     * Event handler list\n     * @type {Object}\n     * @private\n     */\n    this._handlers = {\n      mousedown: this._onFabricMouseDown.bind(this),\n      mousemove: this._onFabricMouseMove.bind(this),\n      mouseup: this._onFabricMouseUp.bind(this),\n      keydown: this._onKeyDown.bind(this),\n      keyup: this._onKeyUp.bind(this),\n    };\n  }\n\n  /**\n   * Start to draw the shape on canvas\n   * @ignore\n   */\n  start() {\n    const canvas = this.getCanvas();\n\n    this._isSelected = false;\n\n    canvas.defaultCursor = 'crosshair';\n    canvas.selection = false;\n    canvas.uniformScaling = true;\n\n    canvas.forEachObject((obj) => {\n      obj.set({\n        evented: false,\n      });\n    });\n\n    canvas.on({\n      'mouse:down': this._handlers.mousedown,\n    });\n\n    fabric.util.addListener(document, 'keydown', this._handlers.keydown);\n    fabric.util.addListener(document, 'keyup', this._handlers.keyup);\n  }\n\n  /**\n   * End to draw the shape on canvas\n   * @ignore\n   */\n  end() {\n    const canvas = this.getCanvas();\n\n    this._isSelected = false;\n\n    canvas.defaultCursor = 'default';\n\n    canvas.selection = true;\n    canvas.uniformScaling = false;\n    canvas.off({\n      'mouse:down': this._handlers.mousedown,\n    });\n\n    fabric.util.removeListener(document, 'keydown', this._handlers.keydown);\n    fabric.util.removeListener(document, 'keyup', this._handlers.keyup);\n  }\n\n  /**\n   * Set states of the current drawing shape\n   * @ignore\n   * @param {string} type - Shape type (ex: 'rect', 'circle')\n   * @param {Object} [options] - Shape options\n   *      @param {(ShapeFillOption | string)} [options.fill] - {@link ShapeFillOption} or\n   *        Shape foreground color (ex: '#fff', 'transparent')\n   *      @param {string} [options.stoke] - Shape outline color\n   *      @param {number} [options.strokeWidth] - Shape outline width\n   *      @param {number} [options.width] - Width value (When type option is 'rect', this options can use)\n   *      @param {number} [options.height] - Height value (When type option is 'rect', this options can use)\n   *      @param {number} [options.rx] - Radius x value (When type option is 'circle', this options can use)\n   *      @param {number} [options.ry] - Radius y value (When type option is 'circle', this options can use)\n   */\n  setStates(type, options) {\n    this._type = type;\n\n    if (options) {\n      this._options = extend(this._options, options);\n    }\n  }\n\n  /**\n   * Add the shape\n   * @ignore\n   * @param {string} type - Shape type (ex: 'rect', 'circle')\n   * @param {Object} options - Shape options\n   *      @param {(ShapeFillOption | string)} [options.fill] - ShapeFillOption or Shape foreground color (ex: '#fff', 'transparent') or ShapeFillOption object\n   *      @param {string} [options.stroke] - Shape outline color\n   *      @param {number} [options.strokeWidth] - Shape outline width\n   *      @param {number} [options.width] - Width value (When type option is 'rect', this options can use)\n   *      @param {number} [options.height] - Height value (When type option is 'rect', this options can use)\n   *      @param {number} [options.rx] - Radius x value (When type option is 'circle', this options can use)\n   *      @param {number} [options.ry] - Radius y value (When type option is 'circle', this options can use)\n   *      @param {number} [options.isRegular] - Whether scaling shape has 1:1 ratio or not\n   * @returns {Promise}\n   */\n  add(type, options) {\n    return new Promise((resolve) => {\n      const canvas = this.getCanvas();\n      const extendOption = this._extendOptions(options);\n\n      const shapeObj = this._createInstance(type, extendOption);\n      const objectProperties = this.graphics.createObjectProperties(shapeObj);\n\n      this._bindEventOnShape(shapeObj);\n\n      canvas.add(shapeObj).setActiveObject(shapeObj);\n\n      this._resetPositionFillFilter(shapeObj);\n\n      resolve(objectProperties);\n    });\n  }\n\n  /**\n   * Change the shape\n   * @ignore\n   * @param {fabric.Object} shapeObj - Selected shape object on canvas\n   * @param {Object} options - Shape options\n   *      @param {(ShapeFillOption | string)} [options.fill] - {@link ShapeFillOption} or\n   *        Shape foreground color (ex: '#fff', 'transparent')\n   *      @param {string} [options.stroke] - Shape outline color\n   *      @param {number} [options.strokeWidth] - Shape outline width\n   *      @param {number} [options.width] - Width value (When type option is 'rect', this options can use)\n   *      @param {number} [options.height] - Height value (When type option is 'rect', this options can use)\n   *      @param {number} [options.rx] - Radius x value (When type option is 'circle', this options can use)\n   *      @param {number} [options.ry] - Radius y value (When type option is 'circle', this options can use)\n   *      @param {number} [options.isRegular] - Whether scaling shape has 1:1 ratio or not\n   * @returns {Promise}\n   */\n  change(shapeObj, options) {\n    return new Promise((resolve, reject) => {\n      if (!isShape(shapeObj)) {\n        reject(rejectMessages.unsupportedType);\n      }\n      const hasFillOption = getFillTypeFromOption(options.fill) === 'filter';\n      const { canvasImage, createStaticCanvas } = this.graphics;\n\n      shapeObj.set(\n        hasFillOption ? makeFabricFillOption(options, canvasImage, createStaticCanvas) : options\n      );\n\n      if (hasFillOption) {\n        this._resetPositionFillFilter(shapeObj);\n      }\n\n      this.getCanvas().renderAll();\n      resolve();\n    });\n  }\n\n  /**\n   * make fill property for user event\n   * @param {fabric.Object} shapeObj - fabric object\n   * @returns {Object}\n   */\n  makeFillPropertyForUserEvent(shapeObj) {\n    const fillType = getFillTypeFromObject(shapeObj);\n    const fillProp = {};\n\n    if (fillType === SHAPE_FILL_TYPE.FILTER) {\n      const fillImage = getFillImageFromShape(shapeObj);\n      const filterOption = makeFilterOptionFromFabricImage(fillImage);\n\n      fillProp.type = fillType;\n      fillProp.filter = filterOption;\n    } else {\n      fillProp.type = SHAPE_FILL_TYPE.COLOR;\n      fillProp.color = shapeObj.fill || 'transparent';\n    }\n\n    return fillProp;\n  }\n\n  /**\n   * Copy object handling.\n   * @param {fabric.Object} shapeObj - Shape object\n   * @param {fabric.Object} originalShapeObj - Shape object\n   */\n  processForCopiedObject(shapeObj, originalShapeObj) {\n    this._bindEventOnShape(shapeObj);\n\n    if (getFillTypeFromObject(shapeObj) === 'filter') {\n      const fillImage = getFillImageFromShape(originalShapeObj);\n      const filterOption = makeFilterOptionFromFabricImage(fillImage);\n      const newStaticCanvas = this.graphics.createStaticCanvas();\n\n      shapeObj.set(\n        makeFillPatternForFilter(this.graphics.canvasImage, filterOption, newStaticCanvas)\n      );\n      this._resetPositionFillFilter(shapeObj);\n    }\n  }\n\n  /**\n   * Create the instance of shape\n   * @param {string} type - Shape type\n   * @param {Object} options - Options to creat the shape\n   * @returns {fabric.Object} Shape instance\n   * @private\n   */\n  _createInstance(type, options) {\n    let instance;\n\n    switch (type) {\n      case 'rect':\n        instance = new fabric.Rect(options);\n        break;\n      case 'circle':\n        instance = new fabric.Ellipse(\n          extend(\n            {\n              type: 'circle',\n            },\n            options\n          )\n        );\n        break;\n      case 'triangle':\n        instance = new fabric.Triangle(options);\n        break;\n      default:\n        instance = {};\n    }\n\n    return instance;\n  }\n\n  /**\n   * Get the options to create the shape\n   * @param {Object} options - Options to creat the shape\n   * @returns {Object} Shape options\n   * @private\n   */\n  _extendOptions(options) {\n    const selectionStyles = fObjectOptions.SELECTION_STYLE;\n    const { canvasImage, createStaticCanvas } = this.graphics;\n\n    options = extend({}, SHAPE_INIT_OPTIONS, this._options, selectionStyles, options);\n\n    return makeFabricFillOption(options, canvasImage, createStaticCanvas);\n  }\n\n  /**\n   * Bind fabric events on the creating shape object\n   * @param {fabric.Object} shapeObj - Shape object\n   * @private\n   */\n  _bindEventOnShape(shapeObj) {\n    const self = this;\n    const canvas = this.getCanvas();\n\n    shapeObj.on({\n      added() {\n        self._shapeObj = this;\n        resizeHelper.setOrigins(self._shapeObj);\n      },\n      selected() {\n        self._isSelected = true;\n        self._shapeObj = this;\n        canvas.uniformScaling = true;\n        canvas.defaultCursor = 'default';\n        resizeHelper.setOrigins(self._shapeObj);\n      },\n      deselected() {\n        self._isSelected = false;\n        self._shapeObj = null;\n        canvas.defaultCursor = 'crosshair';\n        canvas.uniformScaling = false;\n      },\n      modified() {\n        const currentObj = self._shapeObj;\n\n        resizeHelper.adjustOriginToCenter(currentObj);\n        resizeHelper.setOrigins(currentObj);\n      },\n      modifiedInGroup(activeSelection) {\n        self._fillFilterRePositionInGroupSelection(shapeObj, activeSelection);\n      },\n      moving() {\n        self._resetPositionFillFilter(this);\n      },\n      rotating() {\n        self._resetPositionFillFilter(this);\n      },\n      scaling(fEvent) {\n        const pointer = canvas.getPointer(fEvent.e);\n        const currentObj = self._shapeObj;\n        resizeHelper.setOrigins(currentObj);\n\n        canvas.setCursor('crosshair');\n        resizeHelper.resize(currentObj, pointer, true);\n\n        self._resetPositionFillFilter(this);\n      },\n    });\n  }\n\n  /**\n   * MouseDown event handler on canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event object\n   * @private\n   */\n  _onFabricMouseDown(fEvent) {\n    if (!fEvent.target) {\n      this._isSelected = false;\n      this._shapeObj = false;\n    }\n\n    if (!this._isSelected && !this._shapeObj) {\n      const canvas = this.getCanvas();\n      this._startPoint = canvas.getPointer(fEvent.e);\n\n      canvas.on({\n        'mouse:move': this._handlers.mousemove,\n        'mouse:up': this._handlers.mouseup,\n      });\n    }\n  }\n\n  /**\n   * MouseDown event handler on canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event object\n   * @private\n   */\n  _onFabricMouseMove(fEvent) {\n    const canvas = this.getCanvas();\n    const pointer = canvas.getPointer(fEvent.e);\n    const startPointX = this._startPoint.x;\n    const startPointY = this._startPoint.y;\n    const width = startPointX - pointer.x;\n    const height = startPointY - pointer.y;\n    const shape = this._shapeObj;\n\n    if (!shape) {\n      if (Math.abs(width) > MOUSE_MOVE_THRESHOLD && Math.abs(height) > MOUSE_MOVE_THRESHOLD) {\n        this._mouseMoved = true;\n        this.add(this._type, {\n          left: startPointX,\n          top: startPointY,\n          width,\n          height,\n          perPixelTargetFind: false,\n        }).then((objectProps) => {\n          this.fire(eventNames.ADD_OBJECT, objectProps);\n        });\n      }\n    } else {\n      this._shapeObj.set({\n        isRegular: this._withShiftKey,\n      });\n\n      resizeHelper.resize(shape, pointer);\n      canvas.renderAll();\n\n      this._resetPositionFillFilter(shape);\n    }\n  }\n\n  /**\n   * MouseUp event handler on canvas\n   * @private\n   */\n  _onFabricMouseUp() {\n    const canvas = this.getCanvas();\n    const startPointX = this._startPoint.x;\n    const startPointY = this._startPoint.y;\n    const shape = this._shapeObj;\n\n    if (this._mouseMoved) {\n      if (!shape) {\n        this.add(this._type, {\n          left: startPointX,\n          top: startPointY,\n          width: DEFAULT_WIDTH,\n          height: DEFAULT_HEIGHT,\n          perPixelTargetFind: false,\n        }).then((objectProps) => {\n          this.fire(eventNames.ADD_OBJECT, objectProps);\n        });\n      } else if (shape) {\n        resizeHelper.adjustOriginToCenter(shape);\n        this.fire(eventNames.OBJECT_ADDED, this.graphics.createObjectProperties(shape));\n      }\n\n      this._mouseMoved = false;\n      canvas.defaultCursor = 'default';\n\n      canvas.forEachObject((obj) => {\n        obj.set({\n          evented: true,\n        });\n      });\n    }\n\n    canvas.off({\n      'mouse:move': this._handlers.mousemove,\n      'mouse:up': this._handlers.mouseup,\n    });\n  }\n\n  /**\n   * Keydown event handler on document\n   * @param {KeyboardEvent} e - Event object\n   * @private\n   */\n  _onKeyDown(e) {\n    if (e.keyCode === KEY_CODES.SHIFT) {\n      this._withShiftKey = true;\n\n      if (this._shapeObj) {\n        this._shapeObj.isRegular = true;\n      }\n    }\n  }\n\n  /**\n   * Keyup event handler on document\n   * @param {KeyboardEvent} e - Event object\n   * @private\n   */\n  _onKeyUp(e) {\n    if (e.keyCode === KEY_CODES.SHIFT) {\n      this._withShiftKey = false;\n\n      if (this._shapeObj) {\n        this._shapeObj.isRegular = false;\n      }\n    }\n  }\n\n  /**\n   * Reset shape position and internal proportions in the filter type fill area.\n   * @param {fabric.Object} shapeObj - Shape object\n   * @private\n   */\n  _resetPositionFillFilter(shapeObj) {\n    if (getFillTypeFromObject(shapeObj) !== 'filter') {\n      return;\n    }\n\n    const { patternSourceCanvas } = getCustomProperty(shapeObj, 'patternSourceCanvas');\n\n    const fillImage = getFillImageFromShape(shapeObj);\n    const { originalAngle } = getCustomProperty(fillImage, 'originalAngle');\n\n    if (this.graphics.canvasImage.angle !== originalAngle) {\n      reMakePatternImageSource(shapeObj, this.graphics.canvasImage);\n    }\n    const { originX, originY } = shapeObj;\n\n    resizeHelper.adjustOriginToCenter(shapeObj);\n\n    shapeObj.width *= shapeObj.scaleX;\n    shapeObj.height *= shapeObj.scaleY;\n    shapeObj.rx *= shapeObj.scaleX;\n    shapeObj.ry *= shapeObj.scaleY;\n    shapeObj.scaleX = 1;\n    shapeObj.scaleY = 1;\n\n    rePositionFilterTypeFillImage(shapeObj);\n\n    changeOrigin(shapeObj, {\n      originX,\n      originY,\n    });\n\n    resetFillPatternCanvas(patternSourceCanvas);\n  }\n\n  /**\n   * Reset filter area position within group selection.\n   * @param {fabric.Object} shapeObj - Shape object\n   * @param {fabric.ActiveSelection} activeSelection - Shape object\n   * @private\n   */\n  _fillFilterRePositionInGroupSelection(shapeObj, activeSelection) {\n    if (activeSelection.scaleX !== 1 || activeSelection.scaleY !== 1) {\n      // This is necessary because the group's scale transition state affects the relative size of the fill area.\n      // The only way to reset the object transformation scale state to neutral.\n      // {@link https://github.com/fabricjs/fabric.js/issues/5372}\n      activeSelection.addWithUpdate();\n    }\n\n    const { angle, left, top } = shapeObj;\n\n    activeSelection.realizeTransform(shapeObj);\n    this._resetPositionFillFilter(shapeObj);\n\n    shapeObj.set({\n      angle,\n      left,\n      top,\n    });\n  }\n}\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Shape resize helper\n */\nimport { forEach, map, extend } from '../codeSnippet';\nimport resizeHelper from '@/helper/shapeResizeHelper';\nimport { capitalizeString, flipObject, setCustomProperty, getCustomProperty } from '@/util';\n\nconst FILTER_OPTION_MAP = {\n  pixelate: 'blocksize',\n  blur: 'blur',\n};\nconst POSITION_DIMENSION_MAP = {\n  x: 'width',\n  y: 'height',\n};\n\nconst FILTER_NAME_VALUE_MAP = flipObject(FILTER_OPTION_MAP);\n\n/**\n * Cached canvas image element for fill image\n * @type {boolean}\n * @private\n */\nlet cachedCanvasImageElement = null;\n\n/**\n * Get background image of fill\n * @param {fabric.Object} shapeObj - Shape object\n * @returns {fabric.Image}\n * @private\n */\nexport function getFillImageFromShape(shapeObj) {\n  const { patternSourceCanvas } = getCustomProperty(shapeObj, 'patternSourceCanvas');\n  const [fillImage] = patternSourceCanvas.getObjects();\n\n  return fillImage;\n}\n\n/**\n * Reset the image position in the filter type fill area.\n * @param {fabric.Object} shapeObj - Shape object\n * @private\n */\nexport function rePositionFilterTypeFillImage(shapeObj) {\n  const { angle, flipX, flipY } = shapeObj;\n  const fillImage = getFillImageFromShape(shapeObj);\n  const rotatedShapeCornerDimension = getRotatedDimension(shapeObj);\n  const { right, bottom } = rotatedShapeCornerDimension;\n  let { width, height } = rotatedShapeCornerDimension;\n  const diffLeft = (width - shapeObj.width) / 2;\n  const diffTop = (height - shapeObj.height) / 2;\n  const cropX = shapeObj.left - shapeObj.width / 2 - diffLeft;\n  const cropY = shapeObj.top - shapeObj.height / 2 - diffTop;\n  let left = width / 2 - diffLeft;\n  let top = height / 2 - diffTop;\n  const fillImageMaxSize = Math.max(width, height) + Math.max(diffLeft, diffTop);\n\n  [left, top, width, height] = calculateFillImageDimensionOutsideCanvas({\n    shapeObj,\n    left,\n    top,\n    width,\n    height,\n    cropX,\n    cropY,\n    flipX,\n    flipY,\n    right,\n    bottom,\n  });\n\n  fillImage.set({\n    angle: flipX === flipY ? -angle : angle,\n    left,\n    top,\n    width,\n    height,\n    cropX,\n    cropY,\n    flipX,\n    flipY,\n  });\n\n  setCustomProperty(fillImage, { fillImageMaxSize });\n}\n\n/**\n * Make filter option from fabric image\n * @param {fabric.Image} imageObject - fabric image object\n * @returns {object}\n */\nexport function makeFilterOptionFromFabricImage(imageObject) {\n  return map(imageObject.filters, (filter) => {\n    const [key] = Object.keys(filter);\n\n    return {\n      [FILTER_NAME_VALUE_MAP[key]]: filter[key],\n    };\n  });\n}\n\n/**\n * Calculate fill image position and size for out of Canvas\n * @param {Object} options - options for position dimension calculate\n *   @param {fabric.Object} shapeObj - shape object\n *   @param {number} left - original left position\n *   @param {number} top - original top position\n *   @param {number} width - image width\n *   @param {number} height - image height\n *   @param {number} cropX - image cropX\n *   @param {number} cropY - image cropY\n *   @param {boolean} flipX - shape flipX\n *   @param {boolean} flipY - shape flipY\n * @returns {Object}\n */\nfunction calculateFillImageDimensionOutsideCanvas({\n  shapeObj,\n  left,\n  top,\n  width,\n  height,\n  cropX,\n  cropY,\n  flipX,\n  flipY,\n  right,\n  bottom,\n}) {\n  const overflowAreaPositionFixer = (type, outDistance, imageLeft, imageTop) =>\n    calculateDistanceOverflowPart({\n      type,\n      outDistance,\n      shapeObj,\n      flipX,\n      flipY,\n      left: imageLeft,\n      top: imageTop,\n    });\n  const [originalWidth, originalHeight] = [width, height];\n\n  [left, top, width, height] = calculateDimensionLeftTopEdge(overflowAreaPositionFixer, {\n    left,\n    top,\n    width,\n    height,\n    cropX,\n    cropY,\n  });\n\n  [left, top, width, height] = calculateDimensionRightBottomEdge(overflowAreaPositionFixer, {\n    left,\n    top,\n    insideCanvasRealImageWidth: width,\n    insideCanvasRealImageHeight: height,\n    right,\n    bottom,\n    cropX,\n    cropY,\n    originalWidth,\n    originalHeight,\n  });\n\n  return [left, top, width, height];\n}\n\n/**\n * Calculate fill image position and size for for right bottom edge\n * @param {Function} overflowAreaPositionFixer - position fixer\n * @param {Object} options - options for position dimension calculate\n *   @param {fabric.Object} shapeObj - shape object\n *   @param {number} left - original left position\n *   @param {number} top - original top position\n *   @param {number} width - image width\n *   @param {number} height - image height\n *   @param {number} right - image right\n *   @param {number} bottom - image bottom\n *   @param {number} cropX - image cropX\n *   @param {number} cropY - image cropY\n *   @param {boolean} originalWidth - image original width\n *   @param {boolean} originalHeight - image original height\n * @returns {Object}\n */\nfunction calculateDimensionRightBottomEdge(\n  overflowAreaPositionFixer,\n  {\n    left,\n    top,\n    insideCanvasRealImageWidth,\n    insideCanvasRealImageHeight,\n    right,\n    bottom,\n    cropX,\n    cropY,\n    originalWidth,\n    originalHeight,\n  }\n) {\n  let [width, height] = [insideCanvasRealImageWidth, insideCanvasRealImageHeight];\n  const { width: canvasWidth, height: canvasHeight } = cachedCanvasImageElement;\n\n  if (right > canvasWidth && cropX > 0) {\n    width = originalWidth - Math.abs(right - canvasWidth);\n  }\n  if (bottom > canvasHeight && cropY > 0) {\n    height = originalHeight - Math.abs(bottom - canvasHeight);\n  }\n\n  const diff = {\n    x: (insideCanvasRealImageWidth - width) / 2,\n    y: (insideCanvasRealImageHeight - height) / 2,\n  };\n\n  forEach(['x', 'y'], (type) => {\n    const cropDistance2 = diff[type];\n    if (cropDistance2 > 0) {\n      [left, top] = overflowAreaPositionFixer(type, cropDistance2, left, top);\n    }\n  });\n\n  return [left, top, width, height];\n}\n\n/**\n * Calculate fill image position and size for for left top\n * @param {Function} overflowAreaPositionFixer - position fixer\n * @param {Object} options - options for position dimension calculate\n *   @param {fabric.Object} shapeObj - shape object\n *   @param {number} left - original left position\n *   @param {number} top - original top position\n *   @param {number} width - image width\n *   @param {number} height - image height\n *   @param {number} cropX - image cropX\n *   @param {number} cropY - image cropY\n * @returns {Object}\n */\nfunction calculateDimensionLeftTopEdge(\n  overflowAreaPositionFixer,\n  { left, top, width, height, cropX, cropY }\n) {\n  const dimension = {\n    width,\n    height,\n  };\n\n  forEach(['x', 'y'], (type) => {\n    const cropDistance = type === 'x' ? cropX : cropY;\n    const compareSize = dimension[POSITION_DIMENSION_MAP[type]];\n    const standardSize = cachedCanvasImageElement[POSITION_DIMENSION_MAP[type]];\n\n    if (compareSize > standardSize) {\n      const outDistance = (compareSize - standardSize) / 2;\n\n      dimension[POSITION_DIMENSION_MAP[type]] = standardSize;\n      [left, top] = overflowAreaPositionFixer(type, outDistance, left, top);\n    }\n    if (cropDistance < 0) {\n      [left, top] = overflowAreaPositionFixer(type, cropDistance, left, top);\n    }\n  });\n\n  return [left, top, dimension.width, dimension.height];\n}\n\n/**\n * Make fill property of dynamic pattern type\n * @param {fabric.Image} canvasImage - canvas background image\n * @param {Array} filterOption - filter option\n * @param {fabric.StaticCanvas} patternSourceCanvas - fabric static canvas\n * @returns {Object}\n */\nexport function makeFillPatternForFilter(canvasImage, filterOption, patternSourceCanvas) {\n  const copiedCanvasElement = getCachedCanvasImageElement(canvasImage);\n  const fillImage = makeFillImage(copiedCanvasElement, canvasImage.angle, filterOption);\n  patternSourceCanvas.add(fillImage);\n\n  const fabricProperty = {\n    fill: new fabric.Pattern({\n      source: patternSourceCanvas.getElement(),\n      repeat: 'no-repeat',\n    }),\n  };\n\n  setCustomProperty(fabricProperty, { patternSourceCanvas });\n\n  return fabricProperty;\n}\n\n/**\n * Reset fill pattern canvas\n * @param {fabric.StaticCanvas} patternSourceCanvas - fabric static canvas\n */\nexport function resetFillPatternCanvas(patternSourceCanvas) {\n  const [innerImage] = patternSourceCanvas.getObjects();\n  let { fillImageMaxSize } = getCustomProperty(innerImage, 'fillImageMaxSize');\n  fillImageMaxSize = Math.max(1, fillImageMaxSize);\n\n  patternSourceCanvas.setDimensions({\n    width: fillImageMaxSize,\n    height: fillImageMaxSize,\n  });\n  patternSourceCanvas.renderAll();\n}\n\n/**\n * Remake filter pattern image source\n * @param {fabric.Object} shapeObj - Shape object\n * @param {fabric.Image} canvasImage - canvas background image\n */\nexport function reMakePatternImageSource(shapeObj, canvasImage) {\n  const { patternSourceCanvas } = getCustomProperty(shapeObj, 'patternSourceCanvas');\n  const [fillImage] = patternSourceCanvas.getObjects();\n  const filterOption = makeFilterOptionFromFabricImage(fillImage);\n\n  patternSourceCanvas.remove(fillImage);\n\n  const copiedCanvasElement = getCachedCanvasImageElement(canvasImage, true);\n  const newFillImage = makeFillImage(copiedCanvasElement, canvasImage.angle, filterOption);\n\n  patternSourceCanvas.add(newFillImage);\n}\n\n/**\n * Calculate a point line outside the canvas.\n * @param {fabric.Image} canvasImage - canvas background image\n * @param {boolean} reset - default is false\n * @returns {HTMLImageElement}\n */\nexport function getCachedCanvasImageElement(canvasImage, reset = false) {\n  if (!cachedCanvasImageElement || reset) {\n    cachedCanvasImageElement = canvasImage.toCanvasElement();\n  }\n\n  return cachedCanvasImageElement;\n}\n\n/**\n * Calculate fill image position for out of Canvas\n * @param {string} type - 'x' or 'y'\n * @param {fabric.Object} shapeObj - shape object\n * @param {number} outDistance - distance away\n * @param {number} left - original left position\n * @param {number} top - original top position\n * @returns {Array}\n */\nfunction calculateDistanceOverflowPart({ type, shapeObj, outDistance, left, top, flipX, flipY }) {\n  const shapePointNavigation = getShapeEdgePoint(shapeObj);\n  const shapeNeighborPointNavigation = [\n    [1, 2],\n    [0, 3],\n    [0, 3],\n    [1, 2],\n  ];\n  const linePointsOutsideCanvas = calculateLinePointsOutsideCanvas(\n    type,\n    shapePointNavigation,\n    shapeNeighborPointNavigation\n  );\n  const reatAngles = calculateLineAngleOfOutsideCanvas(\n    type,\n    shapePointNavigation,\n    linePointsOutsideCanvas\n  );\n  const { startPointIndex } = linePointsOutsideCanvas;\n  const diffPosition = getReversePositionForFlip({\n    outDistance,\n    startPointIndex,\n    flipX,\n    flipY,\n    reatAngles,\n  });\n\n  return [left + diffPosition.left, top + diffPosition.top];\n}\n\n/**\n * Calculate fill image position for out of Canvas\n * @param {number} outDistance - distance away\n * @param {boolean} flipX - flip x statux\n * @param {boolean} flipY - flip y statux\n * @param {Array} reatAngles - Line angle of the rectangle vertex.\n * @returns {Object} diffPosition\n */\nfunction getReversePositionForFlip({ outDistance, startPointIndex, flipX, flipY, reatAngles }) {\n  const rotationChangePoint1 = outDistance * Math.cos((reatAngles[0] * Math.PI) / 180);\n  const rotationChangePoint2 = outDistance * Math.cos((reatAngles[1] * Math.PI) / 180);\n  const isForward = startPointIndex === 2 || startPointIndex === 3;\n  const diffPosition = {\n    top: isForward ? rotationChangePoint1 : rotationChangePoint2,\n    left: isForward ? rotationChangePoint2 : rotationChangePoint1,\n  };\n\n  if (isReverseLeftPositionForFlip(startPointIndex, flipX, flipY)) {\n    diffPosition.left = diffPosition.left * -1;\n  }\n  if (isReverseTopPositionForFlip(startPointIndex, flipX, flipY)) {\n    diffPosition.top = diffPosition.top * -1;\n  }\n\n  return diffPosition;\n}\n\n/**\n * Calculate a point line outside the canvas.\n * @param {string} type - 'x' or 'y'\n * @param {Array} shapePointNavigation - shape edge positions\n *   @param {Object} shapePointNavigation.lefttop - left top position\n *   @param {Object} shapePointNavigation.righttop - right top position\n *   @param {Object} shapePointNavigation.leftbottom - lefttop position\n *   @param {Object} shapePointNavigation.rightbottom - rightbottom position\n * @param {Array} shapeNeighborPointNavigation - Array to find adjacent edges.\n * @returns {Object}\n */\nfunction calculateLinePointsOutsideCanvas(\n  type,\n  shapePointNavigation,\n  shapeNeighborPointNavigation\n) {\n  let minimumPoint = 0;\n  let minimumPointIndex = 0;\n  forEach(shapePointNavigation, (point, index) => {\n    if (point[type] < minimumPoint) {\n      minimumPoint = point[type];\n      minimumPointIndex = index;\n    }\n  });\n\n  const [endPointIndex1, endPointIndex2] = shapeNeighborPointNavigation[minimumPointIndex];\n\n  return {\n    startPointIndex: minimumPointIndex,\n    endPointIndex1,\n    endPointIndex2,\n  };\n}\n\n/**\n * Calculate a point line outside the canvas.\n * @param {string} type - 'x' or 'y'\n * @param {Array} shapePointNavigation - shape edge positions\n *   @param {object} shapePointNavigation.lefttop - left top position\n *   @param {object} shapePointNavigation.righttop - right top position\n *   @param {object} shapePointNavigation.leftbottom - lefttop position\n *   @param {object} shapePointNavigation.rightbottom - rightbottom position\n * @param {Object} linePointsOfOneVertexIndex - Line point of one vertex\n *   @param {Object} linePointsOfOneVertexIndex.startPoint - start point index\n *   @param {Object} linePointsOfOneVertexIndex.endPointIndex1 - end point index\n *   @param {Object} linePointsOfOneVertexIndex.endPointIndex2 - end point index\n * @returns {Object}\n */\nfunction calculateLineAngleOfOutsideCanvas(type, shapePointNavigation, linePointsOfOneVertexIndex) {\n  const { startPointIndex, endPointIndex1, endPointIndex2 } = linePointsOfOneVertexIndex;\n  const horizontalVerticalAngle = type === 'x' ? 180 : 270;\n\n  return map([endPointIndex1, endPointIndex2], (pointIndex) => {\n    const startPoint = shapePointNavigation[startPointIndex];\n    const endPoint = shapePointNavigation[pointIndex];\n    const diffY = startPoint.y - endPoint.y;\n    const diffX = startPoint.x - endPoint.x;\n\n    return (Math.atan2(diffY, diffX) * 180) / Math.PI - horizontalVerticalAngle;\n  });\n}\n\n/* eslint-disable complexity */\n/**\n * Calculate a point line outside the canvas for horizontal.\n * @param {number} startPointIndex - start point index\n * @param {boolean} flipX - flip x statux\n * @param {boolean} flipY - flip y statux\n * @returns {boolean} flipY - flip y statux\n */\nfunction isReverseLeftPositionForFlip(startPointIndex, flipX, flipY) {\n  return (\n    (((!flipX && flipY) || (!flipX && !flipY)) && startPointIndex === 0) ||\n    (((flipX && flipY) || (flipX && !flipY)) && startPointIndex === 1) ||\n    (((!flipX && !flipY) || (!flipX && flipY)) && startPointIndex === 2) ||\n    (((flipX && !flipY) || (flipX && flipY)) && startPointIndex === 3)\n  );\n}\n/* eslint-enable complexity */\n\n/* eslint-disable complexity */\n/**\n * Calculate a point line outside the canvas for vertical.\n * @param {number} startPointIndex - start point index\n * @param {boolean} flipX - flip x statux\n * @param {boolean} flipY - flip y statux\n * @returns {boolean} flipY - flip y statux\n */\nfunction isReverseTopPositionForFlip(startPointIndex, flipX, flipY) {\n  return (\n    (((flipX && !flipY) || (!flipX && !flipY)) && startPointIndex === 0) ||\n    (((!flipX && !flipY) || (flipX && !flipY)) && startPointIndex === 1) ||\n    (((flipX && flipY) || (!flipX && flipY)) && startPointIndex === 2) ||\n    (((!flipX && flipY) || (flipX && flipY)) && startPointIndex === 3)\n  );\n}\n/* eslint-enable complexity */\n\n/**\n * Shape edge points\n * @param {fabric.Object} shapeObj - Selected shape object on canvas\n * @returns {Array} shapeEdgePoint - shape edge positions\n */\nfunction getShapeEdgePoint(shapeObj) {\n  return [\n    shapeObj.getPointByOrigin('left', 'top'),\n    shapeObj.getPointByOrigin('right', 'top'),\n    shapeObj.getPointByOrigin('left', 'bottom'),\n    shapeObj.getPointByOrigin('right', 'bottom'),\n  ];\n}\n\n/**\n * Rotated shape dimension\n * @param {fabric.Object} shapeObj - Shape object\n * @returns {Object} Rotated shape dimension\n */\nfunction getRotatedDimension(shapeObj) {\n  const [\n    { x: ax, y: ay },\n    { x: bx, y: by },\n    { x: cx, y: cy },\n    { x: dx, y: dy },\n  ] = getShapeEdgePoint(shapeObj);\n\n  const left = Math.min(ax, bx, cx, dx);\n  const top = Math.min(ay, by, cy, dy);\n  const right = Math.max(ax, bx, cx, dx);\n  const bottom = Math.max(ay, by, cy, dy);\n\n  return {\n    left,\n    top,\n    right,\n    bottom,\n    width: right - left,\n    height: bottom - top,\n  };\n}\n\n/**\n * Make fill image\n * @param {HTMLImageElement} copiedCanvasElement - html image element\n * @param {number} currentCanvasImageAngle - current canvas angle\n * @param {Array} filterOption - filter option\n * @returns {fabric.Image}\n * @private\n */\nfunction makeFillImage(copiedCanvasElement, currentCanvasImageAngle, filterOption) {\n  const fillImage = new fabric.Image(copiedCanvasElement);\n\n  forEach(extend({}, ...filterOption), (value, key) => {\n    const fabricFilterClassName = capitalizeString(key);\n    const filter = new fabric.Image.filters[fabricFilterClassName]({\n      [FILTER_OPTION_MAP[key]]: value,\n    });\n    fillImage.filters.push(filter);\n  });\n  fillImage.applyFilters();\n\n  setCustomProperty(fillImage, {\n    originalAngle: currentCanvasImageAngle,\n    fillImageMaxSize: Math.max(fillImage.width, fillImage.height),\n  });\n  resizeHelper.adjustOriginToCenter(fillImage);\n\n  return fillImage;\n}\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Image zoom module (start zoom, end zoom)\n */\nimport fabric from 'fabric';\nimport Component from '@/interface/component';\nimport { clamp } from '@/util';\nimport { componentNames, eventNames, keyCodes, zoomModes } from '@/consts';\n\nconst MOUSE_MOVE_THRESHOLD = 10;\nconst DEFAULT_SCROLL_OPTION = {\n  left: 0,\n  top: 0,\n  width: 0,\n  height: 0,\n  stroke: '#000000',\n  strokeWidth: 0,\n  fill: '#000000',\n  opacity: 0.4,\n  evented: false,\n  selectable: false,\n  hoverCursor: 'auto',\n};\nconst DEFAULT_VERTICAL_SCROLL_RATIO = {\n  SIZE: 0.0045,\n  MARGIN: 0.003,\n  BORDER_RADIUS: 0.003,\n};\nconst DEFAULT_HORIZONTAL_SCROLL_RATIO = {\n  SIZE: 0.0066,\n  MARGIN: 0.0044,\n  BORDER_RADIUS: 0.003,\n};\nconst DEFAULT_ZOOM_LEVEL = 1.0;\nconst {\n  ZOOM_CHANGED,\n  ADD_TEXT,\n  TEXT_EDITING,\n  OBJECT_MODIFIED,\n  KEY_DOWN,\n  KEY_UP,\n  HAND_STARTED,\n  HAND_STOPPED,\n} = eventNames;\n\n/**\n * Zoom components\n * @param {Graphics} graphics - Graphics instance\n * @extends {Component}\n * @class Zoom\n * @ignore\n */\nclass Zoom extends Component {\n  constructor(graphics) {\n    super(componentNames.ZOOM, graphics);\n\n    /**\n     * zoomArea\n     * @type {?fabric.Rect}\n     * @private\n     */\n    this.zoomArea = null;\n\n    /**\n     * Start point of zoom area\n     * @type {?{x: number, y: number}}\n     */\n    this._startPoint = null;\n\n    /**\n     * Center point of every zoom\n     * @type {Array.<{prevZoomLevel: number, zoomLevel: number, x: number, y: number}>}\n     */\n    this._centerPoints = [];\n\n    /**\n     * Zoom level (default: 100%(1.0), max: 400%(4.0))\n     * @type {number}\n     */\n    this.zoomLevel = DEFAULT_ZOOM_LEVEL;\n\n    /**\n     * Zoom mode ('normal', 'zoom', 'hand')\n     * @type {string}\n     */\n    this.zoomMode = zoomModes.DEFAULT;\n\n    /**\n     * Listeners\n     * @type {Object.<string, Function>}\n     * @private\n     */\n    this._listeners = {\n      startZoom: this._onMouseDownWithZoomMode.bind(this),\n      moveZoom: this._onMouseMoveWithZoomMode.bind(this),\n      stopZoom: this._onMouseUpWithZoomMode.bind(this),\n      startHand: this._onMouseDownWithHandMode.bind(this),\n      moveHand: this._onMouseMoveWithHandMode.bind(this),\n      stopHand: this._onMouseUpWithHandMode.bind(this),\n      zoomChanged: this._changeScrollState.bind(this),\n      keydown: this._startHandModeWithSpaceBar.bind(this),\n      keyup: this._endHandModeWithSpaceBar.bind(this),\n    };\n\n    const canvas = this.getCanvas();\n\n    /**\n     * Width:Height ratio (ex. width=1.5, height=1 -> aspectRatio=1.5)\n     * @private\n     */\n    this.aspectRatio = canvas.width / canvas.height;\n\n    /**\n     * vertical scroll bar\n     * @type {fabric.Rect}\n     * @private\n     */\n    this._verticalScroll = new fabric.Rect(DEFAULT_SCROLL_OPTION);\n\n    /**\n     * horizontal scroll bar\n     * @type {fabric.Rect}\n     * @private\n     */\n    this._horizontalScroll = new fabric.Rect(DEFAULT_SCROLL_OPTION);\n\n    canvas.on(ZOOM_CHANGED, this._listeners.zoomChanged);\n\n    this.graphics.on(ADD_TEXT, this._startTextEditingHandler.bind(this));\n    this.graphics.on(TEXT_EDITING, this._startTextEditingHandler.bind(this));\n    this.graphics.on(OBJECT_MODIFIED, this._stopTextEditingHandler.bind(this));\n  }\n\n  /**\n   * Attach zoom keyboard events\n   */\n  attachKeyboardZoomEvents() {\n    fabric.util.addListener(document, KEY_DOWN, this._listeners.keydown);\n    fabric.util.addListener(document, KEY_UP, this._listeners.keyup);\n  }\n\n  /**\n   * Detach zoom keyboard events\n   */\n  detachKeyboardZoomEvents() {\n    fabric.util.removeListener(document, KEY_DOWN, this._listeners.keydown);\n    fabric.util.removeListener(document, KEY_UP, this._listeners.keyup);\n  }\n\n  /**\n   * Handler when you started editing text\n   * @private\n   */\n  _startTextEditingHandler() {\n    this.isTextEditing = true;\n  }\n\n  /**\n   * Handler when you stopped editing text\n   * @private\n   */\n  _stopTextEditingHandler() {\n    this.isTextEditing = false;\n  }\n\n  /**\n   * Handler who turns on hand mode when the space bar is down\n   * @param {KeyboardEvent} e - Event object\n   * @private\n   */\n  _startHandModeWithSpaceBar(e) {\n    if (this.withSpace || this.isTextEditing) {\n      return;\n    }\n\n    if (e.keyCode === keyCodes.SPACE) {\n      this.withSpace = true;\n      this.startHandMode();\n    }\n  }\n\n  /**\n   * Handler who turns off hand mode when space bar is up\n   * @param {KeyboardEvent} e - Event object\n   * @private\n   */\n  _endHandModeWithSpaceBar(e) {\n    if (e.keyCode === keyCodes.SPACE) {\n      this.withSpace = false;\n      this.endHandMode();\n    }\n  }\n\n  /**\n   * Start zoom-in mode\n   */\n  startZoomInMode() {\n    if (this.zoomArea) {\n      return;\n    }\n    this.endHandMode();\n    this.zoomMode = zoomModes.ZOOM;\n\n    const canvas = this.getCanvas();\n\n    this._changeObjectsEventedState(false);\n\n    this.zoomArea = new fabric.Rect({\n      left: 0,\n      top: 0,\n      width: 0.5,\n      height: 0.5,\n      stroke: 'black',\n      strokeWidth: 1,\n      fill: 'transparent',\n      hoverCursor: 'zoom-in',\n    });\n\n    canvas.discardActiveObject();\n    canvas.add(this.zoomArea);\n    canvas.on('mouse:down', this._listeners.startZoom);\n    canvas.selection = false;\n    canvas.defaultCursor = 'zoom-in';\n  }\n\n  /**\n   * End zoom-in mode\n   */\n  endZoomInMode() {\n    this.zoomMode = zoomModes.DEFAULT;\n\n    const canvas = this.getCanvas();\n    const { startZoom, moveZoom, stopZoom } = this._listeners;\n\n    canvas.selection = true;\n    canvas.defaultCursor = 'auto';\n    canvas.off({\n      'mouse:down': startZoom,\n      'mouse:move': moveZoom,\n      'mouse:up': stopZoom,\n    });\n\n    this._changeObjectsEventedState(true);\n\n    canvas.remove(this.zoomArea);\n    this.zoomArea = null;\n  }\n\n  /**\n   * Start zoom drawing mode\n   */\n  start() {\n    this.zoomArea = null;\n    this._startPoint = null;\n    this._startHandPoint = null;\n  }\n\n  /**\n   * Stop zoom drawing mode\n   */\n  end() {\n    this.endZoomInMode();\n    this.endHandMode();\n  }\n\n  /**\n   * Start hand mode\n   */\n  startHandMode() {\n    this.endZoomInMode();\n    this.zoomMode = zoomModes.HAND;\n\n    const canvas = this.getCanvas();\n\n    this._changeObjectsEventedState(false);\n\n    canvas.discardActiveObject();\n    canvas.off('mouse:down', this._listeners.startHand);\n    canvas.on('mouse:down', this._listeners.startHand);\n    canvas.selection = false;\n    canvas.defaultCursor = 'grab';\n\n    canvas.fire(HAND_STARTED);\n  }\n\n  /**\n   * Stop hand mode\n   */\n  endHandMode() {\n    this.zoomMode = zoomModes.DEFAULT;\n    const canvas = this.getCanvas();\n\n    this._changeObjectsEventedState(true);\n\n    canvas.off('mouse:down', this._listeners.startHand);\n    canvas.selection = true;\n    canvas.defaultCursor = 'auto';\n\n    this._startHandPoint = null;\n\n    canvas.fire(HAND_STOPPED);\n  }\n\n  /**\n   * onMousedown handler in fabric canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onMouseDownWithZoomMode({ target, e }) {\n    if (target) {\n      return;\n    }\n\n    const canvas = this.getCanvas();\n\n    canvas.selection = false;\n\n    this._startPoint = canvas.getPointer(e);\n    this.zoomArea.set({ width: 0, height: 0 });\n\n    const { moveZoom, stopZoom } = this._listeners;\n    canvas.on({\n      'mouse:move': moveZoom,\n      'mouse:up': stopZoom,\n    });\n  }\n\n  /**\n   * onMousemove handler in fabric canvas\n   * @param {{e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onMouseMoveWithZoomMode({ e }) {\n    const canvas = this.getCanvas();\n    const pointer = canvas.getPointer(e);\n    const { x, y } = pointer;\n    const { zoomArea, _startPoint } = this;\n    const deltaX = Math.abs(x - _startPoint.x);\n    const deltaY = Math.abs(y - _startPoint.y);\n\n    if (deltaX + deltaY > MOUSE_MOVE_THRESHOLD) {\n      canvas.remove(zoomArea);\n      zoomArea.set(this._calcRectDimensionFromPoint(x, y));\n      canvas.add(zoomArea);\n    }\n  }\n\n  /**\n   * Get rect dimension setting from Canvas-Mouse-Position(x, y)\n   * @param {number} x - Canvas-Mouse-Position x\n   * @param {number} y - Canvas-Mouse-Position Y\n   * @returns {{left: number, top: number, width: number, height: number}}\n   * @private\n   */\n  _calcRectDimensionFromPoint(x, y) {\n    const canvas = this.getCanvas();\n    const canvasWidth = canvas.getWidth();\n    const canvasHeight = canvas.getHeight();\n    const { x: startX, y: startY } = this._startPoint;\n    const { min } = Math;\n\n    const left = min(startX, x);\n    const top = min(startY, y);\n    const width = clamp(x, startX, canvasWidth) - left; // (startX <= x(mouse) <= canvasWidth) - left\n    const height = clamp(y, startY, canvasHeight) - top; // (startY <= y(mouse) <= canvasHeight) - top\n\n    return { left, top, width, height };\n  }\n\n  /**\n   * onMouseup handler in fabric canvas\n   * @private\n   */\n  _onMouseUpWithZoomMode() {\n    let { zoomLevel } = this;\n    const { zoomArea } = this;\n    const { moveZoom, stopZoom } = this._listeners;\n    const canvas = this.getCanvas();\n    const center = this._getCenterPoint();\n    const { x, y } = center;\n\n    if (!this._isMaxZoomLevel()) {\n      this._centerPoints.push({\n        x,\n        y,\n        prevZoomLevel: zoomLevel,\n        zoomLevel: zoomLevel + 1,\n      });\n      zoomLevel += 1;\n      canvas.zoomToPoint({ x, y }, zoomLevel);\n\n      this._fireZoomChanged(canvas, zoomLevel);\n\n      this.zoomLevel = zoomLevel;\n    }\n\n    canvas.off({\n      'mouse:move': moveZoom,\n      'mouse:up': stopZoom,\n    });\n\n    canvas.remove(zoomArea);\n    this._startPoint = null;\n  }\n\n  /**\n   * Get center point\n   * @returns {{x: number, y: number}}\n   * @private\n   */\n  _getCenterPoint() {\n    const { left, top, width, height } = this.zoomArea;\n    const { x, y } = this._startPoint;\n    const { aspectRatio } = this;\n\n    if (width < MOUSE_MOVE_THRESHOLD && height < MOUSE_MOVE_THRESHOLD) {\n      return { x, y };\n    }\n\n    return width > height\n      ? { x: left + (aspectRatio * height) / 2, y: top + height / 2 }\n      : { x: left + width / 2, y: top + width / aspectRatio / 2 };\n  }\n\n  /**\n   * Zoom the canvas\n   * @param {{x: number, y: number}} center - center of zoom\n   * @param {?number} zoomLevel - zoom level\n   */\n  zoom({ x, y }, zoomLevel = this.zoomLevel) {\n    const canvas = this.getCanvas();\n    const centerPoints = this._centerPoints;\n\n    for (let i = centerPoints.length - 1; i >= 0; i -= 1) {\n      if (centerPoints[i].zoomLevel < zoomLevel) {\n        break;\n      }\n\n      const { x: prevX, y: prevY, prevZoomLevel } = centerPoints.pop();\n\n      canvas.zoomToPoint({ x: prevX, y: prevY }, prevZoomLevel);\n      this.zoomLevel = prevZoomLevel;\n    }\n\n    canvas.zoomToPoint({ x, y }, zoomLevel);\n    if (!this._isDefaultZoomLevel(zoomLevel)) {\n      this._centerPoints.push({\n        x,\n        y,\n        zoomLevel,\n        prevZoomLevel: this.zoomLevel,\n      });\n    }\n    this.zoomLevel = zoomLevel;\n\n    this._fireZoomChanged(canvas, zoomLevel);\n  }\n\n  /**\n   * Zoom out one step\n   */\n  zoomOut() {\n    const centerPoints = this._centerPoints;\n\n    if (!centerPoints.length) {\n      return;\n    }\n\n    const canvas = this.getCanvas();\n    const point = centerPoints.pop();\n    const { x, y, prevZoomLevel } = point;\n\n    if (this._isDefaultZoomLevel(prevZoomLevel)) {\n      canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\n    } else {\n      canvas.zoomToPoint({ x, y }, prevZoomLevel);\n    }\n\n    this.zoomLevel = prevZoomLevel;\n\n    this._fireZoomChanged(canvas, this.zoomLevel);\n  }\n\n  /**\n   * Zoom reset\n   */\n  resetZoom() {\n    const canvas = this.getCanvas();\n\n    canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\n\n    this.zoomLevel = DEFAULT_ZOOM_LEVEL;\n    this._centerPoints = [];\n\n    this._fireZoomChanged(canvas, this.zoomLevel);\n  }\n\n  /**\n   * Whether zoom level is max (5.0)\n   * @returns {boolean}\n   * @private\n   */\n  _isMaxZoomLevel() {\n    return this.zoomLevel >= 5.0;\n  }\n\n  /**\n   * Move point of zoom\n   * @param {{x: number, y: number}} delta - move amount\n   * @private\n   */\n  _movePointOfZoom({ x: deltaX, y: deltaY }) {\n    const centerPoints = this._centerPoints;\n\n    if (!centerPoints.length) {\n      return;\n    }\n\n    const canvas = this.getCanvas();\n    const { zoomLevel } = this;\n\n    const point = centerPoints.pop();\n    const { x: originX, y: originY, prevZoomLevel } = point;\n    const x = originX - deltaX;\n    const y = originY - deltaY;\n\n    canvas.zoomToPoint({ x: originX, y: originY }, prevZoomLevel);\n    canvas.zoomToPoint({ x, y }, zoomLevel);\n    centerPoints.push({ x, y, prevZoomLevel, zoomLevel });\n\n    this._fireZoomChanged(canvas, zoomLevel);\n  }\n\n  /**\n   * onMouseDown handler in fabric canvas\n   * @param {{target: fabric.Object, e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onMouseDownWithHandMode({ target, e }) {\n    if (target) {\n      return;\n    }\n\n    const canvas = this.getCanvas();\n\n    if (this.zoomLevel <= DEFAULT_ZOOM_LEVEL) {\n      return;\n    }\n\n    canvas.selection = false;\n\n    this._startHandPoint = canvas.getPointer(e);\n\n    const { moveHand, stopHand } = this._listeners;\n    canvas.on({\n      'mouse:move': moveHand,\n      'mouse:up': stopHand,\n    });\n  }\n\n  /**\n   * onMouseMove handler in fabric canvas\n   * @param {{e: MouseEvent}} fEvent - Fabric event\n   * @private\n   */\n  _onMouseMoveWithHandMode({ e }) {\n    const canvas = this.getCanvas();\n    const { x, y } = canvas.getPointer(e);\n    const deltaX = x - this._startHandPoint.x;\n    const deltaY = y - this._startHandPoint.y;\n\n    this._movePointOfZoom({ x: deltaX, y: deltaY });\n  }\n\n  /**\n   * onMouseUp handler in fabric canvas\n   * @private\n   */\n  _onMouseUpWithHandMode() {\n    const canvas = this.getCanvas();\n    const { moveHand, stopHand } = this._listeners;\n\n    canvas.off({\n      'mouse:move': moveHand,\n      'mouse:up': stopHand,\n    });\n\n    this._startHandPoint = null;\n  }\n\n  /**\n   * onChangeZoom handler in fabric canvas\n   * @private\n   */\n  _changeScrollState({ viewport, zoomLevel }) {\n    const canvas = this.getCanvas();\n\n    canvas.remove(this._verticalScroll);\n    canvas.remove(this._horizontalScroll);\n\n    if (this._isDefaultZoomLevel(zoomLevel)) {\n      return;\n    }\n\n    const canvasWidth = canvas.width;\n    const canvasHeight = canvas.height;\n\n    const { tl, tr, bl } = viewport;\n    const viewportWidth = tr.x - tl.x;\n    const viewportHeight = bl.y - tl.y;\n\n    const horizontalScrollWidth = (viewportWidth * viewportWidth) / canvasWidth;\n    const horizontalScrollHeight = viewportHeight * DEFAULT_HORIZONTAL_SCROLL_RATIO.SIZE;\n    const horizontalScrollLeft = clamp(\n      tl.x + (tl.x / canvasWidth) * viewportWidth,\n      tl.x,\n      tr.x - horizontalScrollWidth\n    );\n    const horizontalScrollMargin = viewportHeight * DEFAULT_HORIZONTAL_SCROLL_RATIO.MARGIN;\n    const horizontalScrollBorderRadius =\n      viewportHeight * DEFAULT_HORIZONTAL_SCROLL_RATIO.BORDER_RADIUS;\n\n    this._horizontalScroll.set({\n      left: horizontalScrollLeft,\n      top: bl.y - horizontalScrollHeight - horizontalScrollMargin,\n      width: horizontalScrollWidth,\n      height: horizontalScrollHeight,\n      rx: horizontalScrollBorderRadius,\n      ry: horizontalScrollBorderRadius,\n    });\n\n    const verticalScrollWidth = viewportWidth * DEFAULT_VERTICAL_SCROLL_RATIO.SIZE;\n    const verticalScrollHeight = (viewportHeight * viewportHeight) / canvasHeight;\n    const verticalScrollTop = clamp(\n      tl.y + (tl.y / canvasHeight) * viewportHeight,\n      tr.y,\n      bl.y - verticalScrollHeight\n    );\n    const verticalScrollMargin = viewportWidth * DEFAULT_VERTICAL_SCROLL_RATIO.MARGIN;\n    const verticalScrollBorderRadius = viewportWidth * DEFAULT_VERTICAL_SCROLL_RATIO.BORDER_RADIUS;\n\n    this._verticalScroll.set({\n      left: tr.x - verticalScrollWidth - verticalScrollMargin,\n      top: verticalScrollTop,\n      width: verticalScrollWidth,\n      height: verticalScrollHeight,\n      rx: verticalScrollBorderRadius,\n      ry: verticalScrollBorderRadius,\n    });\n\n    this._addScrollBar();\n  }\n\n  /**\n   * Change objects 'evented' state\n   * @param {boolean} [evented=true] - objects 'evented' state\n   */\n  _changeObjectsEventedState(evented = true) {\n    const canvas = this.getCanvas();\n\n    canvas.forEachObject((obj) => {\n      // {@link http://fabricjs.com/docs/fabric.Object.html#evented}\n      obj.evented = evented;\n    });\n  }\n\n  /**\n   * Add scroll bar and set remove timer\n   */\n  _addScrollBar() {\n    const canvas = this.getCanvas();\n\n    canvas.add(this._horizontalScroll);\n    canvas.add(this._verticalScroll);\n\n    if (this.scrollBarTid) {\n      clearTimeout(this.scrollBarTid);\n    }\n\n    this.scrollBarTid = setTimeout(() => {\n      canvas.remove(this._horizontalScroll);\n      canvas.remove(this._verticalScroll);\n    }, 3000);\n  }\n\n  /**\n   * Check zoom level is default zoom level (1.0)\n   * @param {number} zoomLevel - zoom level\n   * @returns {boolean} - whether zoom level is 1.0\n   */\n  _isDefaultZoomLevel(zoomLevel) {\n    return zoomLevel === DEFAULT_ZOOM_LEVEL;\n  }\n\n  /**\n   * Fire 'zoomChanged' event\n   * @param {fabric.Canvas} canvas - fabric canvas\n   * @param {number} zoomLevel - 'zoomChanged' event params\n   */\n  _fireZoomChanged(canvas, zoomLevel) {\n    canvas.fire(ZOOM_CHANGED, { viewport: canvas.calcViewportBoundaries(), zoomLevel });\n  }\n\n  /**\n   * Get zoom mode\n   */\n  get mode() {\n    return this.zoomMode;\n  }\n}\n\nexport default Zoom;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview CropperDrawingMode class\n */\nimport DrawingMode from '@/interface/drawingMode';\nimport { drawingModes, componentNames as components } from '@/consts';\n\n/**\n * CropperDrawingMode class\n * @class\n * @ignore\n */\nclass CropperDrawingMode extends DrawingMode {\n  constructor() {\n    super(drawingModes.CROPPER);\n  }\n\n  /**\n   * start this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  start(graphics) {\n    const cropper = graphics.getComponent(components.CROPPER);\n    cropper.start();\n  }\n\n  /**\n   * stop this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  end(graphics) {\n    const cropper = graphics.getComponent(components.CROPPER);\n    cropper.end();\n  }\n}\n\nexport default CropperDrawingMode;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview FreeDrawingMode class\n */\nimport DrawingMode from '@/interface/drawingMode';\nimport { drawingModes, componentNames as components } from '@/consts';\n\n/**\n * FreeDrawingMode class\n * @class\n * @ignore\n */\nclass FreeDrawingMode extends DrawingMode {\n  constructor() {\n    super(drawingModes.FREE_DRAWING);\n  }\n\n  /**\n   * start this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @param {{width: ?number, color: ?string}} [options] - Brush width & color\n   * @override\n   */\n  start(graphics, options) {\n    const freeDrawing = graphics.getComponent(components.FREE_DRAWING);\n    freeDrawing.start(options);\n  }\n\n  /**\n   * stop this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  end(graphics) {\n    const freeDrawing = graphics.getComponent(components.FREE_DRAWING);\n    freeDrawing.end();\n  }\n}\n\nexport default FreeDrawingMode;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview LineDrawingMode class\n */\nimport DrawingMode from '@/interface/drawingMode';\nimport { drawingModes, componentNames as components } from '@/consts';\n\n/**\n * LineDrawingMode class\n * @class\n * @ignore\n */\nclass LineDrawingMode extends DrawingMode {\n  constructor() {\n    super(drawingModes.LINE_DRAWING);\n  }\n\n  /**\n   * start this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @param {{width: ?number, color: ?string}} [options] - Brush width & color\n   * @override\n   */\n  start(graphics, options) {\n    const lineDrawing = graphics.getComponent(components.LINE);\n    lineDrawing.start(options);\n  }\n\n  /**\n   * stop this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  end(graphics) {\n    const lineDrawing = graphics.getComponent(components.LINE);\n    lineDrawing.end();\n  }\n}\n\nexport default LineDrawingMode;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview ShapeDrawingMode class\n */\nimport DrawingMode from '@/interface/drawingMode';\nimport { drawingModes, componentNames as components } from '@/consts';\n\n/**\n * ShapeDrawingMode class\n * @class\n * @ignore\n */\nclass ShapeDrawingMode extends DrawingMode {\n  constructor() {\n    super(drawingModes.SHAPE);\n  }\n\n  /**\n   * start this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  start(graphics) {\n    const shape = graphics.getComponent(components.SHAPE);\n    shape.start();\n  }\n\n  /**\n   * stop this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  end(graphics) {\n    const shape = graphics.getComponent(components.SHAPE);\n    shape.end();\n  }\n}\n\nexport default ShapeDrawingMode;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview TextDrawingMode class\n */\nimport DrawingMode from '@/interface/drawingMode';\nimport { drawingModes, componentNames as components } from '@/consts';\n\n/**\n * TextDrawingMode class\n * @class\n * @ignore\n */\nclass TextDrawingMode extends DrawingMode {\n  constructor() {\n    super(drawingModes.TEXT);\n  }\n\n  /**\n   * start this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  start(graphics) {\n    const text = graphics.getComponent(components.TEXT);\n    text.start();\n  }\n\n  /**\n   * stop this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  end(graphics) {\n    const text = graphics.getComponent(components.TEXT);\n    text.end();\n  }\n}\n\nexport default TextDrawingMode;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview IconDrawingMode class\n */\nimport DrawingMode from '@/interface/drawingMode';\nimport { drawingModes, componentNames as components } from '@/consts';\n\n/**\n * IconDrawingMode class\n * @class\n * @ignore\n */\nclass IconDrawingMode extends DrawingMode {\n  constructor() {\n    super(drawingModes.ICON);\n  }\n\n  /**\n   * start this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  start(graphics) {\n    const icon = graphics.getComponent(components.ICON);\n    icon.start();\n  }\n\n  /**\n   * stop this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  end(graphics) {\n    const icon = graphics.getComponent(components.ICON);\n    icon.end();\n  }\n}\n\nexport default IconDrawingMode;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview ZoomDrawingMode class\n */\nimport DrawingMode from '@/interface/drawingMode';\nimport { drawingModes, componentNames as components } from '@/consts';\n\n/**\n * ZoomDrawingMode class\n * @class\n * @ignore\n */\nclass ZoomDrawingMode extends DrawingMode {\n  constructor() {\n    super(drawingModes.ZOOM);\n  }\n\n  /**\n   * start this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  start(graphics) {\n    const zoom = graphics.getComponent(components.ZOOM);\n\n    zoom.start();\n  }\n\n  /**\n   * stop this drawing mode\n   * @param {Graphics} graphics - Graphics instance\n   * @override\n   */\n  end(graphics) {\n    const zoom = graphics.getComponent(components.ZOOM);\n\n    zoom.end();\n  }\n}\n\nexport default ZoomDrawingMode;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Add an icon\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { componentNames, commandNames } from '@/consts';\n\nconst { ICON } = componentNames;\n\nconst command = {\n  name: commandNames.ADD_ICON,\n\n  /**\n   * Add an icon\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} type - Icon type ('arrow', 'cancel', custom icon name)\n   * @param {Object} options - Icon options\n   *      @param {string} [options.fill] - Icon foreground color\n   *      @param {string} [options.left] - Icon x position\n   *      @param {string} [options.top] - Icon y position\n   * @returns {Promise}\n   */\n  execute(graphics, type, options) {\n    const iconComp = graphics.getComponent(ICON);\n\n    if (this.undoData && this.undoData.object) {\n      graphics.add(this.undoData.object);\n\n      return Promise.resolve(this.undoData.object);\n    }\n\n    return iconComp.add(type, options).then((objectProps) => {\n      this.undoData.object = graphics.getObject(objectProps.id);\n\n      return objectProps;\n    });\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    graphics.remove(this.undoData.object);\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Add an image object\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { commandNames } from '@/consts';\n\nconst command = {\n  name: commandNames.ADD_IMAGE_OBJECT,\n\n  /**\n   * Add an image object\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} imgUrl - Image url to make object\n   * @returns {Promise}\n   */\n  execute(graphics, imgUrl) {\n    return graphics.addImageObject(imgUrl).then((objectProps) => {\n      this.undoData.object = graphics.getObject(objectProps.id);\n\n      return objectProps;\n    });\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    graphics.remove(this.undoData.object);\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Add an object\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { commandNames, rejectMessages } from '@/consts';\n\nconst command = {\n  name: commandNames.ADD_OBJECT,\n\n  /**\n   * Add an object\n   * @param {Graphics} graphics - Graphics instance\n   * @param {Object} object - Fabric object\n   * @returns {Promise}\n   */\n  execute(graphics, object) {\n    return new Promise((resolve, reject) => {\n      if (!graphics.contains(object)) {\n        graphics.add(object);\n        resolve(object);\n      } else {\n        reject(rejectMessages.addedObject);\n      }\n    });\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @param {Object} object - Fabric object\n   * @returns {Promise}\n   */\n  undo(graphics, object) {\n    return new Promise((resolve, reject) => {\n      if (graphics.contains(object)) {\n        graphics.remove(object);\n        resolve(object);\n      } else {\n        reject(rejectMessages.noObject);\n      }\n    });\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Add a shape\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { componentNames, commandNames } from '@/consts';\n\nconst { SHAPE } = componentNames;\n\nconst command = {\n  name: commandNames.ADD_SHAPE,\n\n  /**\n   * Add a shape\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} type - Shape type (ex: 'rect', 'circle', 'triangle')\n   * @param {Object} options - Shape options\n   *      @param {string} [options.fill] - Shape foreground color (ex: '#fff', 'transparent')\n   *      @param {string} [options.stroke] - Shape outline color\n   *      @param {number} [options.strokeWidth] - Shape outline width\n   *      @param {number} [options.width] - Width value (When type option is 'rect', this options can use)\n   *      @param {number} [options.height] - Height value (When type option is 'rect', this options can use)\n   *      @param {number} [options.rx] - Radius x value (When type option is 'circle', this options can use)\n   *      @param {number} [options.ry] - Radius y value (When type option is 'circle', this options can use)\n   *      @param {number} [options.left] - Shape x position\n   *      @param {number} [options.top] - Shape y position\n   *      @param {number} [options.isRegular] - Whether resizing shape has 1:1 ratio or not\n   * @returns {Promise}\n   */\n  execute(graphics, type, options) {\n    const shapeComp = graphics.getComponent(SHAPE);\n\n    return shapeComp.add(type, options).then((objectProps) => {\n      const { id } = objectProps;\n\n      this.undoData.object = graphics.getObject(id);\n\n      return objectProps;\n    });\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    graphics.remove(this.undoData.object);\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Add a text object\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { componentNames, commandNames, rejectMessages } from '@/consts';\nimport {\n  setCachedUndoDataForDimension,\n  makeSelectionUndoData,\n  makeSelectionUndoDatum,\n} from '@/helper/selectionModifyHelper';\n\nconst { TEXT } = componentNames;\n\nconst command = {\n  name: commandNames.ADD_TEXT,\n\n  /**\n   * Add a text object\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} text - Initial input text\n   * @param {Object} [options] Options for text styles\n   *     @param {Object} [options.styles] Initial styles\n   *         @param {string} [options.styles.fill] Color\n   *         @param {string} [options.styles.fontFamily] Font type for text\n   *         @param {number} [options.styles.fontSize] Size\n   *         @param {string} [options.styles.fontStyle] Type of inclination (normal / italic)\n   *         @param {string} [options.styles.fontWeight] Type of thicker or thinner looking (normal / bold)\n   *         @param {string} [options.styles.textAlign] Type of text align (left / center / right)\n   *         @param {string} [options.styles.textDecoration] Type of line (underline / line-through / overline)\n   *     @param {{x: number, y: number}} [options.position] - Initial position\n   * @returns {Promise}\n   */\n  execute(graphics, text, options) {\n    const textComp = graphics.getComponent(TEXT);\n\n    if (this.undoData.object) {\n      const undoObject = this.undoData.object;\n\n      return new Promise((resolve, reject) => {\n        if (!graphics.contains(undoObject)) {\n          graphics.add(undoObject);\n          resolve(undoObject);\n        } else {\n          reject(rejectMessages.redo);\n        }\n      });\n    }\n\n    return textComp.add(text, options).then((objectProps) => {\n      const { id } = objectProps;\n      const textObject = graphics.getObject(id);\n\n      this.undoData.object = textObject;\n\n      setCachedUndoDataForDimension(\n        makeSelectionUndoData(textObject, () => makeSelectionUndoDatum(id, textObject, false))\n      );\n\n      return objectProps;\n    });\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    graphics.remove(this.undoData.object);\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Apply a filter into an image\n */\nimport snippet from '../codeSnippet';\nimport commandFactory from '@/factory/command';\nimport { componentNames, rejectMessages, commandNames } from '@/consts';\n\nconst { FILTER } = componentNames;\n\n/**\n * Cached data for undo\n * @type {Object}\n */\nlet cachedUndoDataForSilent = null;\n\n/**\n * Make undoData\n * @param {string} type - Filter type\n * @param {Object} prevfilterOption - prev Filter options\n * @param {Object} options - Filter options\n * @returns {object} - undo data\n */\nfunction makeUndoData(type, prevfilterOption, options) {\n  const undoData = {};\n\n  if (type === 'mask') {\n    undoData.object = options.mask;\n  }\n\n  undoData.options = prevfilterOption;\n\n  return undoData;\n}\n\nconst command = {\n  name: commandNames.APPLY_FILTER,\n\n  /**\n   * Apply a filter into an image\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} type - Filter type\n   * @param {Object} options - Filter options\n   *  @param {number} options.maskObjId - masking image object id\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise}\n   */\n  execute(graphics, type, options, isSilent) {\n    const filterComp = graphics.getComponent(FILTER);\n\n    if (type === 'mask') {\n      const maskObj = graphics.getObject(options.maskObjId);\n\n      if (!(maskObj && maskObj.isType('image'))) {\n        return Promise.reject(rejectMessages.invalidParameters);\n      }\n\n      snippet.extend(options, { mask: maskObj });\n      graphics.remove(options.mask);\n    }\n    if (!this.isRedo) {\n      const prevfilterOption = filterComp.getOptions(type);\n      const undoData = makeUndoData(type, prevfilterOption, options);\n\n      cachedUndoDataForSilent = this.setUndoData(undoData, cachedUndoDataForSilent, isSilent);\n    }\n\n    return filterComp.add(type, options);\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} type - Filter type\n   * @returns {Promise}\n   */\n  undo(graphics, type) {\n    const filterComp = graphics.getComponent(FILTER);\n\n    if (type === 'mask') {\n      const mask = this.undoData.object;\n      graphics.add(mask);\n      graphics.setActiveObject(mask);\n\n      return filterComp.remove(type);\n    }\n\n    // options changed case\n    if (this.undoData.options) {\n      return filterComp.add(type, this.undoData.options);\n    }\n\n    // filter added case\n    return filterComp.remove(type);\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Change icon color\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { componentNames, rejectMessages, commandNames } from '@/consts';\n\nconst { ICON } = componentNames;\n\nconst command = {\n  name: commandNames.CHANGE_ICON_COLOR,\n\n  /**\n   * Change icon color\n   * @param {Graphics} graphics - Graphics instance\n   * @param {number} id - object id\n   * @param {string} color - Color for icon\n   * @returns {Promise}\n   */\n  execute(graphics, id, color) {\n    return new Promise((resolve, reject) => {\n      const iconComp = graphics.getComponent(ICON);\n      const targetObj = graphics.getObject(id);\n\n      if (!targetObj) {\n        reject(rejectMessages.noObject);\n      }\n\n      this.undoData.object = targetObj;\n      this.undoData.color = iconComp.getColor(targetObj);\n      iconComp.setColor(color, targetObj);\n      resolve();\n    });\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    const iconComp = graphics.getComponent(ICON);\n    const { object: icon, color } = this.undoData;\n\n    iconComp.setColor(color, icon);\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview change a shape\n */\nimport snippet from '../codeSnippet';\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { componentNames, rejectMessages, commandNames } from '@/consts';\n\nconst { SHAPE } = componentNames;\n\n/**\n * Cached data for undo\n * @type {Object}\n */\nlet cachedUndoDataForSilent = null;\n\n/**\n * Make undoData\n * @param {object} options - shape options\n * @param {Component} targetObj - shape component\n * @returns {object} - undo data\n */\nfunction makeUndoData(options, targetObj) {\n  const undoData = {\n    object: targetObj,\n    options: {},\n  };\n\n  snippet.forEachOwnProperties(options, (value, key) => {\n    undoData.options[key] = targetObj[key];\n  });\n\n  return undoData;\n}\n\nconst command = {\n  name: commandNames.CHANGE_SHAPE,\n\n  /**\n   * Change a shape\n   * @param {Graphics} graphics - Graphics instance\n   * @param {number} id - object id\n   * @param {Object} options - Shape options\n   *      @param {string} [options.fill] - Shape foreground color (ex: '#fff', 'transparent')\n   *      @param {string} [options.stroke] - Shape outline color\n   *      @param {number} [options.strokeWidth] - Shape outline width\n   *      @param {number} [options.width] - Width value (When type option is 'rect', this options can use)\n   *      @param {number} [options.height] - Height value (When type option is 'rect', this options can use)\n   *      @param {number} [options.rx] - Radius x value (When type option is 'circle', this options can use)\n   *      @param {number} [options.ry] - Radius y value (When type option is 'circle', this options can use)\n   *      @param {number} [options.left] - Shape x position\n   *      @param {number} [options.top] - Shape y position\n   *      @param {number} [options.isRegular] - Whether resizing shape has 1:1 ratio or not\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise}\n   */\n  execute(graphics, id, options, isSilent) {\n    const shapeComp = graphics.getComponent(SHAPE);\n    const targetObj = graphics.getObject(id);\n\n    if (!targetObj) {\n      return Promise.reject(rejectMessages.noObject);\n    }\n\n    if (!this.isRedo) {\n      const undoData = makeUndoData(options, targetObj);\n\n      cachedUndoDataForSilent = this.setUndoData(undoData, cachedUndoDataForSilent, isSilent);\n    }\n\n    return shapeComp.change(targetObj, options);\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    const shapeComp = graphics.getComponent(SHAPE);\n    const { object: shape, options } = this.undoData;\n\n    return shapeComp.change(shape, options);\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Change a text\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { componentNames, rejectMessages, commandNames } from '@/consts';\n\nconst { TEXT } = componentNames;\n\nconst command = {\n  name: commandNames.CHANGE_TEXT,\n\n  /**\n   * Change a text\n   * @param {Graphics} graphics - Graphics instance\n   * @param {number} id - object id\n   * @param {string} text - Changing text\n   * @returns {Promise}\n   */\n  execute(graphics, id, text) {\n    const textComp = graphics.getComponent(TEXT);\n    const targetObj = graphics.getObject(id);\n\n    if (!targetObj) {\n      return Promise.reject(rejectMessages.noObject);\n    }\n\n    this.undoData.object = targetObj;\n    this.undoData.text = textComp.getText(targetObj);\n\n    return textComp.change(targetObj, text);\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    const textComp = graphics.getComponent(TEXT);\n    const { object: textObj, text } = this.undoData;\n\n    return textComp.change(textObj, text);\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Change text styles\n */\nimport snippet from '../codeSnippet';\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { componentNames, rejectMessages, commandNames } from '@/consts';\n\nconst { TEXT } = componentNames;\n\n/**\n * Cached data for undo\n * @type {Object}\n */\nlet cachedUndoDataForSilent = null;\n\n/**\n * Make undoData\n * @param {object} styles - text styles\n * @param {Component} targetObj - text component\n * @returns {object} - undo data\n */\nfunction makeUndoData(styles, targetObj) {\n  const undoData = {\n    object: targetObj,\n    styles: {},\n  };\n  snippet.forEachOwnProperties(styles, (value, key) => {\n    const undoValue = targetObj[key];\n    undoData.styles[key] = undoValue;\n  });\n\n  return undoData;\n}\n\nconst command = {\n  name: commandNames.CHANGE_TEXT_STYLE,\n\n  /**\n   * Change text styles\n   * @param {Graphics} graphics - Graphics instance\n   * @param {number} id - object id\n   * @param {Object} styles - text styles\n   *     @param {string} [styles.fill] Color\n   *     @param {string} [styles.fontFamily] Font type for text\n   *     @param {number} [styles.fontSize] Size\n   *     @param {string} [styles.fontStyle] Type of inclination (normal / italic)\n   *     @param {string} [styles.fontWeight] Type of thicker or thinner looking (normal / bold)\n   *     @param {string} [styles.textAlign] Type of text align (left / center / right)\n   *     @param {string} [styles.textDecoration] Type of line (underline / line-through / overline)\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise}\n   */\n  execute(graphics, id, styles, isSilent) {\n    const textComp = graphics.getComponent(TEXT);\n    const targetObj = graphics.getObject(id);\n\n    if (!targetObj) {\n      return Promise.reject(rejectMessages.noObject);\n    }\n    if (!this.isRedo) {\n      const undoData = makeUndoData(styles, targetObj);\n\n      cachedUndoDataForSilent = this.setUndoData(undoData, cachedUndoDataForSilent, isSilent);\n    }\n\n    return textComp.setStyle(targetObj, styles);\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    const textComp = graphics.getComponent(TEXT);\n    const { object: textObj, styles } = this.undoData;\n\n    return textComp.setStyle(textObj, styles);\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Clear all objects\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { commandNames } from '@/consts';\n\nconst command = {\n  name: commandNames.CLEAR_OBJECTS,\n\n  /**\n   * Clear all objects without background (main) image\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  execute(graphics) {\n    return new Promise((resolve) => {\n      this.undoData.objects = graphics.removeAll();\n      resolve();\n    });\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   * @ignore\n   */\n  undo(graphics) {\n    graphics.add(this.undoData.objects);\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Flip an image\n */\nimport commandFactory from '@/factory/command';\nimport { componentNames, commandNames } from '@/consts';\n\nconst { FLIP } = componentNames;\n\nconst command = {\n  name: commandNames.FLIP_IMAGE,\n\n  /**\n   * flip an image\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} type - 'flipX' or 'flipY' or 'reset'\n   * @returns {Promise}\n   */\n  execute(graphics, type) {\n    const flipComp = graphics.getComponent(FLIP);\n\n    this.undoData.setting = flipComp.getCurrentSetting();\n\n    return flipComp[type]();\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    const flipComp = graphics.getComponent(FLIP);\n\n    return flipComp.set(this.undoData.setting);\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Load a background (main) image\n */\nimport commandFactory from '@/factory/command';\nimport { componentNames, commandNames } from '@/consts';\n\nconst { IMAGE_LOADER } = componentNames;\n\nconst command = {\n  name: commandNames.LOAD_IMAGE,\n\n  /**\n   * Load a background (main) image\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} imageName - Image name\n   * @param {string} imgUrl - Image Url\n   * @returns {Promise}\n   */\n  execute(graphics, imageName, imgUrl) {\n    const loader = graphics.getComponent(IMAGE_LOADER);\n    const prevImage = loader.getCanvasImage();\n    const prevImageWidth = prevImage ? prevImage.width : 0;\n    const prevImageHeight = prevImage ? prevImage.height : 0;\n    const objects = graphics.removeAll(true).filter((objectItem) => objectItem.type !== 'cropzone');\n\n    objects.forEach((objectItem) => {\n      objectItem.evented = true;\n    });\n\n    this.undoData = {\n      name: loader.getImageName(),\n      image: prevImage,\n      objects,\n    };\n\n    return loader.load(imageName, imgUrl).then((newImage) => ({\n      oldWidth: prevImageWidth,\n      oldHeight: prevImageHeight,\n      newWidth: newImage.width,\n      newHeight: newImage.height,\n    }));\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    const loader = graphics.getComponent(IMAGE_LOADER);\n    const { objects, name, image } = this.undoData;\n\n    graphics.removeAll(true);\n    graphics.add(objects);\n\n    return loader.load(name, image);\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Remove a filter from an image\n */\nimport commandFactory from '@/factory/command';\nimport { componentNames, commandNames } from '@/consts';\n\nconst { FILTER } = componentNames;\n\nconst command = {\n  name: commandNames.REMOVE_FILTER,\n\n  /**\n   * Remove a filter from an image\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} type - Filter type\n   * @returns {Promise}\n   */\n  execute(graphics, type) {\n    const filterComp = graphics.getComponent(FILTER);\n\n    this.undoData.options = filterComp.getOptions(type);\n\n    return filterComp.remove(type);\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} type - Filter type\n   * @returns {Promise}\n   */\n  undo(graphics, type) {\n    const filterComp = graphics.getComponent(FILTER);\n    const { options } = this.undoData;\n\n    return filterComp.add(type, options);\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Remove an object\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { commandNames, rejectMessages } from '@/consts';\n\nconst command = {\n  name: commandNames.REMOVE_OBJECT,\n\n  /**\n   * Remove an object\n   * @param {Graphics} graphics - Graphics instance\n   * @param {number} id - object id\n   * @returns {Promise}\n   */\n  execute(graphics, id) {\n    return new Promise((resolve, reject) => {\n      this.undoData.objects = graphics.removeObjectById(id);\n      if (this.undoData.objects.length) {\n        resolve();\n      } else {\n        reject(rejectMessages.noObject);\n      }\n    });\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    graphics.add(this.undoData.objects);\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Resize a canvas\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { commandNames } from '@/consts';\n\nconst command = {\n  name: commandNames.RESIZE_CANVAS_DIMENSION,\n\n  /**\n   * resize the canvas with given dimension\n   * @param {Graphics} graphics - Graphics instance\n   * @param {{width: number, height: number}} dimension - Max width & height\n   * @returns {Promise}\n   */\n  execute(graphics, dimension) {\n    return new Promise((resolve) => {\n      this.undoData.size = {\n        width: graphics.cssMaxWidth,\n        height: graphics.cssMaxHeight,\n      };\n\n      graphics.setCssMaxDimension(dimension);\n      graphics.adjustCanvasDimension();\n      resolve();\n    });\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    graphics.setCssMaxDimension(this.undoData.size);\n    graphics.adjustCanvasDimension();\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Rotate an image\n */\nimport commandFactory from '@/factory/command';\nimport { componentNames, commandNames } from '@/consts';\n\nconst { ROTATION } = componentNames;\n\n/**\n * Cached data for undo\n * @type {Object}\n */\nlet cachedUndoDataForSilent = null;\n\n/**\n * Make undo data\n * @param {Component} rotationComp - rotation component\n * @returns {object} - undodata\n */\nfunction makeUndoData(rotationComp) {\n  return {\n    angle: rotationComp.getCurrentAngle(),\n  };\n}\n\nconst command = {\n  name: commandNames.ROTATE_IMAGE,\n\n  /**\n   * Rotate an image\n   * @param {Graphics} graphics - Graphics instance\n   * @param {string} type - 'rotate' or 'setAngle'\n   * @param {number} angle - angle value (degree)\n   * @param {boolean} isSilent - is silent execution or not\n   * @returns {Promise}\n   */\n  execute(graphics, type, angle, isSilent) {\n    const rotationComp = graphics.getComponent(ROTATION);\n\n    if (!this.isRedo) {\n      const undoData = makeUndoData(rotationComp);\n\n      cachedUndoDataForSilent = this.setUndoData(undoData, cachedUndoDataForSilent, isSilent);\n    }\n\n    return rotationComp[type](angle);\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    const rotationComp = graphics.getComponent(ROTATION);\n    const [, type, angle] = this.args;\n\n    if (type === 'setAngle') {\n      return rotationComp[type](this.undoData.angle);\n    }\n\n    return rotationComp.rotate(-angle);\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Set object properties\n */\nimport snippet from '../codeSnippet';\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { commandNames, rejectMessages } from '@/consts';\n\nconst command = {\n  name: commandNames.SET_OBJECT_PROPERTIES,\n\n  /**\n   * Set object properties\n   * @param {Graphics} graphics - Graphics instance\n   * @param {number} id - object id\n   * @param {Object} props - properties\n   *     @param {string} [props.fill] Color\n   *     @param {string} [props.fontFamily] Font type for text\n   *     @param {number} [props.fontSize] Size\n   *     @param {string} [props.fontStyle] Type of inclination (normal / italic)\n   *     @param {string} [props.fontWeight] Type of thicker or thinner looking (normal / bold)\n   *     @param {string} [props.textAlign] Type of text align (left / center / right)\n   *     @param {string} [props.textDecoration] Type of line (underline / line-through / overline)\n   * @returns {Promise}\n   */\n  execute(graphics, id, props) {\n    const targetObj = graphics.getObject(id);\n\n    if (!targetObj) {\n      return Promise.reject(rejectMessages.noObject);\n    }\n\n    if (this.undoData && !this.undoData.props && targetObj.originalState) {\n      this.undoData.props = {};\n      snippet.forEachOwnProperties(props, (value, key) => {\n        this.undoData.props[key] = targetObj.originalState[key];\n      });\n    }\n\n    graphics.setObjectProperties(id, props);\n\n    return Promise.resolve();\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @param {number} id - object id\n   * @returns {Promise}\n   */\n  undo(graphics, id) {\n    const { props } = this.undoData;\n\n    graphics.setObjectProperties(id, props);\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview Set object properties\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { commandNames, rejectMessages } from '@/consts';\n\nconst command = {\n  name: commandNames.SET_OBJECT_POSITION,\n\n  /**\n   * Set object properties\n   * @param {Graphics} graphics - Graphics instance\n   * @param {number} id - object id\n   * @param {Object} posInfo - position object\n   *  @param {number} posInfo.x - x position\n   *  @param {number} posInfo.y - y position\n   *  @param {string} posInfo.originX - can be 'left', 'center', 'right'\n   *  @param {string} posInfo.originY - can be 'top', 'center', 'bottom'\n   * @returns {Promise}\n   */\n  execute(graphics, id, posInfo) {\n    const targetObj = graphics.getObject(id);\n\n    if (!targetObj) {\n      return Promise.reject(rejectMessages.noObject);\n    }\n\n    this.undoData.objectId = id;\n    this.undoData.props = graphics.getObjectProperties(id, ['left', 'top']);\n\n    graphics.setObjectPosition(id, posInfo);\n    graphics.renderAll();\n\n    return Promise.resolve();\n  },\n\n  /**\n   * @param {Graphics} graphics - Graphics instance\n   * @returns {Promise}\n   */\n  undo(graphics) {\n    const { objectId, props } = this.undoData;\n\n    graphics.setObjectProperties(objectId, props);\n    graphics.renderAll();\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n","/**\n * @author NHN. FE Development Team <dl_javascript@nhn.com>\n * @fileoverview change selection\n */\nimport commandFactory from '@/factory/command';\nimport { Promise } from '@/util';\nimport { commandNames } from '@/consts';\nimport { getCachedUndoDataForDimension } from '@/helper/selectionModifyHelper';\n\nconst command = {\n  name: commandNames.CHANGE_SELECTION,\n\n  execute(graphics, props) {\n    if (this.isRedo) {\n      props.forEach((prop) => {\n        graphics.setObjectProperties(prop.id, prop);\n      });\n    } else {\n      this.undoData = getCachedUndoDataForDimension();\n    }\n\n    return Promise.resolve();\n  },\n\n  undo(graphics) {\n    this.undoData.forEach((datum) => {\n      graphics.setObjectProperties(datum.id, datum);\n    });\n\n    return Promise.resolve();\n  },\n};\n\ncommandFactory.register(command);\n\nexport default command;\n"],"sourceRoot":""}